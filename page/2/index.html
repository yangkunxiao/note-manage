<!DOCTYPE html>


<html lang="zh-CN" >


<head>
  <meta charset="utf-8" />
   
  <meta name="keywords" content="javascript typescript php node html html5 css linux vue react ç®—æ³• æ•°æ®ç»“æ„" />
   
  <meta name="description" content="å‰ç«¯å·¥ç¨‹å¸ˆ" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Walter
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/dist/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

<link rel="alternate" href="/atom.xml" title="Walter" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

</html>

<body>
  <div id="app">
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/yangkunxiao"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover4.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Walter</a></h1>
      <div id="subtitle-box">
        
          <span id="subtitle">é¢æœå¤§æµ· æ˜¥æš–èŠ±å¼€</span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" target="_blank" rel="noopener" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-Code/08" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/Code/08/"
    >æ‰‹å†™Event.EventEmitter</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/Code/08/" class="article-date">
  <time datetime="2020-03-12T14:30:00.000Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="æ‰‹å†™Event-EventEmitter"><a href="#æ‰‹å†™Event-EventEmitter" class="headerlink" title="æ‰‹å†™Event.EventEmitter"></a>æ‰‹å†™Event.EventEmitter</h1><p>ä¸€ä¸ª<strong><em>EventEmitter</em></strong>éœ€è¦å®ç°ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<ul>
<li>addEventListener</li>
<li>removeEventlistener</li>
<li>removeAllEventListener</li>
<li>emit</li>
<li>once</li>
</ul>
<h3 id="EventEmitter"><a href="#EventEmitter" class="headerlink" title="EventEmitter"></a>EventEmitter</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//å·¥å…·å‡½æ•°</span>
<span class="token keyword">const</span> wrapCallBack <span class="token operator">=</span> <span class="token punctuation">(</span>fn<span class="token punctuation">,</span>once <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> callback<span class="token punctuation">:</span>fn<span class="token punctuation">,</span>once <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h3 id="addEventListener"><a href="#addEventListener" class="headerlink" title="addEventListener"></a>addEventListener</h3><pre class=" language-javascript"><code class="language-javascript">EventEmitter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>addEventListener <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>fn<span class="token punctuation">,</span>once <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//ä»eventsè·å–äº‹ä»¶ç±»å‹ä¸ºtypeçš„äº‹ä»¶å›è°ƒ</span>
    <span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// console.log(handler)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>handler<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//å¦‚æœä¸å­˜åœ¨ åˆ™æ·»åŠ </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span><span class="token function">wrapCallBack</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span>once<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>handler <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> handler<span class="token punctuation">.</span>callback <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//å¦‚æœåªç»‘å®šä¸€ä¸ªå›è°ƒ</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span><span class="token punctuation">[</span>handler<span class="token punctuation">,</span><span class="token function">wrapCallBack</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span>once<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//ç»‘å®šç±»å¤šä¸ªå›è°ƒ</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">...</span>handler<span class="token punctuation">,</span><span class="token function">wrapCallBack</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span>once<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="removeEventListener"><a href="#removeEventListener" class="headerlink" title="removeEventListener"></a>removeEventListener</h3><pre class=" language-javascript"><code class="language-javascript">EventEmitter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>removeListener <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>listener<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>handler<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">//ç®€å•æ¯”è¾ƒå›è°ƒå‡½æ•°æ˜¯å¦ç›¸åŒ</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>handler<span class="token punctuation">.</span>callback<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">String</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">//å¾ªç¯å›è°ƒå‡½æ•°é˜Ÿåˆ—</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> handler<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> item <span class="token operator">=</span> handler<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//ç®€å•æ¯”è¾ƒå›è°ƒå‡½æ•°æ˜¯å¦ç›¸åŒ</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>callback<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">String</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                handler<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//é¿å…å›è°ƒå‡½æ•°æ•°ç»„å˜åŒ– å¯¼è‡´æ•°ç»„è®¿é—®é”™è¯¯</span>
                i<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment" spellcheck="true">//å¦‚æœæ•°ç»„ä¸ºç©º åˆ é™¤ç›‘å¬çš„äº‹ä»¶å³å¯</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>handler<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>handler<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token comment" spellcheck="true">//å¦‚æœæ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´  åªéœ€è¦ä»¥å¯¹è±¡çš„å½¢å¼ä¿å­˜å³å¯</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="removeAllEventListener"><a href="#removeAllEventListener" class="headerlink" title="removeAllEventListener"></a>removeAllEventListener</h3><pre class=" language-javascript"><code class="language-javascript">EventEmitter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>removeAllListener <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>handler<span class="token punctuation">)</span> <span class="token keyword">return</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="emit"><a href="#emit" class="headerlink" title="emit"></a>emit</h3><pre class=" language-javascript"><code class="language-javascript">EventEmitter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>emit <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">,</span>
        eventsArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment" spellcheck="true">//å¦‚æœæ˜¯å›è°ƒé˜Ÿåˆ—ä¸ºæ•°ç»„çš„å½¢å¼ å¾ªç¯éå†</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//ç®€å•å®ç° é¿å…åç»­æ•°ç»„é•¿åº¦å‡ºç°å˜åŒ– å¯¹æ•°ç»„çš„è®¿é—®å‡ºé”™</span>
        <span class="token comment" spellcheck="true">//ä¼˜åŒ–ï¼šå¯ä»¥è€ƒè™‘å†™ä¸€ä¸ªå·¥å…·å‡½æ•° æ·±æ‹·è´</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> handler<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            eventsArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handler<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
          <span class="token comment" spellcheck="true">//éå†typeå¯¹åº”çš„å›è°ƒé˜Ÿåˆ— è§¦å‘æ¯ä¸€ä¸ªcb</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> eventsArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> item <span class="token operator">=</span> eventsArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//æ‰§è¡Œå›è°ƒ</span>
            item<span class="token punctuation">.</span>callback<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>once<span class="token punctuation">)</span><span class="token punctuation">{</span>
                  <span class="token comment" spellcheck="true">//å¦‚æœå›è°ƒå‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ åˆ™åˆ é™¤è¯¥å›è°ƒå‡½æ•°</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>item<span class="token punctuation">.</span>callback<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment" spellcheck="true">//å¦åˆ™ç›´æ¥æ‰§è¡Œå³å¯</span>
        handler<span class="token punctuation">.</span>callback<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="once"><a href="#once" class="headerlink" title="once"></a>once</h3><pre class=" language-javascript"><code class="language-javascript">EventEmitter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>once <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>fn<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>fn<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Code/09" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/Code/09/"
    >æ·±æ‹·è´ VS æµ…æ‹·è´</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/Code/09/" class="article-date">
  <time datetime="2020-03-12T02:20:00.000Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="æ·±æ‹·è´-VS-æµ…æ‹·è´"><a href="#æ·±æ‹·è´-VS-æµ…æ‹·è´" class="headerlink" title="æ·±æ‹·è´ VS æµ…æ‹·è´"></a>æ·±æ‹·è´ VS æµ…æ‹·è´</h1><blockquote>
<p>æ·±æ‹·è´ï¼šæ‹·è´å®ä¾‹ã€‚æµ…æ‹·è´ï¼šæ‹·è´å¼•ç”¨ã€‚</p>
</blockquote>
<p>ä¸çŸ¥é“å¤§å®¶è¿˜è®°ä¸è®°å¾—é«˜ç¨‹ä¸Šå¯¹æ•°æ®ç±»å‹çš„å®šä¹‰ï¼š<br><strong>åŸºæœ¬æ•°æ®ç±»å‹ï¼š</strong><br>å¸ƒå°”ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€æ•°å­—ç±»å‹ã€‚è¿™äº›ç±»å‹å±äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå®ƒä»¬çš„å€¼é€šå¸¸éƒ½æ˜¯ç›´æ¥å­˜æ”¾åœ¨æ ˆä¸­ï¼Œæ‰€ä»¥å¹³æ—¶æˆ‘ä»¬åœ¨ç»™ç»™å˜é‡èµ‹å€¼çš„æ—¶å€™ï¼Œå°±æ˜¯ç›´æ¥å°†å€¼ç›´æ¥å¤åˆ¶ç»™å˜é‡ï¼Œæ–°å˜é‡çš„æ›´æ”¹ä¸ä¼šå½±å“åŸå˜é‡ã€‚<br><strong>å¼•ç”¨ç±»å‹ï¼š</strong><br>å¯¹äºå¯¹è±¡ï¼ˆåŒ…å«objectã€arrayã€dateã€functionç­‰ç­‰ï¼‰ï¼Œè¿™äº›å¯¹è±¡çš„å€¼éƒ½å­˜æ”¾åœ¨å †ä¸­ï¼Œå€¼çš„å¼•ç”¨å­˜æ”¾åœ¨æ ˆä¸­ã€‚</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//10</span>
b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//10,20</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>b<span class="token punctuation">:</span><span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> obj1<span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//100</span></code></pre>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1583893141137-90d3b97f-a36d-4bfb-a26d-88387fbfad4a.png#align=left&display=inline&height=438&name=image.png&originHeight=1074&originWidth=1468&size=133037&status=done&style=none&width=599" alt="image.png"><br>å¦‚å›¾ï¼Œæ·±æ‹·è´å°±æ˜¯åœ¨å†…å­˜ä¸­é‡æ–°å¼€è¾Ÿä¸€ä¸ªæ–°çš„å†…å­˜ï¼Œå°†ä¸€ä¸ªå¯¹è±¡ä»å†…å­˜ä¸­å®Œæ•´çš„è¯»å‡ºæ¥ï¼Œå­˜æ”¾åˆ°æ–°çš„å†…å­˜ä¸­ï¼Œä¸¤è€…äº’ä¸å½±å“ã€‚</p>
<p>è¯ä¸å¤šè¯´ï¼Œå…ˆæ’¸ä¸ºæ•¬ã€‚</p>
<h3 id="ä¹ä¸ç‰ˆ"><a href="#ä¹ä¸ç‰ˆ" class="headerlink" title="ä¹ä¸ç‰ˆ"></a>ä¹ä¸ç‰ˆ</h3><p>åœ¨ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æœ€å¤šçš„å°±æ˜¯ä¸‹é¢çš„æ–¹å¼ï¼Œä½†æ˜¯è¿™æ ·çš„æ–¹å¼å­˜åœ¨ç€æ½œåœ¨çš„é£é™©ï¼Œå¯¹äºä¸€ä¸‹å¾ªç¯åµŒå¥—çš„å¯¹è±¡ã€æ•°ç»„ç­‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆçš„å¤åˆ¶ã€‚å…·ä½“è¯·çœ‹<a href="https://www.yuque.com/walter-glskq/zf7grn/uva3mi" target="_blank" rel="noopener">è¿™ä¸€ç¯‡æ–‡ç« </a></p>
<pre class=" language-javascript"><code class="language-javascript">JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<h3 id="åŸºç¡€ç‰ˆæœ¬ï¼ˆä¸€ï¼‰"><a href="#åŸºç¡€ç‰ˆæœ¬ï¼ˆä¸€ï¼‰" class="headerlink" title="åŸºç¡€ç‰ˆæœ¬ï¼ˆä¸€ï¼‰"></a>åŸºç¡€ç‰ˆæœ¬ï¼ˆä¸€ï¼‰</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deeClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> element <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      res<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> element
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">{</span> c<span class="token punctuation">:</span><span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    d<span class="token punctuation">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">deeClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//{ a: 10, b: [ 1, 3, 4, { c: 20 } ], d: true }</span></code></pre>
<h3 id="åŸºç¡€ç‰ˆæœ¬ï¼ˆäºŒï¼‰"><a href="#åŸºç¡€ç‰ˆæœ¬ï¼ˆäºŒï¼‰" class="headerlink" title="åŸºç¡€ç‰ˆæœ¬ï¼ˆäºŒï¼‰"></a>åŸºç¡€ç‰ˆæœ¬ï¼ˆäºŒï¼‰</h3><p>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œéå†ç›®æ ‡å¯¹è±¡ï¼Œå°†åŸå¯¹è±¡ä¸Šçš„å±æ€§å’Œå±æ€§å€¼ä¸€æ¬¡æŒ‚è½½åˆ°æ–°å¯¹è±¡ä¸Šã€‚<br>æ·±æ‹·è´ï¼Œç”±äºæˆ‘ä»¬ä¸çŸ¥é“åŸå¯¹è±¡ä¼šåµŒå¥—å¤šå°‘å±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨é€’å½’æ¥è§£å†³ã€‚<br>å¦‚æœå±æ€§å€¼ä¸ºåŸºæœ¬ç±»å‹ï¼Œç›´æ¥å°†å±æ€§å’Œå±æ€§å€¼æŒ‚è½½åˆ°æ–°å¯¹è±¡ä¸Šã€‚<br>å¦‚æœå±æ€§å€¼ä¸ºå¯¹è±¡ç±»å‹ï¼Œåˆ™é€’å½’éå†è¯¥å±æ€§çš„å±æ€§å€¼ï¼Œç„¶åæŒ‚è½½åˆ°æ–°å¯¹è±¡ä¸Šã€‚</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> res <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> element <span class="token operator">=</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> element <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            res<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            res<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> target
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        c<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            d<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    f<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">{</span> g<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj1<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span></code></pre>
<h3 id="åŸºç¡€ç‰ˆæœ¬ï¼ˆä¸‰ï¼‰"><a href="#åŸºç¡€ç‰ˆæœ¬ï¼ˆä¸‰ï¼‰" class="headerlink" title="åŸºç¡€ç‰ˆæœ¬ï¼ˆä¸‰ï¼‰"></a>åŸºç¡€ç‰ˆæœ¬ï¼ˆä¸‰ï¼‰</h3><p>å…¼å®¹å¾ªç¯å¼•ç”¨ã€‚</p>
<p>æˆ‘ä»¬å€Ÿç”¨ä¸Šé¢çš„å‡½æ•°ï¼Œå»å¯¹ä¸€ä¸ªæœ‰å¾ªç¯å¼•ç”¨çš„å¯¹è±¡è¿›è¡Œæ·±æ‹·è´ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        c<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            d<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    f<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">{</span> g<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
<span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj1<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span></code></pre>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1583897125036-ba767d71-84e0-4793-828f-badefde0ecf1.png#align=left&display=inline&height=71&name=image.png&originHeight=108&originWidth=822&size=13051&status=done&style=none&width=537" alt="image.png"></p>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œå¦‚æœå­˜åœ¨å¯¹è±¡ç›´æ¥æˆ–è€…é—´æ¥å¼•ç”¨è‡ªèº«çš„æƒ…å†µï¼Œå°±ä¼šå‡ºç°å†…å­˜æº¢å‡ºçš„æƒ…å†µã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªæ–°çš„ç©ºé—´ï¼Œæ¥å­˜å‚¨å½“å‰å¯¹è±¡å’Œæ‹·è´å¯¹è±¡çš„å…³ç³»ï¼Œå½“æ‹·è´å½“å‰å¯¹è±¡çš„æ—¶å€™ï¼Œç°åœ¨å­˜å‚¨ç©ºé—´ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœå­˜åœ¨ï¼Œç›´æ¥è¿”å›å­˜å‚¨ä¸­çš„å€¼ï¼Œå¦åˆ™ï¼Œç»§ç»­æ‹·è´ã€‚</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deepClone3</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> res <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        map<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> element <span class="token operator">=</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
          res<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone3</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> target
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        c<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            b<span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">,</span>
            d<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    f<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">{</span> g<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
<span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token function">deepClone3</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span></code></pre>
<p>å†æ¬¡æ‰§è¡Œæ‹·è´ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°obj.objå€¼ä¸º <code>Circular</code>ï¼Œå³å¾ªç¯å¼•ç”¨çš„æ„æ€ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1583938079008-5972dee1-63ac-4ef4-8cc9-ca65b4978571.png#align=left&display=inline&height=90&name=image.png&originHeight=148&originWidth=670&size=15716&status=done&style=none&width=408" alt="image.png"></p>
<h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p>JavaScriptçš„å¯¹è±¡æœ¬è´¨ä¸Šåªèƒ½æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä¸”é”®åªèƒ½ä¸ºå­—ç¬¦ä¸²ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ES6ä¸­æå‡ºäº†ä¸€ç§æ–°çš„æ•°æ®ç»“æ„ï¼šMapã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒObject ç»“æ„æä¾›äº†â€œå­—ç¬¦ä¸²â€”å€¼â€çš„å¯¹åº”ï¼ŒMap ç»“æ„æä¾›äº†â€œå€¼â€”å€¼â€çš„å¯¹åº”ï¼Œæ˜¯ä¸€ç§æ›´å®Œå–„çš„ Hash ç»“æ„å®ç°ã€‚<br>Mapçš„APIï¼š</p>
<ol>
<li>size()</li>
<li>set(key,value)</li>
<li>get(key)</li>
<li>has(key)</li>
<li>delete(key)</li>
<li>clear()</li>
</ol>
<p>Mapçš„éå†æ–¹æ³•ï¼š</p>
<ul>
<li><code>Map.prototype.keys()</code>ï¼šè¿”å›é”®åçš„éå†å™¨ã€‚</li>
<li><code>Map.prototype.values()</code>ï¼šè¿”å›é”®å€¼çš„éå†å™¨ã€‚</li>
<li><code>Map.prototype.entries()</code>ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„éå†å™¨ã€‚</li>
<li><code>Map.prototype.forEach()</code>ï¼šéå† Map çš„æ‰€æœ‰æˆå‘˜ã€‚</li>
</ul>
<h4 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h4><p>WeakMapæ˜¯Mapçš„ä¸€ç§å˜å½¢ã€‚ä½†æ˜¯WeakMapåªæ¥å—å¯¹è±¡ä½œä¸ºé”®ï¼ˆé™¤nullå¤–ï¼‰ï¼Œä¸”WeakMapçš„é”®å¯¹åº”çš„å¯¹è±¡ï¼Œä¸ä¼šè¢«è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚<br>ä½¿ç”¨WeakMapçš„ä¼˜åŠ¿ï¼šå®ƒçš„é”®åæ‰€å¼•ç”¨çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸å°†è¯¥å¼•ç”¨è€ƒè™‘åœ¨å†…ã€‚å› æ­¤ï¼Œåªè¦æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å…¶ä»–å¼•ç”¨éƒ½è¢«æ¸…é™¤ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±ä¼šé‡Šæ”¾è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ä¸å†éœ€è¦ï¼ŒWeakMap é‡Œé¢çš„é”®åå¯¹è±¡å’Œæ‰€å¯¹åº”çš„é”®å€¼å¯¹ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œä¸ç”¨æ‰‹åŠ¨åˆ é™¤å¼•ç”¨ã€‚</p>
<p>æ€»ä¹‹ï¼Œ<code>WeakMap</code>çš„ä¸“ç”¨åœºåˆå°±æ˜¯ï¼Œå®ƒçš„é”®æ‰€å¯¹åº”çš„å¯¹è±¡ï¼Œå¯èƒ½ä¼šåœ¨å°†æ¥æ¶ˆå¤±ã€‚<code>WeakMap</code>ç»“æ„æœ‰åŠ©äºé˜²æ­¢å†…å­˜æ³„æ¼ã€‚<br>WeakMapçš„APIï¼š</p>
<ol>
<li>get(key)</li>
<li>set(key,value)</li>
<li>has(key)</li>
<li>delete(key)</li>
</ol>
<h3 id="å…¼å®¹å…¶ä»–ç±»å‹"><a href="#å…¼å®¹å…¶ä»–ç±»å‹" class="headerlink" title="å…¼å®¹å…¶ä»–ç±»å‹"></a>å…¼å®¹å…¶ä»–ç±»å‹</h3><p>æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰å¯¹åº”çš„<code>toString()</code>æ–¹æ³•ï¼Œå¦‚æœè¯¥æ–¹æ³•æœªè¢«é‡å†™ï¼Œåˆ™è°ƒç”¨çš„å°±æ˜¯<code>Object.prototype</code>ä¸Šçš„toString()ï¼Œè¿”å›çš„å°±æ˜¯â€™[object type]â€™ï¼Œtypeå°±æ˜¯è¯¥å¯¹è±¡å¯¹åº”çš„æ•°æ®ç±»å‹ã€‚<br>æ‰€ä»¥ï¼Œä¸ºäº†é˜²æ­¢toString()æ–¹æ³•è¢«é‡å†™ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨<code>Object.prototype</code>ä¸Šçš„æ–¹æ³•ï¼Œè·å–æ•°æ®ç±»å‹ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//åˆ¤æ–­ç±»å‹</span>
<span class="token keyword">function</span> <span class="token function">getType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>å‰é¢æåˆ°è¿‡ï¼Œå¯¹åº”å¯å¼•ç”¨çš„æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬è¦é€’å½’éå†ï¼›å¯¹åº”ä¸å¯å¼•ç”¨çš„æ•°æ®ç±»å‹ï¼Œç›´æ¥å¤åˆ¶å³å¯ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//åˆ¤æ–­æ˜¯å¦æ˜¯å¯å¼•ç”¨çš„æ•°æ®ç±»å‹ </span>
<span class="token keyword">function</span> <span class="token function">isRefrenceType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> target<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>target <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<p>è¿™é‡Œå¤§è‡´å¯¹ä¸€äº›æ•°æ®ç±»å‹è¿›è¡Œåˆ’åˆ†ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//å¼•ç”¨ç±»å‹</span>
<span class="token keyword">const</span> mapTag <span class="token operator">=</span> <span class="token string">'Map'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> setTag <span class="token operator">=</span> <span class="token string">'Set'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arrayTag <span class="token operator">=</span> <span class="token string">'Array'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> objectTag <span class="token operator">=</span> <span class="token string">'Object'</span><span class="token punctuation">;</span>


<span class="token comment" spellcheck="true">//ä¸å¯å¼•ç”¨ç±»å‹</span>
<span class="token keyword">const</span> boolTag <span class="token operator">=</span> <span class="token string">'Boolean'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> dateTag <span class="token operator">=</span> <span class="token string">'Date'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> errorTag <span class="token operator">=</span> <span class="token string">'Error'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> numberTag <span class="token operator">=</span> <span class="token string">'Number'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> regexpTag <span class="token operator">=</span> <span class="token string">'RegExp'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> stringTag <span class="token operator">=</span> <span class="token string">'String'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> symbolTag <span class="token operator">=</span> <span class="token string">'Symbol'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> bufferTag <span class="token operator">=</span> <span class="token string">'Uint8Array'</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//åˆ¤æ–­ç±»å‹</span>
<span class="token keyword">function</span> <span class="token function">getType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//åˆ¤æ–­æ˜¯å¦æ˜¯åŸå§‹ç±»å‹ç±»å‹ </span>
<span class="token keyword">function</span> <span class="token function">isRefrenceType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> target<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>target <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//è·å–åŸå‹ä¸Šçš„æ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">getInit</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ClassNames <span class="token operator">=</span> target<span class="token punctuation">.</span>constructor<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ClassNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//å¼•ç”¨ç±»å‹</span>
<span class="token keyword">const</span> mapTag <span class="token operator">=</span> <span class="token string">'Map'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> setTag <span class="token operator">=</span> <span class="token string">'Set'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arrayTag <span class="token operator">=</span> <span class="token string">'Array'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> objectTag <span class="token operator">=</span> <span class="token string">'Object'</span><span class="token punctuation">;</span>


<span class="token comment" spellcheck="true">//ä¸å¯å¼•ç”¨ç±»å‹</span>
<span class="token keyword">const</span> boolTag <span class="token operator">=</span> <span class="token string">'Boolean'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> dateTag <span class="token operator">=</span> <span class="token string">'Date'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> errorTag <span class="token operator">=</span> <span class="token string">'Error'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> numberTag <span class="token operator">=</span> <span class="token string">'Number'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> regexpTag <span class="token operator">=</span> <span class="token string">'RegExp'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> stringTag <span class="token operator">=</span> <span class="token string">'String'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> symbolTag <span class="token operator">=</span> <span class="token string">'Symbol'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> bufferTag <span class="token operator">=</span> <span class="token string">'Uint8Array'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> deepTag <span class="token operator">=</span> <span class="token punctuation">[</span>mapTag<span class="token punctuation">,</span> setTag<span class="token punctuation">,</span> arrayTag<span class="token punctuation">,</span> objectTag<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">deepClone4</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> type <span class="token operator">=</span> <span class="token function">getType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> isOriginType <span class="token operator">=</span> <span class="token function">isRefrenceType</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isOriginType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> target
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> cloneTarget<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>deepTag<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cloneTarget <span class="token operator">=</span> <span class="token function">getInit</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//é˜²æ­¢å¾ªç¯å¼•ç”¨</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    map<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> cloneTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//å¦‚æœæ˜¯mapTag ç±»å‹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> mapTag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> cloneTarget<span class="token punctuation">,</span> <span class="token string">'target'</span><span class="token punctuation">)</span>
        target<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            cloneTarget<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token function">deepClone4</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> cloneTarget<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//å¦‚æœæ˜¯setTag ç±»å‹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> setTag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            cloneTarget<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">deepClone4</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> cloneTarget<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//å¦‚æœæ˜¯arrayTag ç±»å‹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> arrayTag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            cloneTarget<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone4</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> map<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> cloneTarget<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//objectTag ç±»å‹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> objectTag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> array <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
        array<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            cloneTarget<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone4</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> cloneTarget<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'kaka'</span><span class="token punctuation">)</span>



<span class="token keyword">const</span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'11'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
    field1<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    field2<span class="token punctuation">:</span> undefined<span class="token punctuation">,</span>
    field3<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        child<span class="token punctuation">:</span> <span class="token string">'child'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    field4<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    empty<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    map<span class="token punctuation">,</span>
    <span class="token keyword">set</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
target<span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
<span class="token keyword">const</span> target1 <span class="token operator">=</span> <span class="token function">deepClone4</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
target1<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">"a"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ğŸ'</span><span class="token punctuation">,</span> target<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ğŸŒ'</span><span class="token punctuation">,</span> target1<span class="token punctuation">)</span></code></pre>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Interview/04" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/Interview/04/"
    >webå¸¸è§çš„æ”»å‡»æ‰‹æ®µ</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/Interview/04/" class="article-date">
  <time datetime="2020-03-12T02:20:00.000Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="å¸¸è§çš„æ”»å‡»æ‰‹æ®µ"><a href="#å¸¸è§çš„æ”»å‡»æ‰‹æ®µ" class="headerlink" title="å¸¸è§çš„æ”»å‡»æ‰‹æ®µ"></a>å¸¸è§çš„æ”»å‡»æ‰‹æ®µ</h1><h3 id="DOS"><a href="#DOS" class="headerlink" title="DOS"></a>DOS</h3><p>DOS(Denial Service)æ‹’ç»æœåŠ¡å¼æ”»å‡»ï¼Œå®ƒæ˜¯ä¸€ç§å®ç°å³ç®€å•å¾ˆæœ‰æ•ˆçš„é’ˆå¯¹æœåŠ¡å™¨è¿›è¡Œçš„æ”» å‡»æ–¹å¼ï¼Œå®ƒçš„æ”»å‡»ç›®çš„å°±æ˜¯è®©è¢«æ”»å‡»çš„ä¸»æœºå’ŒæœåŠ¡å™¨æ‹’ç»ç”¨æˆ·æ­£å¸¸è®¿é—®ï¼Œç ´åç³»ç»Ÿæ­£å¸¸è¿è¡Œ ï¼Œä»è€Œè¾¾åˆ°äº’è”ç½‘ç”¨æˆ·æ— æ³•è¿æ¥è¢«æ”»å‡»çš„æœåŠ¡å™¨å’Œä¸»æœºï¼Œé€ æˆæœåŠ¡å™¨ç˜«ç—ªã€‚å®ƒçš„æ”»å‡»è¿‡ç¨‹ï¼Œé¦–å…ˆæ”»å‡»è€…å‘è¢«æ”»å‡»çš„æœåŠ¡å™¨å‘ç”Ÿå¤§é‡å¸¦æœ‰è™šå‡IPåœ°å€çš„æœåŠ¡è¯·æ±‚ï¼Œè¢«æ”»å‡»è€…åœ¨æ¥æ”¶åˆ°è¯·æ±‚ åè¿”å›ç¡®è®¤ä¿¡æ¯ï¼Œç­‰å¾…æ”»å‡»è€…ç¡®è®¤ï¼Œæ­¤è¿‡ç¨‹éœ€è¦TCPçš„ä¸‰æ¬¡äº¤æ¢ã€‚ç”±äºæ”»å‡»è€…å‘é€çš„è¯·æ±‚ä¿¡ æ¯æ˜¯è™šå‡çš„ï¼Œæ‰€ä»¥è¢«æ”»å‡»æœåŠ¡å™¨æ— æ³•æ¥å—åˆ°ä¿¡æ¯ç¡®è®¤ï¼Œä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œè€Œåˆ†é…ç»™è¿™æ¬¡è¯· æ±‚çš„èµ„æºå´å§‹ç»ˆæ²¡æœ‰è¢«é‡Šæ”¾ã€‚å½“è¢«æ”»å‡»è€…ç­‰å¾…ä¸€å®šçš„æ—¶é—´åï¼Œè¿æ¥ä¼šå› è¶…æ—¶è€Œè¢«æ–­å¼€ï¼Œè¿™æ˜¯ æ”»å‡»è€…å†æ¬¡å‘é€æ–°çš„è™šå‡ä¿¡æ¯è¯·æ±‚ï¼Œå°±è¿™æ ·æœ€ç»ˆæœåŠ¡å™¨èµ„æºè¢«è€—å°½ï¼Œç›´åˆ°ç˜«ç—ªã€‚</p>
<h3 id="DDOS"><a href="#DDOS" class="headerlink" title="DDOS"></a>DDOS</h3><p>DDOS(Distributed Denial Service)åˆ†å¸ƒæ‹’ç»å¼æ”»å‡»ï¼Œå®ƒæ˜¯åœ¨DOSåŸºç¡€ä¸Šè¿›è¡Œçš„å¤§è§„æ¨¡ï¼Œå¤§ èŒƒå›´çš„æ”»å‡»æ¨¡å¼ï¼ŒDOSåªæ˜¯å•æœºå’Œå•æœºä¹‹é—´çš„æ”»å‡»æ¨¡å¼ï¼Œè€ŒDDOSæ˜¯åˆ©ç”¨ä¸€æ‰¹å—æ§åˆ¶çš„åƒµå°¸ä¸» æœºå‘ä¸€å°æœåŠ¡å™¨ä¸»æœºå‘èµ·çš„æ”»å‡»ï¼Œå…¶æ”»å‡»çš„å¼ºåº¦å’Œé€ æˆçš„å¨èƒè¦æ¯”DOSä¸¥é‡å¾ˆå¤šï¼Œæ›´å…·ç ´å æ€§ã€‚é¦–å…ˆDDOSæ”»å‡»è€…è¦å¯»æ‰¾åƒµå°¸ä¸»æœºï¼Œåœ¨äº’è”ç½‘ä¸Šå¯»æ‰¾ä¸€äº›æœ‰åé—¨æ¼æ´çš„ä¸»æœºï¼Œç„¶åå…¥ä¾µç³» ç»Ÿå®‰è£…æ§åˆ¶ç¨‹åºï¼Œå…¥ä¾µçš„è¶Šå¤šï¼Œæ§åˆ¶çš„åƒµå°¸ä¸»æœºå°±è¶Šå¤šï¼Œæ”»å‡»æºå°±æ›´å¤šï¼Œç„¶åæŠŠå…¥ä¾µçš„ä¸»æœº åˆ†é…ï¼Œä¸€éƒ¨åˆ†å……å½“æ”»å‡»çš„ä¸»è¦æ§åˆ¶ç«¯ï¼Œä¸€éƒ¨åˆ†å……å½“æ”»å‡»æºï¼Œå„è´Ÿå…¶è´£ï¼Œåœ¨æ”»å‡»è€…ç»Ÿä¸€æŒ‡æŒ¥ä¸‹ å¯¹è¢«æ”»å‡»çš„æœåŠ¡å™¨å‘èµ·æ”»å‡»ï¼Œç”±äºè¿™ä¸ªæ”»å‡»æ¨¡å¼æ˜¯åœ¨å¹•åæ“ä½œï¼Œæ‰€ä»¥å¾ˆéš¾è¢«ç›‘æ§ç³»ç»Ÿè·Ÿè¸ªï¼Œ èº«ä»½ä¸å®¹æ˜“è¢«å‘ç°ã€‚</p>
<h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><p>XSS(Cross Site Scripting)ï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ã€‚æŒ‡çš„æ˜¯é€šè¿‡ç½‘é¡µå¼€å‘è¿‡ç¨‹ä¸­ç•™ä¸‹çš„æ¼æ´ï¼Œé€šè¿‡ä¸€äº›æ–¹æ³•å°†æ¶æ„æŒ‡ä»¤ä»£ç æ³¨å…¥åˆ°ç½‘é¡µä¸­ï¼Œä½¿ç”¨æˆ·åŠ è½½å¹¶æ‰§è¡Œæ”»å‡»è€…çš„æ¶æ„ç¨‹åºæŒ‡ä»¤ã€‚è¿™äº›æ¶æ„ç½‘é¡µç¨‹åºé€šå¸¸æ˜¯JavaScriptï¼Œä½†å®é™…ä¸Šä¹Ÿå¯ä»¥åŒ…æ‹¬Javaã€ VBScriptã€ActiveXã€ Flash æˆ–è€…ç”šè‡³æ˜¯æ™®é€šçš„HTMLã€‚æ”»å‡»æˆåŠŸåï¼Œæ”»å‡»è€…å¯èƒ½å¾—åˆ°åŒ…æ‹¬ä½†ä¸é™äºæ›´é«˜çš„æƒé™ï¼ˆå¦‚æ‰§è¡Œä¸€äº›æ“ä½œï¼‰ã€ç§å¯†ç½‘é¡µå†…å®¹ã€ä¼šè¯å’Œcookieç­‰å„ç§å†…å®¹ã€‚</p>
<h4 id="åå°„å‹XSS"><a href="#åå°„å‹XSS" class="headerlink" title="åå°„å‹XSS"></a>åå°„å‹XSS</h4><p>æ”»å‡»è€…çš„æ¶æ„ä»£ç å¹¶æ²¡æœ‰æ³¨å…¥åˆ°ç½‘ç«™ä¸­ï¼Œè€Œæ˜¯è¯±ä½¿ç”¨æˆ·ç‚¹å‡»ç›®æ ‡ç½‘ç«™çš„é“¾æ¥æ¥å®æ–½æ”»å‡»ã€‚<br>åå°„å‹ XSS è·Ÿå­˜å‚¨å‹ XSS çš„åŒºåˆ«æ˜¯ï¼šå­˜å‚¨å‹ XSS çš„æ¶æ„ä»£ç å­˜åœ¨æ•°æ®åº“é‡Œï¼Œåå°„å‹ XSS çš„æ¶æ„ä»£ç å­˜åœ¨ URL é‡Œã€‚<br>åå°„å‹ XSS æ¼æ´å¸¸è§äºé€šè¿‡ URL ä¼ é€’å‚æ•°çš„åŠŸèƒ½ï¼Œå¦‚ç½‘ç«™æœç´¢ã€è·³è½¬ç­‰ã€‚</p>
<h4 id="å­˜å‚¨å‹XSS"><a href="#å­˜å‚¨å‹XSS" class="headerlink" title="å­˜å‚¨å‹XSS"></a>å­˜å‚¨å‹XSS</h4><p>æ”»å‡»è€…çš„æ¶æ„ä»£ç è¢«ä¿å­˜åˆ°ç›®æ ‡ç½‘ç«™çš„æœåŠ¡å™¨ä¸­ï¼Œè¿™ç§æ”»å‡»çš„æŒä¹…æ€§å’Œç¨³å®šæ€§è¾ƒå¼ºã€‚</p>
<h4 id="DOMå‹XSS"><a href="#DOMå‹XSS" class="headerlink" title="DOMå‹XSS"></a>DOMå‹XSS</h4><p>DOMå‹æŒ‡çš„å°±æ˜¯æ”»å‡»è€…è¾“å…¥æ¶æ„çš„ä»£ç å‰ç«¯æ²¡æœ‰åšä»»ä½•è¿‡æ»¤è¢«æ‰§è¡Œäº†ï¼Œç„¶åæ¶æ„ä»£ç å‘é€åˆ°æ”»å‡»è€…çš„ç½‘ç«™ï¼Œæ¨¡æ‹Ÿç”¨æˆ·çš„è¡Œä¸ºã€‚</p>
<ol>
<li>æ”»å‡»è€…æ„é€ å‡ºç‰¹æ®Šçš„ URLï¼Œå…¶ä¸­åŒ…å«æ¶æ„ä»£ç ã€‚</li>
<li>ç”¨æˆ·æ‰“å¼€å¸¦æœ‰æ¶æ„ä»£ç çš„ URLã€‚</li>
<li>ç”¨æˆ·æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”åè§£ææ‰§è¡Œï¼Œå‰ç«¯ JavaScript å–å‡º URL ä¸­çš„æ¶æ„ä»£ç å¹¶æ‰§è¡Œã€‚</li>
<li>æ¶æ„ä»£ç çªƒå–ç”¨æˆ·æ•°æ®å¹¶å‘é€åˆ°æ”»å‡»è€…çš„ç½‘ç«™ï¼Œæˆ–è€…å†’å……ç”¨æˆ·çš„è¡Œä¸ºï¼Œè°ƒç”¨ç›®æ ‡ç½‘ç«™æ¥å£æ‰§è¡Œæ”»å‡»è€…æŒ‡å®šçš„æ“ä½œ</li>
</ol>
<h4 id="åå°„å‹XSSå’Œå­˜å‚¨å‹XSSé˜²èŒƒ"><a href="#åå°„å‹XSSå’Œå­˜å‚¨å‹XSSé˜²èŒƒ" class="headerlink" title="åå°„å‹XSSå’Œå­˜å‚¨å‹XSSé˜²èŒƒ"></a>åå°„å‹XSSå’Œå­˜å‚¨å‹XSSé˜²èŒƒ</h4><p>å­˜å‚¨å‹å’Œåå°„å‹ XSS éƒ½æ˜¯åœ¨æœåŠ¡ç«¯å–å‡ºæ¶æ„ä»£ç åï¼Œæ’å…¥åˆ°å“åº” HTML é‡Œçš„ï¼Œæ”»å‡»è€…åˆ»æ„ç¼–å†™çš„â€œæ•°æ®â€è¢«å†…åµŒåˆ°â€œä»£ç â€ä¸­ï¼Œè¢«æµè§ˆå™¨æ‰€æ‰§è¡Œã€‚<br>é¢„é˜²è¿™ä¸¤ç§æ¼æ´ï¼Œæœ‰ä¸¤ç§å¸¸è§åšæ³•ï¼š</p>
<ul>
<li>æ”¹æˆçº¯å‰ç«¯æ¸²æŸ“ï¼ŒæŠŠä»£ç å’Œæ•°æ®åˆ†éš”å¼€ã€‚</li>
<li>å¯¹ HTML åšå……åˆ†è½¬ä¹‰ã€‚</li>
</ul>
<h4 id="DOMå‹XSSé˜²èŒƒ"><a href="#DOMå‹XSSé˜²èŒƒ" class="headerlink" title="DOMå‹XSSé˜²èŒƒ"></a>DOMå‹XSSé˜²èŒƒ</h4><p>DOM å‹ XSS æ”»å‡»ï¼Œå®é™…ä¸Šå°±æ˜¯ç½‘ç«™å‰ç«¯ JavaScript ä»£ç æœ¬èº«ä¸å¤Ÿä¸¥è°¨ï¼ŒæŠŠä¸å¯ä¿¡çš„æ•°æ®å½“ä½œä»£ç æ‰§è¡Œäº†ã€‚<br>åœ¨ä½¿ç”¨ <code>.innerHTML</code>ã€<code>.outerHTML</code>ã€<code>document.write()</code> æ—¶è¦ç‰¹åˆ«å°å¿ƒï¼Œä¸è¦æŠŠä¸å¯ä¿¡çš„æ•°æ®ä½œä¸º HTML æ’åˆ°é¡µé¢ä¸Šï¼Œè€Œåº”å°½é‡ä½¿ç”¨ <code>.textContent</code>ã€<code>.setAttribute()</code> ç­‰ã€‚<br>å¦‚æœç”¨ Vue/React æŠ€æœ¯æ ˆï¼Œå¹¶ä¸”ä¸ä½¿ç”¨ <code>v-html</code>/<code>dangerouslySetInnerHTML</code> åŠŸèƒ½ï¼Œå°±åœ¨å‰ç«¯ render é˜¶æ®µé¿å… <code>innerHTML</code>ã€<code>outerHTML</code> çš„ XSS éšæ‚£ã€‚<br>DOM ä¸­çš„å†…è”äº‹ä»¶ç›‘å¬å™¨ï¼Œå¦‚ <code>location</code>ã€<code>onclick</code>ã€<code>onerror</code>ã€<code>onload</code>ã€<code>onmouseover</code> ç­‰ï¼Œ<code>&lt;a&gt;</code> æ ‡ç­¾çš„ <code>href</code> å±æ€§ï¼ŒJavaScript çš„ <code>eval()</code>ã€<code>setTimeout()</code>ã€<code>setInterval()</code> ç­‰ï¼Œéƒ½èƒ½æŠŠå­—ç¬¦ä¸²ä½œä¸ºä»£ç è¿è¡Œã€‚å¦‚æœä¸å¯ä¿¡çš„æ•°æ®æ‹¼æ¥åˆ°å­—ç¬¦ä¸²ä¸­ä¼ é€’ç»™è¿™äº› APIï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿå®‰å…¨éšæ‚£ï¼Œè¯·åŠ¡å¿…é¿å…ã€‚</p>
<h4 id="å¸¸è§çš„XSSæ³¨å…¥æ–¹æ³•"><a href="#å¸¸è§çš„XSSæ³¨å…¥æ–¹æ³•" class="headerlink" title="å¸¸è§çš„XSSæ³¨å…¥æ–¹æ³•"></a>å¸¸è§çš„XSSæ³¨å…¥æ–¹æ³•</h4><ul>
<li>åœ¨ HTML ä¸­å†…åµŒçš„æ–‡æœ¬ä¸­ï¼Œæ¶æ„å†…å®¹ä»¥ script æ ‡ç­¾å½¢æˆæ³¨å…¥ã€‚</li>
<li>åœ¨å†…è”çš„ JavaScript ä¸­ï¼Œæ‹¼æ¥çš„æ•°æ®çªç ´äº†åŸæœ¬çš„é™åˆ¶ï¼ˆå­—ç¬¦ä¸²ï¼Œå˜é‡ï¼Œæ–¹æ³•åç­‰ï¼‰ã€‚</li>
<li>åœ¨æ ‡ç­¾å±æ€§ä¸­ï¼Œæ¶æ„å†…å®¹åŒ…å«å¼•å·ï¼Œä»è€Œçªç ´å±æ€§å€¼çš„é™åˆ¶ï¼Œæ³¨å…¥å…¶ä»–å±æ€§æˆ–è€…æ ‡ç­¾ã€‚</li>
<li>åœ¨æ ‡ç­¾çš„ hrefã€src ç­‰å±æ€§ä¸­ï¼ŒåŒ…å« <code>javascript:</code> ç­‰å¯æ‰§è¡Œä»£ç ã€‚</li>
<li>åœ¨ onloadã€onerrorã€onclick ç­‰äº‹ä»¶ä¸­ï¼Œæ³¨å…¥ä¸å—æ§åˆ¶ä»£ç ã€‚</li>
<li>åœ¨ style å±æ€§å’Œæ ‡ç­¾ä¸­ï¼ŒåŒ…å«ç±»ä¼¼ <code>background-image:url(&quot;javascript:...&quot;);</code> çš„ä»£ç ï¼ˆæ–°ç‰ˆæœ¬æµè§ˆå™¨å·²ç»å¯ä»¥é˜²èŒƒï¼‰ã€‚</li>
<li>åœ¨ style å±æ€§å’Œæ ‡ç­¾ä¸­ï¼ŒåŒ…å«ç±»ä¼¼ <code>expression(...)</code> çš„ CSS è¡¨è¾¾å¼ä»£ç ï¼ˆæ–°ç‰ˆæœ¬æµè§ˆå™¨å·²ç»å¯ä»¥é˜²èŒƒï¼‰</li>
</ul>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Interview/05" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/11/Interview/05/"
    >vueå¸¸è§é¢è¯•é¢˜</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/11/Interview/05/" class="article-date">
  <time datetime="2020-03-11T02:20:00.000Z" itemprop="datePublished">2020-03-11</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Vue/">Vue</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="vueå¸¸è§é¢è¯•é¢˜"><a href="#vueå¸¸è§é¢è¯•é¢˜" class="headerlink" title="vueå¸¸è§é¢è¯•é¢˜"></a>vueå¸¸è§é¢è¯•é¢˜</h1><h3 id="1ã€ä½ çŸ¥é“vueçš„æ¨¡æ¿è¯­æ³•ç”¨çš„æ˜¯å“ªä¸ªwebæ¨¡æ¿å¼•æ“çš„å—ï¼Ÿè¯´è¯´ä½ å¯¹è¿™æ¨¡æ¿å¼•æ“çš„ç†è§£ã€‚"><a href="#1ã€ä½ çŸ¥é“vueçš„æ¨¡æ¿è¯­æ³•ç”¨çš„æ˜¯å“ªä¸ªwebæ¨¡æ¿å¼•æ“çš„å—ï¼Ÿè¯´è¯´ä½ å¯¹è¿™æ¨¡æ¿å¼•æ“çš„ç†è§£ã€‚" class="headerlink" title="1ã€ä½ çŸ¥é“vueçš„æ¨¡æ¿è¯­æ³•ç”¨çš„æ˜¯å“ªä¸ªwebæ¨¡æ¿å¼•æ“çš„å—ï¼Ÿè¯´è¯´ä½ å¯¹è¿™æ¨¡æ¿å¼•æ“çš„ç†è§£ã€‚"></a>1ã€ä½ çŸ¥é“vueçš„æ¨¡æ¿è¯­æ³•ç”¨çš„æ˜¯å“ªä¸ªwebæ¨¡æ¿å¼•æ“çš„å—ï¼Ÿè¯´è¯´ä½ å¯¹è¿™æ¨¡æ¿å¼•æ“çš„ç†è§£ã€‚</h3><p>ä½¿ç”¨çš„Mustacheæ¨¡ç‰ˆã€‚<br>æ¨¡æ¿å¼•æ“ï¼š<br>è´Ÿè´£ç»„è£…æ•°æ®ï¼Œä»¥å¦å¤–ä¸€ç§å½¢å¼æˆ–å¤–è§‚å±•ç°æ•°æ®ã€‚<br>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å¯ç»´æŠ¤æ€§ï¼ˆåæœŸæ”¹èµ·æ¥æ–¹ä¾¿ï¼‰ï¼›</li>
<li>å¯æ‰©å±•æ€§ï¼ˆæƒ³è¦å¢åŠ åŠŸèƒ½ï¼Œå¢åŠ éœ€æ±‚æ–¹ä¾¿ï¼‰ï¼›</li>
<li>å¼€å‘æ•ˆç‡æé«˜ï¼ˆç¨‹åºé€»è¾‘ç»„ç»‡æ›´å¥½ï¼Œè°ƒè¯•æ–¹ä¾¿ï¼‰ï¼›</li>
<li>çœ‹èµ·æ¥èˆ’æœï¼ˆä¸å®¹æ˜“å†™é”™ï¼‰</li>
</ol>
<h3 id="2ã€ä½ çŸ¥é“v-modelçš„åŸç†å—ï¼Ÿ"><a href="#2ã€ä½ çŸ¥é“v-modelçš„åŸç†å—ï¼Ÿ" class="headerlink" title="2ã€ä½ çŸ¥é“v-modelçš„åŸç†å—ï¼Ÿ"></a>2ã€ä½ çŸ¥é“v-modelçš„åŸç†å—ï¼Ÿ</h3><p>v-modelåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå…¶å†…éƒ¨å®ç°åŸç†å°±æ˜¯ä½¿ç”¨<code>v-bind</code>å’Œ<code>input</code>äº‹ä»¶ç›‘å¬å€¼çš„æ”¹å˜ã€‚</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">changeValue</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    value <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
<span class="token punctuation">}</span></code></pre>
<h3 id="3ã€ä½¿ç”¨è¿‡vueå¼€å‘è¿‡å¤šè¯­è¨€é¡¹ç›®å—ï¼Ÿè¯´è¯´ä½ çš„åšæ³•"><a href="#3ã€ä½¿ç”¨è¿‡vueå¼€å‘è¿‡å¤šè¯­è¨€é¡¹ç›®å—ï¼Ÿè¯´è¯´ä½ çš„åšæ³•" class="headerlink" title="3ã€ä½¿ç”¨è¿‡vueå¼€å‘è¿‡å¤šè¯­è¨€é¡¹ç›®å—ï¼Ÿè¯´è¯´ä½ çš„åšæ³•"></a>3ã€ä½¿ç”¨è¿‡vueå¼€å‘è¿‡å¤šè¯­è¨€é¡¹ç›®å—ï¼Ÿè¯´è¯´ä½ çš„åšæ³•</h3><p>ä½¿ç”¨vue-i18nã€‚å…·ä½“ä½¿ç”¨è¯·å‚è€ƒ<a href="https://kazupon.github.io/vue-i18n/zh/started.html#html" target="_blank" rel="noopener">vue-i18n</a>ã€‚</p>
<ol>
<li>å®‰è£…ï¼šnpm install vue-i18n â€“save-dev</li>
<li>åˆ›å»ºè¯­è¨€æ–‡ä»¶ï¼šlanguage-zh.jså’Œlanguage-en.js   åˆ†åˆ«å¯¹åº”ä¸­æ–‡å’Œè‹±æ–‡ã€‚</li>
<li>åœ¨main.jsä¸­å¼•å…¥ã€‚</li>
<li>åˆ‡æ¢è¯­è¨€ã€‚</li>
</ol>
<p>language-zh.js:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> lang <span class="token operator">=</span> <span class="token punctuation">{</span>
    home<span class="token punctuation">:</span>'é¦–é¡µâ€˜<span class="token punctuation">,</span>
  name<span class="token punctuation">:</span><span class="token string">'å§“å'</span>
<span class="token punctuation">}</span></code></pre>
<p>language-en.js:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> lang <span class="token operator">=</span> <span class="token punctuation">{</span>
    home<span class="token punctuation">:</span>'homeâ€˜<span class="token punctuation">,</span>
  name<span class="token punctuation">:</span><span class="token string">'name'</span>
<span class="token punctuation">}</span></code></pre>
<p>main.jsï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> VueI18n <span class="token keyword">from</span> <span class="token string">'vue-i18n'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueI18n<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// é€šè¿‡æ’ä»¶çš„å½¢å¼æŒ‚è½½ï¼Œé€šè¿‡å…¨å±€æ–¹æ³• Vue.use() ä½¿ç”¨æ’ä»¶const i18n = new VueI18n({</span>
  locale<span class="token punctuation">:</span> <span class="token string">'zh'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// è¯­è¨€æ ‡è¯† //this.$i18n.locale // é€šè¿‡åˆ‡æ¢localeçš„å€¼æ¥å®ç°è¯­è¨€åˆ‡æ¢</span>
  messages<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'zh'</span><span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./VueI18n/language-zh'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//</span>
    <span class="token string">'en'</span><span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./VueI18n/language-en'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  router<span class="token punctuation">,</span>
  i18n<span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;App/>'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>åˆ‡æ¢è¯­è¨€ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">changeLaguages <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$i18n<span class="token punctuation">.</span>locale<span class="token punctuation">)</span>
  <span class="token keyword">let</span> lang <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$i18n<span class="token punctuation">.</span>locale <span class="token operator">===</span> <span class="token string">'zh'</span> <span class="token operator">?</span> <span class="token string">'en'</span> <span class="token punctuation">:</span> <span class="token string">'zh'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$i18n<span class="token punctuation">.</span>locale <span class="token operator">=</span> lang
<span class="token punctuation">}</span></code></pre>
<h3 id="4ã€åœ¨ä½¿ç”¨è®¡ç®—å±æ€§æ—¶ï¼Œå‡½æ•°åå¯ä»¥å’Œdataæ•°æ®æºä¸­çš„å±æ€§åŒåå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><a href="#4ã€åœ¨ä½¿ç”¨è®¡ç®—å±æ€§æ—¶ï¼Œå‡½æ•°åå¯ä»¥å’Œdataæ•°æ®æºä¸­çš„å±æ€§åŒåå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="4ã€åœ¨ä½¿ç”¨è®¡ç®—å±æ€§æ—¶ï¼Œå‡½æ•°åå¯ä»¥å’Œdataæ•°æ®æºä¸­çš„å±æ€§åŒåå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"></a>4ã€åœ¨ä½¿ç”¨è®¡ç®—å±æ€§æ—¶ï¼Œå‡½æ•°åå¯ä»¥å’Œdataæ•°æ®æºä¸­çš„å±æ€§åŒåå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3><p>ä¸å¯ä»¥ã€‚å› ä¸ºæ— è®ºæ˜¯è®¡ç®—å±æ€§ã€dataã€è¿˜æ˜¯propsï¼Œæœ€ç»ˆéƒ½ä¼šæŒ‚è½½åˆ°vmå®ä¾‹ä¸Šï¼Œå› æ­¤ä¸‰è€…ä¸å¯ä»¥åŒåã€‚<br>åœ¨<code>src/core/instance/state.js#L202</code>è¿™é‡Œï¼Œä¼šåšä¸€ä¸ªæ£€æŸ¥ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1585211440320-e5bd3457-7dfa-4292-a2d2-46854c33ce62.png#align=left&display=inline&height=126&name=image.png&originHeight=236&originWidth=1220&size=43368&status=done&style=none&width=650" alt="image.png"><br>è€Œä¸”åœ¨åˆå§‹åŒ–vmçš„æ—¶å€™ï¼Œä¼šä¾æ¬¡åˆå§‹åŒ–propsã€mehtodsã€dataï¼Œcomputedç­‰ã€‚è¿™æ˜¯åˆå§‹åŒ–çš„æºç ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">function</span> initState <span class="token punctuation">(</span>vm<span class="token punctuation">:</span> Component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vm<span class="token punctuation">.</span>_watchers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> opts <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options
  <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>props<span class="token punctuation">)</span> <span class="token function">initProps</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> opts<span class="token punctuation">.</span>props<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>methods<span class="token punctuation">)</span> <span class="token function">initMethods</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> opts<span class="token punctuation">.</span>methods<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">initData</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">observe</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token comment" spellcheck="true">/* asRootData */</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>computed<span class="token punctuation">)</span> <span class="token function">initComputed</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> opts<span class="token punctuation">.</span>computed<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>watch <span class="token operator">&amp;&amp;</span> opts<span class="token punctuation">.</span>watch <span class="token operator">!==</span> nativeWatch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">initWatch</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> opts<span class="token punctuation">.</span>watch<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="5ã€vueä¸­dataæ•°æ®æºä¸­çš„å±æ€§å¯ä»¥å’Œmethodsä¸­çš„æ–¹æ³•åé‡åå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><a href="#5ã€vueä¸­dataæ•°æ®æºä¸­çš„å±æ€§å¯ä»¥å’Œmethodsä¸­çš„æ–¹æ³•åé‡åå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="5ã€vueä¸­dataæ•°æ®æºä¸­çš„å±æ€§å¯ä»¥å’Œmethodsä¸­çš„æ–¹æ³•åé‡åå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"></a>5ã€vueä¸­dataæ•°æ®æºä¸­çš„å±æ€§å¯ä»¥å’Œmethodsä¸­çš„æ–¹æ³•åé‡åå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3><p>ä¸å¯ä»¥ã€‚<br>åœ¨åˆå§‹åŒ–dataçš„æ—¶å€™ï¼Œç¨‹åºä¼šè¿›è¡Œæ£€æŸ¥ï¼Œ<code>src/core/instance/state.js#L113</code>ï¼Œåœ¨<code>initState</code>å‡½æ•°ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> initData <span class="token punctuation">(</span>vm<span class="token punctuation">:</span> Component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> data <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>data
  data <span class="token operator">=</span> vm<span class="token punctuation">.</span>_data <span class="token operator">=</span> <span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">'function'</span>
    <span class="token operator">?</span> <span class="token function">getData</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
    <span class="token punctuation">:</span> data <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">warn</span><span class="token punctuation">(</span>
      <span class="token string">'data functions should return an object:\n'</span> <span class="token operator">+</span>
      <span class="token string">'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function'</span><span class="token punctuation">,</span>
      vm
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// proxy data on instance</span>
  <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>props
  <span class="token keyword">const</span> methods <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>methods
  <span class="token keyword">let</span> i <span class="token operator">=</span> keys<span class="token punctuation">.</span>length
  <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>methods <span class="token operator">&amp;&amp;</span> <span class="token function">hasOwn</span><span class="token punctuation">(</span>methods<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//è¿™é‡Œä¼šå¯¹åŒåå±æ€§å’Œæ–¹æ³•è¿›è¡Œè­¦å‘Š</span>
        <span class="token function">warn</span><span class="token punctuation">(</span>
          <span class="token template-string"><span class="token string">`Method "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" has already been defined as a data property.`</span></span><span class="token punctuation">,</span>
          vm
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>props <span class="token operator">&amp;&amp;</span> <span class="token function">hasOwn</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//è¿™é‡Œä¼šå¯¹åŒåçš„propså’Œå±æ€§è¿›è¡Œè­¦å‘Š</span>
      process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token string">`The data property "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" is already declared as a prop. `</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token string">`Use prop default value instead.`</span></span><span class="token punctuation">,</span>
        vm
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isReserved</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">proxy</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`_data`</span></span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// observe data</span>
  <span class="token function">observe</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token comment" spellcheck="true">/* asRootData */</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="5ã€æ€ä¹ˆç»™vueå®šä¹‰å…¨å±€æ–¹æ³•ï¼Ÿ"><a href="#5ã€æ€ä¹ˆç»™vueå®šä¹‰å…¨å±€æ–¹æ³•ï¼Ÿ" class="headerlink" title="5ã€æ€ä¹ˆç»™vueå®šä¹‰å…¨å±€æ–¹æ³•ï¼Ÿ"></a>5ã€æ€ä¹ˆç»™vueå®šä¹‰å…¨å±€æ–¹æ³•ï¼Ÿ</h3><ol>
<li>æŒ‚è½½åˆ°Vueçš„åŸå‹ä¸Šï¼Œå³ï¼šVue.prototype.methodsName = function(){}ã€‚</li>
<li>ä½¿ç”¨mixinï¼Œå³Vue.use(mixins)ã€‚</li>
</ol>
<h3 id="6ã€vue2-0ä¸­ä¸å†æ”¯æŒåœ¨v-htmlä¸­ä½¿ç”¨è¿‡æ»¤å™¨äº†æ€ä¹ˆåŠï¼Ÿ"><a href="#6ã€vue2-0ä¸­ä¸å†æ”¯æŒåœ¨v-htmlä¸­ä½¿ç”¨è¿‡æ»¤å™¨äº†æ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="6ã€vue2.0ä¸­ä¸å†æ”¯æŒåœ¨v-htmlä¸­ä½¿ç”¨è¿‡æ»¤å™¨äº†æ€ä¹ˆåŠï¼Ÿ"></a>6ã€vue2.0ä¸­ä¸å†æ”¯æŒåœ¨v-htmlä¸­ä½¿ç”¨è¿‡æ»¤å™¨äº†æ€ä¹ˆåŠï¼Ÿ</h3><ol>
<li>ä½¿ç”¨å…¨å±€æ–¹æ³•ã€‚æ¨è</li>
<li>ä½¿ç”¨filtersè¿‡æ»¤å™¨ã€‚</li>
<li>ä½¿ç”¨computedã€‚</li>
<li>ä½¿ç”¨methodsã€‚</li>
</ol>
<p>å…¨å±€æ–¹æ³•ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>msg <span class="token operator">=</span> <span class="token keyword">function</span>ï¼ˆmsgï¼‰<span class="token punctuation">{</span> 
ã€€<span class="token keyword">return</span> msg<span class="token punctuation">.</span>replaceï¼ˆ<span class="token string">"\n"</span>ï¼Œ<span class="token string">"&lt;br>"</span>ï¼‰
<span class="token punctuation">}</span>ï¼›</code></pre>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>msg(content)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>filtersè¿‡æ»¤å™¨ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">filtersï¼š<span class="token punctuation">{</span>
  msgï¼š<span class="token keyword">function</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> msg<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span>\n<span class="token operator">/</span>gï¼Œ<span class="token string">"&lt;br>"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>computedï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
  msgï¼š<span class="token keyword">function</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> msg<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span>\n<span class="token operator">/</span>gï¼Œ<span class="token string">"&lt;br>"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>mehtodsï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
  msgï¼š<span class="token keyword">function</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> msg<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span>\n<span class="token operator">/</span>gï¼Œ<span class="token string">"&lt;br>"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="7ã€ä½¿ç”¨vueåæ€ä¹ˆé’ˆå¯¹æœç´¢å¼•æ“åšSEOä¼˜åŒ–"><a href="#7ã€ä½¿ç”¨vueåæ€ä¹ˆé’ˆå¯¹æœç´¢å¼•æ“åšSEOä¼˜åŒ–" class="headerlink" title="7ã€ä½¿ç”¨vueåæ€ä¹ˆé’ˆå¯¹æœç´¢å¼•æ“åšSEOä¼˜åŒ–?"></a>7ã€ä½¿ç”¨vueåæ€ä¹ˆé’ˆå¯¹æœç´¢å¼•æ“åšSEOä¼˜åŒ–?</h3><ol>
<li>SSRæœåŠ¡ç«¯æ¸²æŸ“</li>
<li>NUXTåŒæ„</li>
<li>prerender-spa-plugin é¢„æ¸²æŸ“</li>
</ol>
<h3 id="8ã€å’Œkeep-aliveç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿæè¿°ä¸‹è¿™äº›ç”Ÿå‘½å‘¨æœŸ"><a href="#8ã€å’Œkeep-aliveç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿæè¿°ä¸‹è¿™äº›ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="8ã€å’Œkeep-aliveç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿæè¿°ä¸‹è¿™äº›ç”Ÿå‘½å‘¨æœŸ"></a>8ã€å’Œkeep-aliveç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿæè¿°ä¸‹è¿™äº›ç”Ÿå‘½å‘¨æœŸ</h3><p>activated å’Œ deactivatedã€‚</p>
<ol>
<li>activatedï¼šå½“é¡µé¢è¿›å…¥çš„æ—¶å€™ï¼Œä¾æ¬¡è§¦å‘ï¼šcreated â€“&gt; mounted â€“&gt; activatedã€‚</li>
<li>deactivatedï¼šå½“é€€å‡ºé¡µé¢çš„æ—¶å€™è§¦å‘deactivatedï¼Œå½“åœ¨æ­¤å‰è¿›æˆ–è€…åé€€çš„æ—¶å€™ä¹‹åè§¦å‘activatedã€‚</li>
</ol>
<h3 id="9ã€ä½ çŸ¥é“vueä¸­keyçš„åŸç†å—ï¼Ÿ"><a href="#9ã€ä½ çŸ¥é“vueä¸­keyçš„åŸç†å—ï¼Ÿ" class="headerlink" title="9ã€ä½ çŸ¥é“vueä¸­keyçš„åŸç†å—ï¼Ÿ"></a>9ã€ä½ çŸ¥é“vueä¸­keyçš„åŸç†å—ï¼Ÿ</h3><blockquote>
<p>src\core\vdom\patch.js - updateChildren()</p>
</blockquote>
<p>1ã€keyçš„ä½œç”¨ä¸»è¦æ˜¯ä¸ºäº†é«˜æ•ˆçš„æ›´æ–°è™šæ‹ŸDOMï¼Œå…¶åŸç†æ˜¯vueåœ¨patchè¿‡ç¨‹ä¸­é€šè¿‡keyå¯ä»¥ç²¾å‡†åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªï¼Œä»è€Œé¿å…é¢‘ç¹æ›´æ–°ä¸åŒå…ƒç´ ï¼Œä½¿å¾—æ•´ä¸ªpatchè¿‡ç¨‹æ›´åŠ é«˜æ•ˆï¼Œå‡å°‘DOMæ“ä½œé‡ï¼Œæé«˜æ€§èƒ½ã€‚<br>2ã€åŒæ—¶ï¼Œåœ¨vueä¸­ä½¿ç”¨ç›¸åŒæ ‡ç­¾åçš„å…ƒç´ è¿‡æ¸¡çš„æ—¶å€™éœ€è¦ä½¿ç”¨keyè¿›è¡ŒåŒºåˆ†ï¼Œå¦åˆ™vueä¹‹åæ›´æ–°å…¶å†…éƒ¨å±æ€§è€Œä¸ä¼šè§¦å‘è¿‡æ¸¡æ•ˆæœã€‚</p>
<h3 id="10ã€-vueå¦‚ä½•é‡ç½®dataï¼Ÿ"><a href="#10ã€-vueå¦‚ä½•é‡ç½®dataï¼Ÿ" class="headerlink" title="10ã€ vueå¦‚ä½•é‡ç½®dataï¼Ÿ"></a>10ã€ vueå¦‚ä½•é‡ç½®dataï¼Ÿ</h3><p>this.$data: è·å–å½“å‰çŠ¶æ€ä¸‹çš„dataã€‚<br>this.$options.data()ï¼šè·å–å½“å‰ç»„ä»¶åˆå§‹åŒ–çŠ¶æ€ä¸‹çš„dataã€‚<br>soï¼šObject.assgin( this.$data,this.$options.data() )</p>
<h3 id="11ã€è°ˆè°ˆä½ å¯¹mvc-ã€mvpå’Œmvvmçš„ç†è§£ï¼Ÿ"><a href="#11ã€è°ˆè°ˆä½ å¯¹mvc-ã€mvpå’Œmvvmçš„ç†è§£ï¼Ÿ" class="headerlink" title="11ã€è°ˆè°ˆä½ å¯¹mvc ã€mvpå’Œmvvmçš„ç†è§£ï¼Ÿ"></a>11ã€è°ˆè°ˆä½ å¯¹mvc ã€mvpå’Œmvvmçš„ç†è§£ï¼Ÿ</h3><p>åœ¨web1.0æ—¶ä»£ï¼Œå¹¶æ²¡æœ‰webå‰ç«¯çš„æ¦‚å¿µï¼Œå½“æ—¶å¼€å‘ä¸€ä¸ªwebåº”ç”¨åŸºæœ¬æ˜¯ç”±aspã€.netã€javaç­‰åå°äººå‘˜å®Œæˆã€‚é¡¹ç›®é€šå¸¸åŒ…å«htmlã€cssã€jsç­‰æ–‡ä»¶ã€‚è¿™æ ·åšçš„ä¼˜åŠ¿å°±æ˜¯å¼€å‘ç®€å•å¿«æ·ã€‚ç¼ºç‚¹å°±æ˜¯jspæ–‡ä»¶éš¾ä»¥ç»´æŠ¤ã€‚</p>
<ul>
<li>mvcï¼šä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä½¿å‰åç«¯èŒè´£æ›´åŠ æ¸…æ™°ã€ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€äºæ˜¯mvcå¼€å‘æ¨¡å¼å’Œæ¡†æ¶åº”è¿è€Œç”Ÿã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œå‰ç«¯ä¸»è¦è´Ÿè´£vï¼Œå³è§†å›¾å±‚viewï¼Œå‰ç«¯ä½¿ç”¨htmlæ¨¡ç‰ˆæ¸²æŸ“htmlã€‚åå°è´Ÿè´£cå±‚å’Œmå±‚ï¼Œå³æ§åˆ¶å±‚å’Œæ•°æ®å±‚ã€‚å½“ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶ï¼Œåç«¯æ ¹æ®ç”¨æˆ·è¯·æ±‚è·¯å¾„ï¼Œè¿”å›ç›¸åº”çš„é¡µé¢ã€‚è¿™æ ·çš„ç¼ºç‚¹å°±æ˜¯å‰ç«¯é¡µé¢å¼€å‘æ•ˆç‡ä¸é«˜ã€å‰åç«¯èŒè´£è¿˜ä¸å¤Ÿæ¸…æ™°æ˜ç¡®ã€‚</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1584351722739-4e8c350b-c471-4eaf-ba23-d51c7634b0ab.png#align=left&display=inline&height=437&name=image.png&originHeight=403&originWidth=540&size=35463&status=done&style=none&width=586" alt="image.png"><br>åœ¨web2.0æ—¶ä»£ï¼Œéšç€ajaxçš„å‡ºç°ï¼Œè®©å‰ç«¯å¯ä»¥ä½¿ç”¨ajaxå’Œåå°è¿›è¡Œäº¤äº’ï¼Œå‰åç«¯èŒè´£æ›´åŠ æ¸…æ™°ã€‚äºæ˜¯æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•´ä½“æ¶æ„å˜æˆäº†è¿™æ ·ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1584351877474-3ebda797-8857-40b4-9acd-487b717db3ae.png#align=left&display=inline&height=447&name=image.png&originHeight=389&originWidth=532&size=34544&status=done&style=none&width=612" alt="image.png"></p>
<p>é¡µé¢é€šè¿‡ajaxä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ï¼Œå‰ç«¯äººå‘˜åªè´Ÿè´£é¡µé¢ä¸åˆ†ï¼Œæ•°æ®éƒ¨åˆ†ç”±åå°è·å–ã€‚è€Œä¸”ä½¿ç”¨ajaxå¯ä»¥å±€éƒ¨åˆ·æ–°é¡µé¢ï¼Œå¤§å¤§é™ä½äº†æœåŠ¡ç«¯å‹åŠ›å’Œæµé‡æ¶ˆè€—ï¼Œè€Œä¸”å¯¹ç”¨æˆ·ç«¯ä½“éªŒä¹Ÿæ›´åŠ å‹å¥½ã€‚</p>
<ul>
<li>mvpï¼šéšç€ä¸šåŠ¡çš„å¢åŠ ï¼Œæˆ‘ä»¬å¯¹é¡¹ç›®çš„ä¸æ–­è·Œå€’ï¼Œå°±ä¼šå¯¼è‡´viewå±‚è¶Šæ¥è¶Šåºå¤§ï¼Œcontrollerå±‚æ˜¾å¾—è¶Šå‘å•è–„ã€‚äºæ˜¯äººä»¬å°±è¿™vå±‚å’Œmå±‚ä¸­é—´æ·»åŠ äº†på±‚ã€‚ç”±på±‚è´Ÿè´£må±‚å’Œvå±‚ä¹‹é—´çš„æ•°æ®æµåŠ¨ï¼Œé˜²æ­¢äºŒè€…ç›´æ¥è¿›è¡Œæ•°æ®æµåŠ¨ã€‚</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1584352260033-31612d02-6a81-42bc-ac51-4342dd24056a.png#align=left&display=inline&height=173&name=image.png&originHeight=118&originWidth=450&size=23031&status=done&style=none&width=658" alt="image.png"></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡çœ‹åˆ°ï¼Œpresenterè´Ÿè´£å’ŒModelè¿›è¡ŒåŒå‘äº¤äº’ï¼Œè¿˜å’ŒViewè¿›è¡ŒåŒå‘äº¤äº’ã€‚è¿™ç§äº¤äº’æ–¹å¼ï¼Œç›¸å¯¹äºMVCæ¥è¯´å°‘äº†ä¸€äº›çµæ´»ï¼ŒVIewå˜æˆäº†è¢«åŠ¨è§†å›¾ï¼Œå¹¶ä¸”æœ¬èº«å˜å¾—å¾ˆå°ã€‚è™½ç„¶å®ƒåˆ†ç¦»äº†Viewå’ŒModelã€‚ä½†æ˜¯åº”ç”¨é€æ¸å˜å¤§ä¹‹åï¼Œå¯¼è‡´presenterçš„ä½“ç§¯å¢å¤§ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</p>
<ul>
<li>mvvmï¼šé¦–å…ˆï¼Œä½•ä¸ºMVVMå‘¢ï¼ŸMVVMå¯ä»¥åˆ†è§£æˆ(Model-View-VIewModel)ã€‚ViewModelå¯ä»¥ç†è§£ä¸ºåœ¨presenteråŸºç¡€ä¸Šçš„è¿›é˜¶ç‰ˆã€‚å¦‚å›¾æ‰€ç¤ºï¼š</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1584352345351-4218f74c-f782-45c1-b8d7-78a1fbc5a96c.png#align=left&display=inline&height=261&name=image.png&originHeight=319&originWidth=643&size=79362&status=done&style=none&width=527" alt="image.png"></p>
<p>ViewModelé€šè¿‡å®ç°ä¸€å¥—æ•°æ®å“åº”å¼æœºåˆ¶è‡ªåŠ¨å“åº”Modelä¸­æ•°æ®å˜åŒ–ï¼›<br>åŒæ—¶Viewmodelä¼šå®ç°ä¸€å¥—æ›´æ–°ç­–ç•¥è‡ªåŠ¨å°†æ•°æ®å˜åŒ–è½¬æ¢ä¸ºè§†å›¾æ›´æ–°ï¼›<br>é€šè¿‡äº‹ä»¶ç›‘å¬å“åº”Viewä¸­ç”¨æˆ·äº¤äº’ä¿®æ”¹Modelä¸­æ•°æ®ã€‚<br>è¿™æ ·åœ¨ViewModelä¸­å°±å‡å°‘äº†å¤§é‡DOMæ“ä½œä»£ç ã€‚<br>MVVMåœ¨ä¿æŒViewå’ŒModelæ¾è€¦åˆçš„åŒæ—¶ï¼Œè¿˜å‡å°‘äº†ç»´æŠ¤å®ƒä»¬å…³ç³»çš„ä»£ç ï¼Œä½¿ç”¨æˆ·ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œå…¼é¡¾å¼€å‘æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>æ€»ç»“ï¼š</p>
<ul>
<li>è¿™ä¸‰è€…éƒ½æ˜¯æ¡†æ¶æ¨¡å¼ï¼Œå®ƒä»¬è®¾è®¡çš„ç›®æ ‡éƒ½æ˜¯ä¸ºäº†è§£å†³Modelå’ŒViewçš„è€¦åˆé—®é¢˜ã€‚</li>
<li>MVCæ¨¡å¼å‡ºç°è¾ƒæ—©ä¸»è¦åº”ç”¨åœ¨åç«¯ï¼Œå¦‚Spring MVCã€ASP.NET MVCç­‰ï¼Œåœ¨å‰ç«¯é¢†åŸŸçš„æ—©æœŸä¹Ÿæœ‰åº”ç”¨ï¼Œå¦‚Backbone.jsã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯åˆ†å±‚æ¸…æ™°ï¼Œç¼ºç‚¹æ˜¯æ•°æ®æµæ··ä¹±ï¼Œçµæ´»æ€§å¸¦æ¥çš„ç»´æŠ¤æ€§é—®é¢˜ã€‚</li>
<li>MVPæ¨¡å¼åœ¨æ˜¯MVCçš„è¿›åŒ–å½¢å¼ï¼ŒPresenterä½œä¸ºä¸­é—´å±‚è´Ÿè´£MVé€šä¿¡ï¼Œè§£å†³äº†ä¸¤è€…è€¦åˆé—®é¢˜ï¼Œä½†På±‚è¿‡äºè‡ƒè‚¿ä¼šå¯¼è‡´ç»´æŠ¤é—®é¢˜ã€‚</li>
<li>MVVMæ¨¡å¼åœ¨å‰ç«¯é¢†åŸŸæœ‰å¹¿æ³›åº”ç”¨ï¼Œå®ƒä¸ä»…è§£å†³MVè€¦åˆé—®é¢˜ï¼Œè¿˜åŒæ—¶è§£å†³äº†ç»´æŠ¤ä¸¤è€…æ˜ å°„å…³ç³»çš„å¤§é‡ç¹æ‚ä»£ç å’ŒDOMæ“ä½œä»£ç ï¼Œåœ¨æé«˜å¼€å‘æ•ˆç‡ã€å¯è¯»æ€§åŒæ—¶è¿˜ä¿æŒäº†ä¼˜è¶Šçš„æ€§èƒ½è¡¨ç°ã€‚</li>
</ul>
<h3 id="12ã€ä½ çŸ¥é“styleåŠ scopeå±æ€§çš„åŸç†å’Œä½œç”¨å—"><a href="#12ã€ä½ çŸ¥é“styleåŠ scopeå±æ€§çš„åŸç†å’Œä½œç”¨å—" class="headerlink" title="12ã€ä½ çŸ¥é“styleåŠ scopeå±æ€§çš„åŸç†å’Œä½œç”¨å—"></a>12ã€ä½ çŸ¥é“styleåŠ scopeå±æ€§çš„åŸç†å’Œä½œç”¨å—</h3><p>ç”¨é€”ï¼šé˜²æ­¢å…¨å±€åŒåCSSæ±¡æŸ“<br>åŸç†ï¼šåœ¨æ ‡ç­¾åŠ ä¸Šv-data-somethingå±æ€§ï¼Œå†åœ¨é€‰æ‹©å™¨æ—¶åŠ ä¸Šå¯¹åº”[v-data-something]ï¼Œå³CSSå¸¦å±æ€§é€‰æ‹©å™¨ï¼Œä»¥æ­¤å®Œæˆç±»ä¼¼ä½œç”¨åŸŸçš„é€‰æ‹©æ–¹å¼ã€‚</p>
<h3 id="13ã€vueè¾¹ç•Œæƒ…å†µæœ‰å“ªäº›"><a href="#13ã€vueè¾¹ç•Œæƒ…å†µæœ‰å“ªäº›" class="headerlink" title="13ã€vueè¾¹ç•Œæƒ…å†µæœ‰å“ªäº›"></a>13ã€vueè¾¹ç•Œæƒ…å†µæœ‰å“ªäº›</h3><ol>
<li>è®¿é—®æ ¹å®ä¾‹ï¼šthis.$root </li>
<li>è®¿é—®çˆ¶ç»„ä»¶ï¼šthis.$parent</li>
<li>è®¿é—®å­ç»„ä»¶ï¼šthis.$refs</li>
<li>ä¾èµ–æ³¨å…¥ï¼šprovide inject</li>
<li>ç»„ä»¶é€’å½’å¼•ç”¨</li>
</ol>
<h3 id="14ã€å­ç»„ä»¶å¦‚ä½•è®¿é—®çˆ¶ç»„ä»¶"><a href="#14ã€å­ç»„ä»¶å¦‚ä½•è®¿é—®çˆ¶ç»„ä»¶" class="headerlink" title="14ã€å­ç»„ä»¶å¦‚ä½•è®¿é—®çˆ¶ç»„ä»¶"></a>14ã€å­ç»„ä»¶å¦‚ä½•è®¿é—®çˆ¶ç»„ä»¶</h3><ol>
<li>ç›´æ¥åœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨this.$parent.methods</li>
<li>å­ç»„ä»¶ä½¿ç”¨$emitå‘é€ä¸€ä¸ªäº‹ä»¶ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­è®¾ç½®ç›‘å¬</li>
<li>çˆ¶ç»„ä»¶å°†äº‹ä»¶é€šè¿‡å±æ€§ä¼ é€’ç»™å­ç»„ä»¶</li>
</ol>
<h3 id="15ã€watch-methodsä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°ä¼šæ€ä¹ˆæ ·ï¼Ÿ"><a href="#15ã€watch-methodsä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°ä¼šæ€ä¹ˆæ ·ï¼Ÿ" class="headerlink" title="15ã€watch/methodsä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°ä¼šæ€ä¹ˆæ ·ï¼Ÿ"></a>15ã€watch/methodsä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°ä¼šæ€ä¹ˆæ ·ï¼Ÿ</h3><p>ä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚å› ä¸ºç®­å¤´å‡½æ•°çš„thisé»˜è®¤ç»‘å®šçˆ¶çº§ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯vueå®ä¾‹ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯npmå®‰è£…çš„vueï¼Œåˆ™æ­¤æ—¶thisæŒ‡å‘å½“å‰ç»„ä»¶ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1585276525133-0ed18bfa-6f6c-4496-ab17-d5474f0f514e.png#align=left&display=inline&height=351&name=image.png&originHeight=702&originWidth=1740&size=154056&status=done&style=none&width=870" alt="image.png"><br>å¦‚æœä½¿ç”¨çš„æ˜¯scriptæ ‡ç­¾ï¼Œåˆ™thisæŒ‡å‘windowã€‚</p>
<h3 id="16-ã€vueå¦‚ä½•é…ç½®favicon"><a href="#16-ã€vueå¦‚ä½•é…ç½®favicon" class="headerlink" title="16 ã€vueå¦‚ä½•é…ç½®favicon"></a>16 ã€vueå¦‚ä½•é…ç½®favicon</h3><ul>
<li>åœ¨æ’ä»¶é…ç½®ä¸­çš„HtmlWebpackPluginä¸­é…ç½®</li>
</ul>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span><span class="token punctuation">,</span>
  favicon<span class="token punctuation">:</span><span class="token string">''</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<ul>
<li>åœ¨htmlæ¨¡ç‰ˆä¸­é…ç½®ï¼š</li>
</ul>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"icon"</span> href<span class="token operator">=</span><span class="token string">"/assets/title.png"</span> type<span class="token operator">=</span><span class="token string">"image/x-icon"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre>
<h3 id="17ã€vueçš„é”™è¯¯å¤„ç†ä½ çŸ¥é“å¤šå°‘ï¼Ÿ"><a href="#17ã€vueçš„é”™è¯¯å¤„ç†ä½ çŸ¥é“å¤šå°‘ï¼Ÿ" class="headerlink" title="17ã€vueçš„é”™è¯¯å¤„ç†ä½ çŸ¥é“å¤šå°‘ï¼Ÿ"></a>17ã€vueçš„é”™è¯¯å¤„ç†ä½ çŸ¥é“å¤šå°‘ï¼Ÿ</h3><ul>
<li>errorHandler</li>
</ul>
<p>å…·ä½“è¯·çœ‹ï¼š<a href="https://vuejs.org/v2/api/#errorHandler" target="_blank" rel="noopener">errorHandler</a></p>
<pre class=" language-javascript"><code class="language-javascript">Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>errorHandler <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> vm<span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// handle error</span>
  <span class="token comment" spellcheck="true">// `info` is a Vue-specific error info, e.g. which lifecycle hook</span>
  <span class="token comment" spellcheck="true">// the error was found in. Only available in 2.2.0+</span>
<span class="token punctuation">}</span></code></pre>
<p>å…¶ä¸­ï¼š<code>err</code>æŒ‡çš„æ˜¯<code>error</code>å¯¹è±¡æœ¬èº«ï¼ŒinfoæŒ‡çš„æ˜¯é”™è¯¯ä¿¡æ¯ï¼ŒvmæŒ‡çš„æ˜¯vueå®ä¾‹ã€‚</p>
<ul>
<li>warnHandler</li>
</ul>
<pre class=" language-javascript"><code class="language-javascript">Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>warnHandler <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>msg<span class="token punctuation">,</span> vm<span class="token punctuation">,</span> trace<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// `trace` is the component hierarchy trace</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Warn: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msg<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\nTrace: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>trace<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>traceä»£è¡¨ç»„ä»¶æ ‘ã€‚<br>ä¾‹å¦‚ï¼šæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span> v<span class="token operator">-</span>cloak<span class="token operator">></span>
  Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre>
<p>å°±ä¼šæç¤ºï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">Warn<span class="token punctuation">:</span> Property or method <span class="token string">'name'</span> is not defined on the instance but referenced during render<span class="token punctuation">.</span> Make sure that <span class="token keyword">this</span> property is reactive<span class="token punctuation">,</span> either <span class="token keyword">in</span> the data option<span class="token punctuation">,</span> or <span class="token keyword">for</span> <span class="token keyword">class</span><span class="token operator">-</span>based components<span class="token punctuation">,</span> by initializing the property<span class="token punctuation">.</span> See<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>vuejs<span class="token punctuation">.</span>org<span class="token operator">/</span>v2<span class="token operator">/</span>guide<span class="token operator">/</span>reactivity<span class="token punctuation">.</span>html#Declaring<span class="token operator">-</span>Reactive<span class="token operator">-</span>Properties<span class="token punctuation">.</span>
Trace<span class="token punctuation">:</span> 

<span class="token punctuation">(</span>found <span class="token keyword">in</span> <span class="token operator">&lt;</span>Root<span class="token operator">></span><span class="token punctuation">)</span></code></pre>
<ul>
<li>renderErrorï¼šå’Œå‰é¢ä¸¤ä¸ªä¸åŒï¼Œè¿™ä¸ªæŠ€å·§ä¸é€‚ç”¨äºå…¨å±€ï¼Œå’Œç»„ä»¶ç›¸å…³ã€‚å¹¶ä¸”åªé€‚ç”¨äºéç”Ÿäº§ç¯å¢ƒã€‚</li>
</ul>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  renderError <span class="token punctuation">(</span>h<span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'pre'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> style<span class="token punctuation">:</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">'red'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>stack<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span> v<span class="token operator">-</span>cloak<span class="token operator">></span>
  Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name2<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token function">name2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<pre class=" language-javascript"><code class="language-javascript">ReferenceError<span class="token punctuation">:</span> x is not defined
    at Vue<span class="token punctuation">.</span>name2 <span class="token punctuation">(</span>pen<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">45</span><span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">)</span>
    at Watcher<span class="token punctuation">.</span><span class="token keyword">get</span> <span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>unpkg<span class="token punctuation">.</span>com<span class="token operator">/</span>vue@<span class="token number">2.6</span><span class="token punctuation">.</span><span class="token number">11</span><span class="token operator">/</span>dist<span class="token operator">/</span>vue<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">4478</span><span class="token punctuation">:</span><span class="token number">27</span><span class="token punctuation">)</span>
    at Watcher<span class="token punctuation">.</span>evaluate <span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>unpkg<span class="token punctuation">.</span>com<span class="token operator">/</span>vue@<span class="token number">2.6</span><span class="token punctuation">.</span><span class="token number">11</span><span class="token operator">/</span>dist<span class="token operator">/</span>vue<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">4583</span><span class="token punctuation">:</span><span class="token number">23</span><span class="token punctuation">)</span>
    at Proxy<span class="token punctuation">.</span>computedGetter <span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>unpkg<span class="token punctuation">.</span>com<span class="token operator">/</span>vue@<span class="token number">2.6</span><span class="token punctuation">.</span><span class="token number">11</span><span class="token operator">/</span>dist<span class="token operator">/</span>vue<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">4832</span><span class="token punctuation">:</span><span class="token number">19</span><span class="token punctuation">)</span>
    at Proxy<span class="token punctuation">.</span>eval <span class="token punctuation">(</span>eval at createFunction <span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>unpkg<span class="token punctuation">.</span>com<span class="token operator">/</span>vue@<span class="token number">2.6</span><span class="token punctuation">.</span><span class="token number">11</span><span class="token operator">/</span>dist<span class="token operator">/</span>vue<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">11649</span><span class="token punctuation">:</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>anonymous<span class="token operator">></span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">68</span><span class="token punctuation">)</span>
    at Vue<span class="token punctuation">.</span>_render <span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>unpkg<span class="token punctuation">.</span>com<span class="token operator">/</span>vue@<span class="token number">2.6</span><span class="token punctuation">.</span><span class="token number">11</span><span class="token operator">/</span>dist<span class="token operator">/</span>vue<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">3551</span><span class="token punctuation">:</span><span class="token number">24</span><span class="token punctuation">)</span>
    at Vue<span class="token punctuation">.</span>updateComponent <span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>unpkg<span class="token punctuation">.</span>com<span class="token operator">/</span>vue@<span class="token number">2.6</span><span class="token punctuation">.</span><span class="token number">11</span><span class="token operator">/</span>dist<span class="token operator">/</span>vue<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">4067</span><span class="token punctuation">:</span><span class="token number">23</span><span class="token punctuation">)</span>
    at Watcher<span class="token punctuation">.</span><span class="token keyword">get</span> <span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>unpkg<span class="token punctuation">.</span>com<span class="token operator">/</span>vue@<span class="token number">2.6</span><span class="token punctuation">.</span><span class="token number">11</span><span class="token operator">/</span>dist<span class="token operator">/</span>vue<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">4478</span><span class="token punctuation">:</span><span class="token number">27</span><span class="token punctuation">)</span>
    at <span class="token keyword">new</span> <span class="token class-name">Watcher</span> <span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>unpkg<span class="token punctuation">.</span>com<span class="token operator">/</span>vue@<span class="token number">2.6</span><span class="token punctuation">.</span><span class="token number">11</span><span class="token operator">/</span>dist<span class="token operator">/</span>vue<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">4467</span><span class="token punctuation">:</span><span class="token number">14</span><span class="token punctuation">)</span>
    at mountComponent <span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>unpkg<span class="token punctuation">.</span>com<span class="token operator">/</span>vue@<span class="token number">2.6</span><span class="token punctuation">.</span><span class="token number">11</span><span class="token operator">/</span>dist<span class="token operator">/</span>vue<span class="token punctuation">.</span>js<span class="token punctuation">:</span><span class="token number">4074</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">)</span></code></pre>
<ul>
<li>errorCaptured</li>
</ul>
<p><strong>ç±»å‹</strong>ï¼š<code>(err: Error, vm: Component, info: string) =&gt; ?boolean</code><br>å½“æ•è·ä¸€ä¸ªæ¥è‡ªå­å­™ç»„ä»¶çš„é”™è¯¯æ—¶è¢«è°ƒç”¨ã€‚æ­¤é’©å­ä¼šæ”¶åˆ°ä¸‰ä¸ªå‚æ•°ï¼šé”™è¯¯å¯¹è±¡ã€å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶å®ä¾‹ä»¥åŠä¸€ä¸ªåŒ…å«é”™è¯¯æ¥æºä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚æ­¤é’©å­å¯ä»¥è¿”å› <code>false</code> ä»¥é˜»æ­¢è¯¥é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­ã€‚</p>
<h3 id="18ã€vueæ–‡ä»¶ä¸­styleã€scriptæ˜¯å¿…é¡»çš„å—"><a href="#18ã€vueæ–‡ä»¶ä¸­styleã€scriptæ˜¯å¿…é¡»çš„å—" class="headerlink" title="18ã€vueæ–‡ä»¶ä¸­styleã€scriptæ˜¯å¿…é¡»çš„å—"></a>18ã€vueæ–‡ä»¶ä¸­styleã€scriptæ˜¯å¿…é¡»çš„å—</h3><p>styleä¸æ˜¯å¿…é¡»çš„ã€‚ä½†æ˜¯scriptæ˜¯å¿…é¡»çš„ï¼š<code>export default {}</code></p>
<h3 id="19ã€å¦‚æœvueå˜é‡åå‡ºç°ä»¥-æˆ–è€…-å¼€å¤´çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿ"><a href="#19ã€å¦‚æœvueå˜é‡åå‡ºç°ä»¥-æˆ–è€…-å¼€å¤´çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿ" class="headerlink" title="19ã€å¦‚æœvueå˜é‡åå‡ºç°ä»¥_æˆ–è€…$å¼€å¤´çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿ"></a>19ã€å¦‚æœvueå˜é‡åå‡ºç°ä»¥_æˆ–è€…$å¼€å¤´çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿ</h3><p>ä¼šæŠ¥<code>undefined</code>ã€‚å› ä¸ºåœ¨<code>initState</code>çš„æ—¶å€™ï¼Œ<code>vm</code>ä¼šä»£ç†æ‰€æœ‰çš„<code>data</code>ï¼Œå¦‚æœå‡ºç°æœ‰<code>_</code>æˆ–è€…<code>$</code>å¼€å¤´çš„å˜é‡åï¼Œå¯èƒ½ä¼šå’Œ<code>vm</code>å†…éƒ¨å±æ€§å†²çªï¼Œ<code>vue</code>ä¸ä¼šä»£ç†è¯¥å±æ€§ã€‚å¯ä»¥é€šè¿‡<code>vm.$data.</code>è®¿é—®ã€‚</p>
<h3 id="20ã€vueä½¿ç”¨v-foréå†å¯¹è±¡çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ä»€ä¹ˆé¡ºåºéå†çš„ï¼Ÿå¦‚ä½•ä¿è¯éå†é¡ºåºï¼Ÿ"><a href="#20ã€vueä½¿ç”¨v-foréå†å¯¹è±¡çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ä»€ä¹ˆé¡ºåºéå†çš„ï¼Ÿå¦‚ä½•ä¿è¯éå†é¡ºåºï¼Ÿ" class="headerlink" title="20ã€vueä½¿ç”¨v-foréå†å¯¹è±¡çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ä»€ä¹ˆé¡ºåºéå†çš„ï¼Ÿå¦‚ä½•ä¿è¯éå†é¡ºåºï¼Ÿ"></a>20ã€vueä½¿ç”¨v-foréå†å¯¹è±¡çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ä»€ä¹ˆé¡ºåºéå†çš„ï¼Ÿå¦‚ä½•ä¿è¯éå†é¡ºåºï¼Ÿ</h3><p>é¦–å…ˆï¼Œä¼šåˆ¤æ–­å¯¹è±¡æ˜¯å¦æœ‰<code>iterator</code>æ¥å£ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å¾ªç¯æ‰§è¡Œ<code>next()</code>æ–¹æ³•ã€‚<br>æ²¡æœ‰<code>iterator</code>æ¥å£çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>Object.keys()</code>éå†ï¼Œä½†æ˜¯åœ¨ä¸åŒæµè§ˆå™¨çš„æƒ…å†µä¸‹ï¼Œéå†çš„ç»“æœä¸å¯èƒ½å®Œå…¨ä¸€è‡´ã€‚<br>å¯ä»¥å°†å¯¹è±¡æ”¾åœ¨æ•°ç»„ä¸­ï¼Œéå†æ•°ç»„å¯ä»¥ä¿è¯éå†é¡ºåºã€‚</p>
<h3 id="21ã€vueæƒ³æ‰©å±•ç»„ä»¶æ—¶è¯¥æ€ä¹ˆåšï¼Ÿ"><a href="#21ã€vueæƒ³æ‰©å±•ç»„ä»¶æ—¶è¯¥æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="21ã€vueæƒ³æ‰©å±•ç»„ä»¶æ—¶è¯¥æ€ä¹ˆåšï¼Ÿ"></a>21ã€vueæƒ³æ‰©å±•ç»„ä»¶æ—¶è¯¥æ€ä¹ˆåšï¼Ÿ</h3><ul>
<li>Vue.mixinæ··å…¥</li>
<li>Vue.extend</li>
<li>solt</li>
</ul>
<h3 id="22ã€vueä¸­-attrs-å’Œ-listenersçš„ä½¿ç”¨åœºæ™¯"><a href="#22ã€vueä¸­-attrs-å’Œ-listenersçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="22ã€vueä¸­$attrs å’Œ $listenersçš„ä½¿ç”¨åœºæ™¯"></a>22ã€vueä¸­$attrs å’Œ $listenersçš„ä½¿ç”¨åœºæ™¯</h3><p>ç»„ä»¶ä¼ å€¼çš„æ—¶å€™ä¼šç”¨åˆ° çˆ·çˆ·åœ¨çˆ¶äº²ç»„ä»¶ä¼ é€’å€¼ï¼Œçˆ¶äº²ç»„ä»¶ä¼šé€šè¿‡$attrsè·å–åˆ°ä¸åœ¨çˆ¶äº²propsé‡Œé¢çš„æ‰€æœ‰å±æ€§ï¼Œçˆ¶äº²ç»„ä»¶é€šè¿‡åœ¨å­™å­ç»„ä»¶ä¸Šç»‘å®š$attrs å’Œ $listeners ä½¿å­™ç»„ä»¶è·å–çˆ·çˆ·ä¼ é€’çš„å€¼å¹¶ä¸”å¯ä»¥è°ƒç”¨åœ¨çˆ·çˆ·é‚£é‡Œå®šä¹‰çš„æ–¹æ³•<br>Aç»„ä»¶ï¼šçˆ·çˆ·çº§ç»„ä»¶</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>B <span class="token punctuation">:</span>a<span class="token operator">=</span><span class="token string">"a"</span> <span class="token punctuation">:</span>b<span class="token operator">=</span><span class="token string">"b"</span> <span class="token punctuation">:</span>c<span class="token operator">=</span><span class="token string">"c"</span> v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">"$attrs"</span> @test<span class="token operator">=</span><span class="token string">"test"</span> @test2<span class="token operator">=</span><span class="token string">"test2"</span> v<span class="token operator">-</span>on<span class="token operator">=</span><span class="token string">"$listeners"</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">import</span> B <span class="token keyword">from</span> <span class="token string">'./B.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">"A"</span><span class="token punctuation">,</span>
    components<span class="token punctuation">:</span><span class="token punctuation">{</span>
        B
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>
            b<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span>
            c<span class="token punctuation">:</span><span class="token number">3</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<p>Bç»„ä»¶ï¼šçˆ¶äº²çº§ç»„ä»¶</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>p<span class="token operator">></span>attrs<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> $attrs <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token string">"background:#ccc;"</span>  @click<span class="token operator">=</span><span class="token string">"$listeners.test"</span><span class="token operator">></span>props<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> a <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&lt;</span>C v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">"$attrs"</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">import</span> C <span class="token keyword">from</span> <span class="token string">'./C.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    components<span class="token punctuation">:</span><span class="token punctuation">{</span>
        C
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span><span class="token string">"B"</span><span class="token punctuation">,</span>
    props<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<p>Cï¼šå­™å­çº§ç»„ä»¶</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>p<span class="token operator">></span>C <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>$attrs <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">"C"</span><span class="token punctuation">,</span>
    props<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    inheritAttrs<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="23ã€vueä¸ºä»€ä¹ˆè¦æ±‚ç»„ä»¶æ¨¡ç‰ˆåªèƒ½æœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹"><a href="#23ã€vueä¸ºä»€ä¹ˆè¦æ±‚ç»„ä»¶æ¨¡ç‰ˆåªèƒ½æœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹" class="headerlink" title="23ã€vueä¸ºä»€ä¹ˆè¦æ±‚ç»„ä»¶æ¨¡ç‰ˆåªèƒ½æœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹"></a>23ã€vueä¸ºä»€ä¹ˆè¦æ±‚ç»„ä»¶æ¨¡ç‰ˆåªèƒ½æœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹</h3><p>å› ä¸ºvueç»„ä»¶æœ€ç»ˆæ˜¯è¦è¢«å„ç§loaderæ‰“åŒ…è§£æçš„ï¼Œè€Œæˆ‘ä»¬å¿…é¡»ä¸ºloaderæŒ‡å®šä¸€ä¸ªå…¥å£ã€‚è€Œä¸”ï¼Œæ¨¡ç‰ˆæœ€ç»ˆæ˜¯ä¼šè¢«ç¼–è¯‘æˆvdomçš„ï¼Œæ‰€ä»¥å¿…é¡»æœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹æ¥é€’å½’éå†å…¶å­èŠ‚ç‚¹ï¼Œæ¸²æŸ“æˆä¸€ä¸ªâ€œæ ‘â€ã€‚</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Code/05" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/05/Code/05/"
    >é˜²æŠ–èŠ‚æµ</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/05/Code/05/" class="article-date">
  <time datetime="2020-03-05T14:30:00.000Z" itemprop="datePublished">2020-03-05</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="é˜²æŠ–èŠ‚æµ"><a href="#é˜²æŠ–èŠ‚æµ" class="headerlink" title="é˜²æŠ–èŠ‚æµ"></a>é˜²æŠ–èŠ‚æµ</h1><p>åœ¨å‰ç«¯å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šéœ€è¦ç»‘å®šä¸€äº›æŒç»­è§¦å‘çš„äº‹ä»¶ï¼Œå¦‚ resizeã€scrollã€mousemove ç­‰ç­‰ï¼Œä½†æœ‰äº›æ—¶å€™æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœ¨äº‹ä»¶æŒç»­è§¦å‘çš„è¿‡ç¨‹ä¸­é‚£ä¹ˆé¢‘ç¹åœ°å»æ‰§è¡Œå‡½æ•°ã€‚<br>é€šå¸¸è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬æ€ä¹ˆå»è§£å†³çš„å‘¢ï¼Ÿä¸€èˆ¬æ¥è®²ï¼Œé˜²æŠ–å’ŒèŠ‚æµæ˜¯æ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 id="é˜²æŠ–-debounce"><a href="#é˜²æŠ–-debounce" class="headerlink" title="é˜²æŠ–(debounce)"></a>é˜²æŠ–(debounce)</h3><p>é˜²æŠ–å°±æ˜¯åœ¨è§„å®šæ—¶é—´å†…å‡½æ•°åªä¼šè§¦å‘ä¸€æ¬¡ï¼Œå¦‚æœå†æ¬¡è§¦å‘ï¼Œä¼šé‡æ–°è®¡ç®—æ—¶é—´ã€‚</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/*** 
 * @description é˜²æŠ–å‡½æ•°
 * @param func å‡½æ•°
 * @param wait å»¶è¿Ÿæ‰§è¡Œæ¯«ç§’æ•°
 * @param immediate æ˜¯å¦ç«‹å³æ‰§è¡Œ
 * */</span>
<span class="token keyword">function</span> <span class="token function">debouncing</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> wait <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> immediate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//ç¬¬ä¸€ç§ï¼šnç§’ä¹‹åæ‰§è¡Œï¼Œnç§’å†…å†æ¬¡è§¦å‘ä¼šé‡æ–°è®¡ç®—æ—¶é—´</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//ç¡®ä¿thisæŒ‡å‘ä¸ä¼šæ”¹å˜</span>
                func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//ç¬¬äºŒç§ï¼šç«‹å³æ‰§è¡Œï¼Œnç§’å†…ä¸å¯å†æ¬¡è§¦å‘</span>
            <span class="token keyword">let</span> callnew <span class="token operator">=</span> <span class="token operator">!</span>timer<span class="token punctuation">;</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
                timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'kaka'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>callnew<span class="token punctuation">)</span> func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'debluncing'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> f1 <span class="token operator">=</span> <span class="token function">debouncing</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="èŠ‚æµ-throttle"><a href="#èŠ‚æµ-throttle" class="headerlink" title="èŠ‚æµ(throttle)"></a>èŠ‚æµ(throttle)</h3><p>èŠ‚æµæŒ‡çš„æ˜¯å‡½æ•°ä¸€å®šæ—¶é—´å†…ä¸ä¼šå†æ¬¡æ‰§è¡Œï¼Œç”¨ä½œç¨€é‡Šå‡½æ•°çš„æ‰§è¡Œé¢‘ç‡ã€‚</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/**
 * @description èŠ‚æµå‡½æ•°
 * @param func å‡½æ•°
 * @param wait å»¶è¿Ÿæ‰§è¡Œæ¯«ç§’æ•°
 * @param type 1ï¼šæ—¶é—´æˆ³ç‰ˆæœ¬ 2: å®šæ—¶å™¨ç‰ˆæœ¬
 *  */</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> wait <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
                    timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                    func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> previous <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
            <span class="token keyword">let</span> newDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>newDate <span class="token operator">-</span> previous <span class="token operator">></span> wait<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                previous <span class="token operator">=</span> newDate<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'throttle'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> f1 <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Code/06" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/05/Code/06/"
    >æŸ¯é‡ŒåŒ–</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/05/Code/06/" class="article-date">
  <time datetime="2020-03-05T14:30:00.000Z" itemprop="datePublished">2020-03-05</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="æŸ¯é‡ŒåŒ–"><a href="#æŸ¯é‡ŒåŒ–" class="headerlink" title="æŸ¯é‡ŒåŒ–"></a>æŸ¯é‡ŒåŒ–</h1><h3 id="æŸ¯é‡ŒåŒ–-1"><a href="#æŸ¯é‡ŒåŒ–-1" class="headerlink" title="æŸ¯é‡ŒåŒ–"></a>æŸ¯é‡ŒåŒ–</h3><h4 id="ä»€ä¹ˆæ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Ÿ</h4><p>å‡½æ•°æŸ¯é‡ŒåŒ–å°±æ˜¯ä½¿å‡½æ•°å…ˆæ¥å—ä¸€éƒ¨åˆ†å‚æ•°ï¼Œä½¿ç”¨é—­åŒ…ç¼“å­˜å·²æ¥å—çš„å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨æ–°çš„å‡½æ•°ä¸­æ¥å—å‰©ä½™å‚æ•°ã€‚å¸¸å¸¸ç”¨ä½œå®ç°å‚æ•°å¤ç”¨ã€å°½é‡ä½¿ä»£ç å‡½æ•°åŒ–ï¼Œå¢åŠ å¯è¯»æ€§ã€‚</p>
<h4 id="å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–"></a>å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–</h4><p>å…ˆç»™ä¸€ä¸ªå¸¸è§çš„é¢è¯•é¢˜ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//1</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//3</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//6</span></code></pre>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/**
 * @description curry å‡½æ•°æŸ¯é‡ŒåŒ–
 * @param func å‡½æ•°
 * @return å‡½æ•°
 */</span>
<span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> outerargs <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">const</span> innerargs <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    outerargs <span class="token operator">=</span> outerargs<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>innerargs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> inner<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  inner<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>outerargs<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> inner<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="åæŸ¯é‡ŒåŒ–"><a href="#åæŸ¯é‡ŒåŒ–" class="headerlink" title="åæŸ¯é‡ŒåŒ–"></a>åæŸ¯é‡ŒåŒ–</h3>
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Code/04" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/01/Code/04/"
    >å®ç°callã€applyå’Œbind</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/01/Code/04/" class="article-date">
  <time datetime="2020-03-01T12:30:00.000Z" itemprop="datePublished">2020-03-01</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="å®ç°callã€applyå’Œbind"><a href="#å®ç°callã€applyå’Œbind" class="headerlink" title="å®ç°callã€applyå’Œbind"></a>å®ç°callã€applyå’Œbind</h1><h3 id="ä¸‰è€…çš„å¼‚åŒ"><a href="#ä¸‰è€…çš„å¼‚åŒ" class="headerlink" title="ä¸‰è€…çš„å¼‚åŒ"></a>ä¸‰è€…çš„å¼‚åŒ</h3><ol>
<li>éƒ½å¯ä»¥æ”¹å˜thisæŒ‡å‘ã€‚</li>
<li>æ¥å—çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ”¹å˜åçš„thisæŒ‡å‘ã€‚</li>
<li>callã€bindæ¥å—çš„å‚æ•°ï¼Œä»¥é˜Ÿåˆ—çš„å½¢å¼ã€‚applyæ¥å—æ•°ç»„å½¢å¼çš„ä¼ å‚ã€‚</li>
<li>callå’Œapplyå¯ä»¥å¤šæ¬¡æ”¹å˜thisæŒ‡å‘ã€‚è€Œbindåªå¯ä½¿ç”¨ä¸€æ¬¡ï¼Œå†æ¬¡ä½¿ç”¨æ— æ•ˆï¼Œç»‘å®šçš„ä»ç„¶æ˜¯ç¬¬ä¸€æ¬¡çš„å¯¹è±¡ã€‚</li>
<li>callå’Œapplyè°ƒç”¨æ—¶ï¼Œä¼šç›´æ¥æ‰§è¡Œfunctionï¼Œè€Œbindä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œä¸”å‡½æ•°åä¸ºâ€bound xxxâ€ ã€‚</li>
</ol>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>åœ¨JavaScriptä¸­thisçš„æŒ‡å‘é—®é¢˜ä¸­æåˆ°ï¼Œä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨ã€‚å‡½æ•°è¿˜å¯ä»¥ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ï¼Œè¿™æ—¶thiså°±æŒ‡è¿™ä¸ªä¸Šçº§å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶è¯´çš„ï¼Œè°è°ƒç”¨ï¼Œthiså°±æŒ‡å‘è°ã€‚</p>
<p>å®ç°æ–¹æ³•ï¼šåœ¨ä¼ å…¥çš„å‚æ•°ä¸­ä¼ å…¥ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œæœ€ååˆ é™¤è¯¥æ–¹æ³•ï¼ˆä¸ºäº†ä¿æŒå¯¹è±¡çš„å‰åä¸€è‡´æ€§ï¼‰ã€‚</p>
<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="call"><a href="#call" class="headerlink" title="call"></a>call</h4><pre class=" language-javascript"><code class="language-javascript">Function<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>newCall <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token operator">...</span>rest<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//è·å–æ„é€ å‡½æ•° å³this</span>
    <span class="token keyword">const</span> constructor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">//è·å–å¯¹è±¡ å³æ–°çš„thisæŒ‡å‘</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">{</span>
      context <span class="token operator">=</span> context <span class="token operator">||</span> window<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      context <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">cerate</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">//ä½¿ç”¨Symbol()ç¡®ä¿ä¸ä¼šè¦†ç›–å¯¹è±¡objçš„åŸæœ‰çš„å±æ€§</span>
  <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> constructor<span class="token punctuation">;</span>
  context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">//åˆ é™¤æ·»åŠ çš„å±æ€§</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token function">getMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//undefined</span>
fn<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//10</span></code></pre>
<h4 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h4><pre class=" language-javascript"><code class="language-javascript">Function<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>newApply <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>rest<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//è·å–æ„é€ å‡½æ•° å³this</span>
    <span class="token keyword">const</span> constructor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">//è·å–å¯¹è±¡ å³æ–°çš„thisæŒ‡å‘</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">{</span>
      context <span class="token operator">=</span> context <span class="token operator">||</span> window<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      context <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">cerate</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">//ä½¿ç”¨Symbol()ç¡®ä¿ä¸ä¼šè¦†ç›–å¯¹è±¡objçš„åŸæœ‰çš„å±æ€§</span>
  <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> constructor<span class="token punctuation">;</span>
  context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">//åˆ é™¤æ·»åŠ çš„å±æ€§</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token function">getMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//undefined</span>
fn<span class="token punctuation">.</span><span class="token function">newApply</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//10</span></code></pre>
<h4 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h4><pre class=" language-javascript"><code class="language-javascript">Function<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>newBind <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token operator">...</span>params<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>
    <span class="token keyword">const</span> Constructor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token operator">...</span>rest<span class="token punctuation">)</span><span class="token punctuation">{</span>
        Constructor<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">...</span>params<span class="token punctuation">,</span><span class="token operator">...</span>rest<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span><span class="token number">100</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> f1 <span class="token operator">=</span> fn<span class="token punctuation">.</span><span class="token function">newBind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//10</span></code></pre>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Code/03" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/27/Code/03/"
    >è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/27/Code/03/" class="article-date">
  <time datetime="2020-02-27T12:30:00.000Z" itemprop="datePublished">2020-02-27</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼</h1><h3 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h3><p>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡è§ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæ‰€ä»¥ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½å°†æ¥æ”¶åˆ°é€šçŸ¥ï¼Œå¹¶ä½œå‡ºæ›´æ–°ã€‚</p>
<h3 id="å‘å¸ƒè®¢é˜…æ¨¡å¼"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å¼" class="headerlink" title="å‘å¸ƒè®¢é˜…æ¨¡å¼"></a>å‘å¸ƒè®¢é˜…æ¨¡å¼</h3><p>å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œä¸ªäººç†è§£ä¸ºæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§ç‰¹ä¾‹ã€‚æœ€åˆçš„æ—¶å€™ï¼Œè®¢é˜…ç›®æ ‡å’Œè®¢é˜…å¯¹è±¡æ˜¯è”ç³»åœ¨ä¸€èµ·çš„ï¼Œå½“è®¢é˜…ç›®æ ‡å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œä¼šé€ä¸ªé€šçŸ¥è®¢é˜…è€…ã€‚<br>åœ¨ç°åœ¨çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œå‘å¸ƒè€…ä¸åœ¨ç›´æ¥å°†æ¶ˆæ¯å‘é€ç»™è®¢é˜…è€…ï¼Œè€Œæ˜¯æ˜¯é€šè¿‡ä¸€ä¸ªç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œä¹Ÿç§°ä¸ºæ¶ˆæ¯ä¸­å¿ƒæˆ–è€…è°ƒåº¦ä¸­å¿ƒï¼Œç”±å®ƒæ¥ç»´æŒç€å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„é€šè®¯ï¼Œå‘å¸ƒæ–¹å’Œè®¢é˜…æ–¹äº’ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ã€‚</p>
<h3 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1580894616701-bd4dca45-dd7c-450c-a2d5-d7c139c053fc.png#align=left&display=inline&height=348&name=image.png&originHeight=372&originWidth=554&size=149810&status=done&style=none&width=519" alt="image.png"></p>
<h4 id="è§‚å¯Ÿè€…æ¨¡å¼-1"><a href="#è§‚å¯Ÿè€…æ¨¡å¼-1" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h4><p>è®¢é˜…è€…ç›´æ¥è®¢é˜…å‘å¸ƒè€…çš„äº‹ä»¶ï¼Œå½“å‘å¸ƒè€…çš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œä¼šç›´æ¥è§¦å‘è®¢é˜…è€…çš„å›è°ƒäº‹ä»¶ã€‚</p>
<h4 id="å‘å¸ƒè®¢é˜…æ¨¡å¼-1"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å¼-1" class="headerlink" title="å‘å¸ƒè®¢é˜…æ¨¡å¼"></a>å‘å¸ƒè®¢é˜…æ¨¡å¼</h4><p>è®¢é˜…è€…é¦–å…ˆå°†å³å°†è®¢é˜…çš„äº‹ä»¶æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒï¼Œå½“å‘å¸ƒè€…å‘å¸ƒè¯¥äº‹ä»¶åˆ°è°ƒåº¦ä¸­å¿ƒï¼Œä¹Ÿå°±æ˜¯è¯¥äº‹ä»¶è§¦å‘æ—¶ï¼Œç”±è°ƒåº¦ä¸­å¿ƒç»Ÿä¸€è°ƒåº¦è®¢é˜…è€…æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒçš„å¤„ç†ä»£ç ã€‚</p>
<h3 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h3><h4 id="è§‚å¯Ÿè€…æ¨¡å¼-2"><a href="#è§‚å¯Ÿè€…æ¨¡å¼-2" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Hunter</span><span class="token punctuation">(</span>level<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//å‘å¸ƒ</span>
Hunter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>publish <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">+</span> <span class="token string">'çŒäºº,'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'å¯»æ±‚å¸®åŠ©!!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token function">item</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//è®¢é˜…</span>
Hunter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>subscribe <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>fn<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'è®¢é˜…äº†'</span> <span class="token operator">+</span> target<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> kaka <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hunter</span><span class="token punctuation">(</span><span class="token string">'é»„é‡‘'</span><span class="token punctuation">,</span><span class="token string">'kaka'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> hudie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hunter</span><span class="token punctuation">(</span><span class="token string">'é’»çŸ³'</span><span class="token punctuation">,</span><span class="token string">'hudie'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> dida <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hunter</span><span class="token punctuation">(</span><span class="token string">'ç‹è€…'</span><span class="token punctuation">,</span><span class="token string">'dida'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

hudie<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>kaka<span class="token punctuation">,</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è§‚å¯Ÿåˆ°kakaçš„åŠ¨æ€,å‘æ‚¨æ±‡æŠ¥!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

kaka<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span></code></pre>
<p>è¿™ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰æ¥ä¸€ä¸ªå‡½æ•°Hunterï¼Œåœ¨å…¶åŸå‹ä¸Šæ³¨å†Œäº†å‘å¸ƒå’Œè®¢é˜…çš„å‡½æ•°ã€‚åœ¨è®¢é˜…å‡½æ•°ä¸­ï¼Œè®¾ç½®äº†ä¸¤ä¸ªå‚æ•°ï¼Œtargetå¯¹è±¡å’Œå›è°ƒå‡½æ•°fnï¼Œç„¶ååœ¨å‘å¸ƒè€…çš„æ‰§è¡Œé˜Ÿåˆ—ä¸­å°†å›è°ƒå‡½æ•°æ³¨å…¥è¿›å»ã€‚åœ¨å‘å¸ƒå‡½æ•°ä¸­ï¼Œä¸€æ—¦å‘å¸ƒè€…æ”¹å˜äº†çŠ¶æ€ï¼Œåˆ™ä¼šè§¦å‘å…¶æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å›è°ƒå‡½æ•°ã€‚</p>
<h4 id="å‘å¸ƒè®¢é˜…æ¨¡å¼-2"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å¼-2" class="headerlink" title="å‘å¸ƒè®¢é˜…æ¨¡å¼"></a>å‘å¸ƒè®¢é˜…æ¨¡å¼</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> HunterUnion <span class="token operator">=</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span><span class="token string">'hunter'</span><span class="token punctuation">,</span>
    topics<span class="token punctuation">:</span>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    publish<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> 
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            <span class="token function">item</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    subscribe<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span>fn<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">Hunter</span><span class="token punctuation">(</span>level<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//å‘å¸ƒ</span>
Hunter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>publish <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">+</span> <span class="token string">'çŒäºº,'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'å‘å¸ƒtigerä»»åŠ¡!!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    HunterUnion<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span>money<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//è®¢é˜…</span>
Hunter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>subscribe <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span>fn<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'è®¢é˜…äº†'</span> <span class="token operator">+</span> topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    HunterUnion<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span>fn<span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">// target.list.push(fn);</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> kaka <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hunter</span><span class="token punctuation">(</span><span class="token string">'é»„é‡‘'</span><span class="token punctuation">,</span><span class="token string">'kaka'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> hudie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hunter</span><span class="token punctuation">(</span><span class="token string">'é’»çŸ³'</span><span class="token punctuation">,</span><span class="token string">'hudie'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> dida <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hunter</span><span class="token punctuation">(</span><span class="token string">'ç‹è€…'</span><span class="token punctuation">,</span><span class="token string">'dida'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

hudie<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'tiger'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hudie,'</span> <span class="token operator">+</span> <span class="token string">'è§‚å¯Ÿåˆ°tigerçš„åŠ¨æ€,å‘æ‚¨æ±‡æŠ¥!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

dida<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'tiger'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dida,'</span> <span class="token operator">+</span> <span class="token string">'è§‚å¯Ÿåˆ°tigerçš„åŠ¨æ€,å‘æ‚¨æ±‡æŠ¥!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

kaka<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'tiger'</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span></code></pre>
<p>åœ¨ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒHunterUnionï¼Œæ‰€æœ‰çš„å‘å¸ƒè®¢é˜…çš„åŠ¨ä½œï¼Œéƒ½åœ¨å…¶å†…éƒ¨å®Œæˆã€‚å…¶ä»–å¤§è‡´å’Œä¸Šé¢çš„è§‚å¯Ÿè€…å·®ä¸å¤šã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å‘å¸ƒè®¢é˜…æ¨¡å¼æœ‰ä¸ªäº‹ä»¶è°ƒåº¦ä¸­å¿ƒã€‚<br>è§‚å¯Ÿè€…æ¨¡å¼ç”±å…·ä½“ç›®æ ‡è°ƒåº¦ï¼Œæ¯ä¸ªè¢«è®¢é˜…çš„ç›®æ ‡é‡Œé¢éƒ½éœ€è¦æœ‰å¯¹è§‚å¯Ÿè€…çš„å¤„ç†ï¼Œè¿™ç§å¤„ç†æ–¹å¼æ¯”è¾ƒç›´æ¥ç²—æš´ï¼Œä½†æ˜¯ä¼šé€ æˆä»£ç çš„å†—ä½™ã€‚<br>è€Œå‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ç»Ÿä¸€ç”±è°ƒåº¦ä¸­å¿ƒè¿›è¡Œå¤„ç†ï¼Œè®¢é˜…è€…å’Œå‘å¸ƒè€…äº’ä¸å¹²æ‰°ï¼Œæ¶ˆé™¤äº†å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„ä¾èµ–ã€‚è¿™æ ·ä¸€æ–¹é¢å®ç°äº†è§£è€¦ï¼Œè¿˜æœ‰å°±æ˜¯å¯ä»¥å®ç°æ›´ç»†ç²’åº¦çš„ä¸€äº›æ§åˆ¶ã€‚æ¯”å¦‚å‘å¸ƒè€…å‘å¸ƒäº†å¾ˆå¤šæ¶ˆæ¯ï¼Œä½†æ˜¯ä¸æƒ³æ‰€æœ‰çš„è®¢é˜…è€…éƒ½æ¥æ”¶åˆ°ï¼Œå°±å¯ä»¥åœ¨è°ƒåº¦ä¸­å¿ƒåšä¸€äº›å¤„ç†ï¼Œç±»ä¼¼äºæƒé™æ§åˆ¶ä¹‹ç±»çš„ã€‚è¿˜å¯ä»¥åšä¸€äº›èŠ‚æµæ“ä½œã€‚</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Code/02" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/25/Code/02/"
    >æ‰‹å†™JSON.stringify</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/25/Code/02/" class="article-date">
  <time datetime="2020-02-25T03:30:00.000Z" itemprop="datePublished">2020-02-25</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="æ‰‹å†™JSON-stringify"><a href="#æ‰‹å†™JSON-stringify" class="headerlink" title="æ‰‹å†™JSON.stringify"></a>æ‰‹å†™JSON.stringify</h1><p>æ ¹æ®<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" target="_blank" rel="noopener">JSON.stringify()</a>çš„å®šä¹‰ï¼Œå¯å¾—çŸ¥è¯¥æ–¹æ³•çš„å®ç°è¿‡ç¨‹ï¼š</p>
<ol>
<li>å¦‚æœå¯¹è±¡æœ‰è‡ªå®šä¹‰çš„toJSON()æ–¹æ³•ï¼Œåˆ™ä½¿ç”¨è‡ªå®šä¹‰æ–¹æ³•ï¼›</li>
<li>å¸ƒå°”ã€æ•°å­—ã€å­—ç¬¦ä¸²è¢«è½¬æ¢ä¸ºå¯¹åº”çš„åŸå§‹å€¼ï¼›</li>
<li>undefined function symbolè½¬æ¢æ—¶è¢«å¿½ç•¥ï¼Œå¦‚æœå‡ºç°åœ¨æ•°ç»„ä¸­ï¼Œåˆ™è¿”å›nullã€‚</li>
</ol>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">JSONString</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//è·å–ä¼ å…¥çš„å€¼çš„æ•°æ®ç±»å‹</span>
    <span class="token keyword">let</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex">/(function|undefined|symbol)/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'"'</span> <span class="token operator">+</span> obj <span class="token operator">+</span> <span class="token string">'"'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//æ˜¯å¦æ˜¯æ•°ç»„</span>
        <span class="token keyword">let</span> isArray <span class="token operator">=</span> obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array<span class="token punctuation">;</span>
        loop<span class="token punctuation">:</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> value <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> typeValue <span class="token operator">=</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>typeValue <span class="token operator">===</span> <span class="token string">'[object Symbol]'</span> <span class="token operator">||</span> typeValue <span class="token operator">===</span> <span class="token string">'[object Undefined]'</span> <span class="token operator">||</span> typeValue <span class="token operator">===</span> <span class="token string">'[object Function]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//symbol ç±»å‹ </span>
                <span class="token keyword">continue</span> loop<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>typeValue <span class="token operator">===</span> <span class="token string">'[object Object]'</span> <span class="token operator">||</span> typeValue <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                value <span class="token operator">=</span> <span class="token function">JSONString</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">let</span> v <span class="token operator">=</span> isArray <span class="token operator">?</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">String</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">":</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">String</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
            arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> str <span class="token operator">=</span> isArray <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token string">`"[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]"`</span></span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token string">`{</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> str<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    c<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    d<span class="token punctuation">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    f<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    g<span class="token punctuation">:</span> undefined
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">JSONString</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Code/01" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/25/Code/01/"
    >æ‰‹å†™newæ“ä½œç¬¦</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/25/Code/01/" class="article-date">
  <time datetime="2020-02-25T02:30:00.000Z" itemprop="datePublished">2020-02-25</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="æ‰‹å†™newæ“ä½œç¬¦"><a href="#æ‰‹å†™newæ“ä½œç¬¦" class="headerlink" title="æ‰‹å†™newæ“ä½œç¬¦"></a>æ‰‹å†™newæ“ä½œç¬¦</h1><h4 id="newæ“ä½œç¬¦åšäº†ä»€ä¹ˆï¼Ÿ"><a href="#newæ“ä½œç¬¦åšäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="newæ“ä½œç¬¦åšäº†ä»€ä¹ˆï¼Ÿ"></a>newæ“ä½œç¬¦åšäº†ä»€ä¹ˆï¼Ÿ</h4><ol>
<li>æ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼›</li>
<li>å°†ç»§æ‰¿æ„é€ å‡½æ•°çš„åŸå‹ï¼›</li>
<li>æ”¹å˜æ„é€ å‡½æ•°çš„thisæŒ‡å‘ï¼›</li>
<li>è¿”å›å¯¹è±¡ï¼ˆå¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ç±»å‹ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼‰ã€‚</li>
</ol>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//æ‰‹å†™newæ“ä½œç¬¦</span>
Function<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//è·å–å‚æ•°</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> Array<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//è·å–æ„é€ å‡½æ•° å³this</span>
    <span class="token keyword">let</span> Controuctor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//æ–°å»ºå¯¹è±¡</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> Controuctor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//æ”¹å˜æ„é€ å‡½æ•°thisæŒ‡å‘</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> Controuctor<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> Array<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>getName <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> f <span class="token operator">=</span> fn<span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

f<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Interview/01" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/20/Interview/01/"
    >æµè§ˆå™¨è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆ
  <i class="article-topping">ç½®é¡¶</i>
</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/20/Interview/01/" class="article-date">
  <time datetime="2020-02-20T02:00:00.000Z" itemprop="datePublished">2020-02-20</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹"><a href="#ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹" class="headerlink" title="ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹"></a>ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹</h1><h2 id="ä¸»å¹²æµç¨‹"><a href="#ä¸»å¹²æµç¨‹" class="headerlink" title="ä¸»å¹²æµç¨‹"></a>ä¸»å¹²æµç¨‹</h2><ol>
<li><strong>æµè§ˆå™¨æ¥æ”¶urlï¼Œå¼€å¯ä¸€ä¸ªæ–°çš„ç½‘ç»œè¯·æ±‚çº¿ç¨‹ï¼ˆè¿™éƒ¨åˆ†æ¶‰åŠåˆ°æµè§ˆå™¨è¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„å…³ç³»ï¼‰ã€‚</strong></li>
<li><strong>ä»å¼€å¯ç½‘ç»œè¯·æ±‚çº¿ç¨‹åˆ°å‘èµ·ä¸€ä¸ªhttpè¯·æ±‚ï¼ˆè¿™éƒ¨åˆ†æ¶‰åŠåˆ°dnsè§£æã€äº”å±‚å› ç‰¹ç½‘åè®®æ ˆã€tcp/ipåè®®ç­‰ï¼‰ã€‚</strong></li>
<li><strong>ä»æœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚åˆ°åå°æ”¶åˆ°è¯·æ±‚ï¼ˆè¿™éƒ¨åˆ†æ¶‰åŠåˆ°è´Ÿè½½å‡è¡¡ã€å®‰å…¨æ‹¦æˆªã€åå°ç¨‹åºå†…éƒ¨å¤„ç†ç­‰çŸ¥è¯†ï¼‰ã€‚</strong></li>
<li><strong>æœåŠ¡ç«¯å’Œæµè§ˆå™¨ä¹‹é—´çš„äº¤äº’ï¼ˆå¦‚httpè¯·æ±‚å¤´ã€çŠ¶æ€ç ã€è¯·æ±‚æŠ¥æ–‡ã€cookieã€sessionç­‰ï¼‰ã€‚</strong></li>
<li><strong>httpç¼“å­˜ï¼ˆåŒ…æ‹¬å¼ºç¼“å­˜ã€åå•†ç¼“å­˜ç­‰ï¼‰ã€‚</strong></li>
<li><strong>CSSçš„å¯è§†åŒ–æ¨¡å‹è§£æï¼ˆå…ƒç´ çš„æ¸²æŸ“è§„åˆ™ã€åŒ…å«å—ã€æ§åˆ¶å—ã€BFCã€IFCç­‰ï¼‰ã€‚</strong></li>
<li><strong>JSçš„è§£æè¿‡ç¨‹ï¼ˆJSçš„è§£é‡Šè¿‡ç¨‹ã€é¢„å¤„ç†è¿‡ç¨‹ã€æ‰§è¡Œé˜¶æ®µçš„GOã€VOã€AOã€ä½œç”¨åŸŸå’Œä½œç”¨åŸŸè¿ç­‰ï¼‰ã€‚</strong></li>
<li><strong>å…¶å®ƒï¼ˆå¦‚å®‰å…¨ç­–ç•¥ã€è·¨åŸŸç­‰ï¼‰</strong></li>
</ol>
<h2 id="ä»æµè§ˆå™¨æ¥æ”¶urlåˆ°å¼€å¯ç½‘ç»œè¯·æ±‚çº¿ç¨‹"><a href="#ä»æµè§ˆå™¨æ¥æ”¶urlåˆ°å¼€å¯ç½‘ç»œè¯·æ±‚çº¿ç¨‹" class="headerlink" title="ä»æµè§ˆå™¨æ¥æ”¶urlåˆ°å¼€å¯ç½‘ç»œè¯·æ±‚çº¿ç¨‹"></a>ä»æµè§ˆå™¨æ¥æ”¶urlåˆ°å¼€å¯ç½‘ç»œè¯·æ±‚çº¿ç¨‹</h2><h3 id="å¤šè¿›ç¨‹çš„æµè§ˆå™¨"><a href="#å¤šè¿›ç¨‹çš„æµè§ˆå™¨" class="headerlink" title="å¤šè¿›ç¨‹çš„æµè§ˆå™¨"></a>å¤šè¿›ç¨‹çš„æµè§ˆå™¨</h3><p>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ï¼Œæœ‰ä¸€ä¸ªä¸»æ§è¿›ç¨‹ï¼Œæ¯ä¸€ä¸ªtabé¡µéƒ½ä¼šæ–°å¼€ä¸€ä¸ªè¿›ç¨‹ã€‚<br>è¿™äº›è¿›ç¨‹å¯èƒ½åŒ…æ‹¬ï¼šä¸»æ§è¿›ç¨‹ã€æ’ä»¶è¿›ç¨‹ã€GPUã€tabé¡µç­‰ã€‚</p>
<ul>
<li>Browserè¿›ç¨‹ï¼šæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼Œè´Ÿè´£è°ƒæ§ï¼Œåªæœ‰ä¸€ä¸ªã€‚</li>
<li>GPUè¿›ç¨‹ï¼šè´Ÿè´£3Dæ¸²æŸ“ï¼Œæœ€å¤šåªæœ‰ä¸€ä¸ªã€‚</li>
<li>ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼šè´Ÿè´£ç®¡ç†ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œæ¯ä¸€ä¸ªæ’ä»¶éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„è¿›ç¨‹ï¼Œä»…å½“è¯¥æ’ä»¶åˆ›å»ºæ—¶åˆ›å»ºã€‚</li>
<li>æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰ï¼šé»˜è®¤æ¯ä¸ªtabé¡µä¸€ä¸ªè¿›ç¨‹ï¼Œäº’ä¸å¹²æ‰°ï¼Œè´Ÿè´£æ§åˆ¶é¡µé¢æ¸²æŸ“ã€è„šæœ¬æ‰§è¡Œã€äº‹ä»¶å¤„ç†ç­‰ã€‚</li>
</ul>
<h3 id="æµè§ˆå™¨å†…æ ¸çš„äº”å¤§çº¿ç¨‹"><a href="#æµè§ˆå™¨å†…æ ¸çš„äº”å¤§çº¿ç¨‹" class="headerlink" title="æµè§ˆå™¨å†…æ ¸çš„äº”å¤§çº¿ç¨‹"></a>æµè§ˆå™¨å†…æ ¸çš„äº”å¤§çº¿ç¨‹</h3><p>æ¯ä¸€ä¸ªtabé¡µéƒ½å¯ä»¥çœ‹ä½œä¸€ä¸ªæµè§ˆå™¨å†…æ ¸è¿›ç¨‹ï¼Œè€Œè¯¥è¿›ç¨‹åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼š</p>
<ul>
<li>GUIçº¿ç¨‹ï¼šè´Ÿè´£é¡µé¢æ¸²æŸ“ã€é‡ç»˜ã€CSSè§£æç­‰ã€‚</li>
<li>JSå¼•æ“çº¿ç¨‹ï¼šè´Ÿè´£ç¨‹åºè„šæœ¬çš„è§£æå’Œæ‰§è¡Œã€‚</li>
<li>äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šè´Ÿè´£ç®¡ç†äº‹ä»¶å¾ªç¯ï¼Œç®¡ç†äº‹ä»¶ä»»åŠ¡é˜Ÿåˆ—ã€‚</li>
<li>å®šæ—¶è§¦å‘å™¨çº¿ç¨‹ï¼šsetTImeout å’Œ setInterval æ‰€åœ¨çš„çº¿ç¨‹ã€‚å®šæ—¶å™¨çš„è®¡æ—¶ä¸æ˜¯æœ‰JSå¼•æ“æ§åˆ¶ï¼Œè€Œæ˜¯ç”±è¯¥çº¿ç¨‹æ§åˆ¶ã€‚</li>
<li>httpè¯·æ±‚çº¿ç¨‹ï¼šè´Ÿè´£httpè¯·æ±‚ã€‚</li>
</ul>
<h4 id="QA"><a href="#QA" class="headerlink" title="QA"></a>QA</h4><p>Qï¼šä¸ºä»€ä¹ˆJSå¼•æ“çº¿ç¨‹å’ŒGUIçº¿ç¨‹äº’æ–¥ï¼Ÿ<br>Aï¼šå› ä¸ºJSæ˜¯å¯ä»¥æ“ä½œDOMçš„ï¼Œå¦‚æœåœ¨JSæ“ä½œDOMçš„åŒæ—¶ï¼ŒGUIçº¿ç¨‹ä¹Ÿåœ¨æ¸²æŸ“é¡µé¢ï¼Œé‚£ä¹ˆå…ƒç´ æœ€ç»ˆçš„å‘ˆç°å¯èƒ½å°±ä¸ä¼šå’Œæˆ‘ä»¬é¢„æœŸçš„ä¸€è‡´äº†ã€‚<br>Qï¼šä¸ºä»€ä¹ˆJSå¼•æ“æ˜¯å•çº¿ç¨‹ï¼Ÿ<br>Aï¼š1ã€åˆ›å»ºJavaScriptè¯­è¨€çš„æ—¶å€™ï¼Œå¤šè¿›ç¨‹å¤šçº¿ç¨‹å¹¶ä¸æµè¡Œï¼Œç¡¬ä»¶æ”¯æŒåº¦ä¸é«˜ã€‚<br>    2ã€å¤šè¿›ç¨‹å¤šçº¿ç¨‹ä½¿ç”¨æ—¶éœ€è¦åŠ é”ï¼Œå®æ–½æˆæœ¬é«˜ã€‚<br>    3ã€å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªDOMå…ƒç´ ï¼Œå¯èƒ½å…ƒç´ çš„æœ€ç»ˆå‘ˆç°ä¸ä¼šå¦‚é¢„æœŸä¸€æ ·ã€‚<br>    4ã€çº¿ç¨‹ä¹‹é—´èµ„æºå…±äº«ã€‚<br>å…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡<a href="https://www.yuque.com/walter-glskq/zf7grn/guyw1x" target="_blank" rel="noopener">æ–‡ç« </a>ã€‚</p>
<h3 id="è§£æURL"><a href="#è§£æURL" class="headerlink" title="è§£æURL"></a>è§£æURL</h3><p>å½“ç”¨æˆ·è¾“å…¥URLä¹‹åï¼Œä¼šè¿›è¡Œè§£æï¼ˆURLçš„æœ¬è´¨æ˜¯ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰ã€‚<br>URLä¸€èˆ¬åŒ…å«è¿™å‡ éƒ¨åˆ†ï¼š</p>
<ul>
<li>protocolï¼šåè®®å¤´ï¼Œå¦‚httpã€https ã€ftpç­‰ã€‚</li>
<li>hostï¼šæŒ‡å®šä¸»æœºåŸŸåæˆ–è€…IPåœ°å€ã€‚</li>
<li>portï¼šç«¯å£å·ã€‚</li>
<li>pathï¼šèµ„æºè·¯å¾„ã€‚</li>
<li>queryï¼šæŸ¥è¯¢å‚æ•°ã€‚</li>
<li>fragmentï¼šå³#ä¹‹åçš„hashå€¼ï¼Œä¸€èˆ¬ç”¨æ¥å®šä½åˆ°æŸä¸ªä½ç½®ã€‚</li>
</ul>
<h3 id="ç½‘ç»œè¯·æ±‚éƒ½æ˜¯å•ç‹¬çš„çº¿ç¨‹"><a href="#ç½‘ç»œè¯·æ±‚éƒ½æ˜¯å•ç‹¬çš„çº¿ç¨‹" class="headerlink" title="ç½‘ç»œè¯·æ±‚éƒ½æ˜¯å•ç‹¬çš„çº¿ç¨‹"></a>ç½‘ç»œè¯·æ±‚éƒ½æ˜¯å•ç‹¬çš„çº¿ç¨‹</h3><p>æ¯æ¬¡ç½‘ç»œè¯·æ±‚éƒ½ä¼šå¼€è¾Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹è¿›è¡Œï¼Œè­¬å¦‚å¦‚æœURLè§£æåˆ°httpåè®®ï¼Œå°±ä¼šæ–°å»ºä¸€ä¸ªç½‘ç»œçº¿ç¨‹å»å¤„ç†èµ„æºä¸‹è½½ï¼Œ<br>å› æ­¤æµè§ˆå™¨ä¼šæ ¹æ®è§£æåˆ°çš„httpåè®®å»å•ç‹¬å¼€è¾Ÿå‡ºæ–°çš„ç½‘ç»œçº¿ç¨‹ï¼Œå‰å¾€è¯·æ±‚èµ„æºã€‚</p>
<h2 id="ä»å¼€å¯ç½‘ç»œçº¿ç¨‹åˆ°å‘èµ·httpè¯·æ±‚"><a href="#ä»å¼€å¯ç½‘ç»œçº¿ç¨‹åˆ°å‘èµ·httpè¯·æ±‚" class="headerlink" title="ä»å¼€å¯ç½‘ç»œçº¿ç¨‹åˆ°å‘èµ·httpè¯·æ±‚"></a>ä»å¼€å¯ç½‘ç»œçº¿ç¨‹åˆ°å‘èµ·httpè¯·æ±‚</h2><p>è¿™ä¸€éƒ¨åˆ†ä¸»è¦åŒ…å«dnsè§£æã€tcp/ipè¯·æ±‚æ„å»ºã€äº”å±‚å› ç‰¹ç½‘åè®®æ ˆç­‰ã€‚</p>
<h3 id="DNSè§£æ"><a href="#DNSè§£æ" class="headerlink" title="DNSè§£æ"></a>DNSè§£æ</h3><p>å¦‚æœç”¨æˆ·è¾“å…¥çš„æ˜¯åŸŸåï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œdnsè§£æè·å–å¯¹åº”çš„IPåœ°å€ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¦‚æœæµè§ˆå™¨æœ‰ç¼“å­˜ï¼Œå°±ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜ï¼›å¦åˆ™ä½¿ç”¨æœ¬æœºç¼“å­˜ï¼Œå†æ²¡æœ‰å°±ä½¿ç”¨hostã€‚</li>
<li>å¦‚æœæœ¬åœ°æ²¡æœ‰ç¼“å­˜ï¼Œå°±å‘dnsæœåŠ¡å™¨æŸ¥è¯¢ï¼Œï¼ˆæŸ¥è¯¢ä¸­å¯èƒ½ä¼šä½¿ç”¨è·¯ç”±ç­‰ï¼Œè·¯ç”±ä¹Ÿæ˜¯æœ‰ç¼“å­˜çš„ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä½¿ç”¨ï¼‰ï¼Œè·å–IPåœ°å€ã€‚</li>
</ol>
<p>æ³¨æ„ï¼šåŸŸåæŸ¥è¯¢å¯èƒ½ç»è¿‡dnsè°ƒåº¦å™¨çš„ã€‚è€Œä¸”dnsæŸ¥è¯¢æ˜¯å¾ˆè€—æ—¶ï¼Œå¦‚æœè§£æåŸŸåè¾ƒå¤šï¼Œé‚£ä¹ˆç½‘ç«™çš„é¦–å±åŠ è½½å°±ä¼šå˜å¾—å¾ˆæ…¢ï¼Œè¿™æ—¶å¯ä»¥è€ƒè¯•ä½¿ç”¨<code>dns-prefetch</code>ï¼Œè¿™ä¸€ç‚¹è¯·å‚è€ƒ<a href="https://www.cnblogs.com/goloving/p/9368965.html" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p>
<h3 id="TCP-IPè¯·æ±‚"><a href="#TCP-IPè¯·æ±‚" class="headerlink" title="TCP/IPè¯·æ±‚"></a>TCP/IPè¯·æ±‚</h3><p>httpè¯·æ±‚æœ¬è´¨ä¸Šè¿˜æ˜¯tcp/ipè¯·æ±‚ã€‚<br>tcpå°†httpé•¿æŠ¥æ–‡åˆ’åˆ†ä¸ºçŸ­æŠ¥æ–‡ï¼Œé€šè¿‡ä¸‰æ¬¡æ¡æ‰‹ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œè¿›è¡Œå¯é ä¼ è¾“ã€‚</p>
<h4 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h4><p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582018099404-452e08b5-fc6b-4686-9893-7d0b2eaa0183.png" alt="image.png"><br>TCPæŠ¥å¤´ä¸­çš„æºç«¯å£å·å’Œç›®çš„ç«¯å£å·åŒIPæ•°æ®æŠ¥ä¸­çš„æºIPä¸ç›®çš„IPå”¯ä¸€ç¡®å®šä¸€æ¡TCPè¿æ¥ã€‚TCPåœ¨å‘é€æ•°æ®å‰å¿…é¡»åœ¨å½¼æ­¤é—´å»ºç«‹è¿æ¥ï¼Œè¿™é‡Œè¿æ¥æ„æ€æ˜¯ï¼šåŒæ–¹éœ€è¦å†…ä¿å­˜å¯¹æ–¹ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼šIPï¼ŒPortâ€¦ï¼‰ã€‚</p>
<p>æŠ¥æ–‡ä¸»è¦æ®µçš„æ„æ€ï¼š</p>
<ul>
<li>åºå·seqï¼šå‘é€çš„æ•°æ®å­—èŠ‚æµï¼Œç¡®ä¿TCPè¿æ¥ä¼ è¾“æœ‰åºï¼Œå¯¹æ¯ä¸ªå­—èŠ‚ç¼–å·ã€‚åºåˆ—å·seqå°±æ˜¯è¿™ä¸ªæŠ¥æ–‡æ®µä¸­çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ç¼–å·ã€‚</li>
<li>ç¡®è®¤åºå·ackï¼šå‘é€æ–¹æœŸå¾…æ¥æ”¶çš„ä¸‹ä¸€åºåˆ—å·ï¼Œæ¥æ”¶æˆåŠŸååºåˆ—å·åŠ 1ï¼Œåªæœ‰ACKä¸º1æ—¶ï¼Œæ‰æœ‰æ•ˆã€‚</li>
<li>ç¡®è®¤ACKï¼šä»…å½“ACKä¸º1æ—¶ç¡®è®¤å·æ‰æœ‰æ•ˆï¼Œä¸º0æ—¶æ— æ•ˆã€‚</li>
<li>åŒæ­¥SYNï¼šè¿æ¥å»ºç«‹æ—¶ç”¨äºåŒæ­¥åºå·ã€‚å½“SYN=1ï¼ŒACK=0æ—¶ï¼ŒæŒ‡çš„æ˜¯è¿™æ˜¯ä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡æ®µï¼Œè‹¥ç»Ÿä¸€è¿æ¥ï¼Œåˆ™SYN=1ï¼ŒACK=1ã€‚å› æ­¤ï¼ŒSYN=1ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¯·æ±‚è¿æ¥ï¼Œæˆ–è€…è¿æ¥æ¥æ”¶æŠ¥æ–‡ã€‚SYNåªæœ‰åœ¨å»ºç«‹è¿æ¥æ—¶æ‰ä¼šè¢«ç½®ä¸º1ï¼Œæ¡æ‰‹ç»“æŸä¹‹åç½®ä¸º0.</li>
<li>ç»ˆæ­¢FINï¼šç”¨äºé‡Šæ”¾è¿æ¥ã€‚å½“FIN=1æ—¶ï¼Œè¡¨ç¤ºæ­¤æŠ¥æ–‡æ®µçš„å‘é€æ–¹çš„æ•°æ®å·²ç»å‘é€å®Œæ¯•ï¼Œå¹¶è¦æ±‚é‡Šæ”¾è¿æ¥ã€‚</li>
</ul>
<p>PSï¼šACKã€SYNå’ŒFINè¿™äº›å¤§å†™çš„å•è¯è¡¨ç¤ºæ ‡å¿—ä½ï¼Œå…¶å€¼è¦ä¹ˆæ˜¯1ï¼Œè¦ä¹ˆæ˜¯0ï¼›ackã€seqå°å†™çš„å•è¯è¡¨ç¤ºåºå·ã€‚</p>
<table>
<thead>
<tr>
<th align="center">å­—æ®µ</th>
<th align="center">å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="center">URG</td>
<td align="center">ç´§æ€¥æŒ‡é’ˆæ˜¯å¦æœ‰æ•ˆã€‚ä¸º1ï¼Œè¡¨ç¤ºæŸä¸€ä½éœ€è¦è¢«ä¼˜å…ˆå¤„ç†</td>
</tr>
<tr>
<td align="center">ACK</td>
<td align="center">ç¡®è®¤å·æ˜¯å¦æœ‰æ•ˆï¼Œä¸€èˆ¬ç½®ä¸º1ã€‚</td>
</tr>
<tr>
<td align="center">PSH</td>
<td align="center">æç¤ºæ¥æ”¶ç«¯åº”ç”¨ç¨‹åºç«‹å³ä»TCPç¼“å†²åŒºæŠŠæ•°æ®è¯»èµ°ã€‚</td>
</tr>
<tr>
<td align="center">RST</td>
<td align="center">å¯¹æ–¹è¦æ±‚é‡æ–°å»ºç«‹è¿æ¥ï¼Œå¤ä½ã€‚</td>
</tr>
<tr>
<td align="center">SYN</td>
<td align="center">è¯·æ±‚å»ºç«‹è¿æ¥ï¼Œå¹¶åœ¨å…¶åºåˆ—å·çš„å­—æ®µè¿›è¡Œåºåˆ—å·çš„åˆå§‹å€¼è®¾å®šã€‚å»ºç«‹è¿æ¥ï¼Œè®¾ç½®ä¸º1</td>
</tr>
<tr>
<td align="center">FIN</td>
<td align="center">å¸Œæœ›æ–­å¼€è¿æ¥ã€‚</td>
</tr>
</tbody></table>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582018876320-c8e1eeaa-ca19-4344-9744-f2044a9bd6e0.png?x-oss-process=image/watermark,type_d3F5LW1pY3JvaGVp,size_10,text_a2Fr,color_FFFFFF,shadow_50,t_80,g_se,x_10,y_10" alt="image.png"></p>
<ol>
<li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€åˆå§‹åºå·seq=xï¼ŒSYN=1è¯·æ±‚æ ‡å¿—ã€‚è®©æœåŠ¡å™¨çŸ¥é“å®¢æˆ·ç«¯å‘é€ï¼Œè‡ªå·±æ¥æ”¶æ­£å¸¸ã€‚</li>
<li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨å‘é€è¯·æ±‚æ ‡å¿—SYNï¼Œå‘é€ç¡®è®¤æ ‡å¿—ACKï¼ŒæœåŠ¡å™¨è‡ªå·±çš„åºå·seqï¼Œå‘é€å®¢æˆ·ç«¯çš„ç¡®è®¤æ ‡å¿—ackï¼šSYN=1ï¼ŒACK=1ï¼Œseq=yï¼Œack=x + 1ã€‚è®©å®¢æˆ·ç«¯çŸ¥é“è‡ªå·±æ¥æ”¶ã€å‘é€æ­£å¸¸ï¼ŒæœåŠ¡å™¨æ¥æ”¶ã€å‘é€æ­£å¸¸ã€‚</li>
<li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ç¡®è®¤æ ‡å¿—ACKï¼Œè‡ªå·±çš„åºå·seqï¼Œå‘é€æœåŠ¡ç«¯çš„ç¡®è®¤åºå·ackï¼šACK=1ï¼Œseq=x+1ï¼Œack=y+1ã€‚è®©æœåŠ¡å™¨çŸ¥é“å®¢æˆ·ç«¯å‘é€ã€æ¥æ”¶ï¼Œè‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ã€‚</li>
</ol>
<p>ä»ä¸Šé¢å¯çŸ¥ï¼Œä¸‰æ¬¡æ¡æ‰‹æ˜¯è®©æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çŸ¥é“å½¼æ­¤åŒæ–¹å‘é€ã€æ¥æ”¶èƒ½åŠ›æ­£å¸¸çš„æœ€å°‘æ¡æ‰‹æ¬¡æ•°ã€‚</p>
<h4 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h4><p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582019583668-d848c108-a4f3-4188-b8f3-c7fda16138e9.png?x-oss-process=image/watermark,type_d3F5LW1pY3JvaGVp,size_10,text_a2Fr,color_FFFFFF,shadow_50,t_80,g_se,x_10,y_10" alt="image.png"></p>
<p>å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹è§£æï¼š</p>
<ol>
<li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯ä¸»åŠ¨è¯·æ±‚æ–­å¼€ï¼Œå‘æœåŠ¡ç«¯å‘é€FIN=1ï¼Œseq=uï¼Œè¿›å…¥FIN-WAIT-1çŠ¶æ€ã€‚</li>
<li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯ï¼Œå‘é€ç¡®è®¤åºå·ACK=1ï¼Œå®¢æˆ·ç«¯çš„ç¡®è®¤å·ack=u+1ï¼Œè‡ªå·±çš„åºå·seq=vã€‚å¹¶ä¸”è¿›å…¥CLOSE-WAITçŠ¶æ€ã€‚</li>
<li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯çš„ä¿¡æ¯åï¼Œè¿›å…¥FIN-WAIT-2çŠ¶æ€ã€‚æ­¤æ—¶æœåŠ¡å™¨å‘é€é‡Šæ”¾FIN=1ä¿¡å·ï¼Œå‘é€ç¡®è®¤æ ‡å¿—ACK=1ï¼Œè‡ªå·±çš„åºå·seq=wï¼Œå®¢æˆ·ç«¯çš„ç¡®è®¤å·ack=u+1ã€‚å¹¶ä¸”è‡ªå·±è¿›å…¥LAST-ACTçŠ¶æ€ï¼ˆæœ€å¥½ç¡®è®¤çŠ¶æ€ï¼‰ã€‚</li>
<li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯ä¿¡æ¯åï¼Œå‘é€ç¡®è®¤æ ‡å¿—ACK=1ï¼Œè‡ªå·±çš„åºå·seq=u+1ï¼ŒæœåŠ¡ç«¯çš„ç¡®è®¤å·ack=w+1ã€‚å®¢æˆ·ç«¯è¿›å…¥TIME-WAITçŠ¶æ€ã€‚ç­‰å¾…2MSLï¼ˆ2ä¸ªæœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½ï¼‰ä¹‹åï¼Œè¿›å…¥CLOSEçŠ¶æ€ã€‚æœåŠ¡ç«¯æ”¶åˆ°ç¡®è®¤åï¼Œä¹Ÿè¿›å…¥CLOSEçŠ¶æ€ã€‚</li>
</ol>
<h4 id="QA-1"><a href="#QA-1" class="headerlink" title="QA"></a>QA</h4><p>Qï¼šä¸ºä»€ä¹ˆä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Ÿ<br>Aï¼šä¸‰æ¬¡æ¡æ‰‹æ—¶ï¼ŒæœåŠ¡å™¨åŒæ—¶æŠŠACKå’ŒSYNæ”¾åœ¨ä¸€èµ·å‘é€åˆ°äº†å®¢æˆ·ç«¯é‚£é‡Œã€‚å››æ¬¡æŒ¥æ‰‹æ—¶ï¼Œå½“æ”¶åˆ°å¯¹æ–¹çš„ FIN æŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®ï¼Œå·±æ–¹æ˜¯å¦ç°åœ¨å…³é—­å‘é€æ•°æ®é€šé“ï¼Œéœ€è¦ä¸Šå±‚åº”ç”¨æ¥å†³å®šï¼Œå› æ­¤ï¼Œå·±æ–¹ ACK å’Œ FIN ä¸€èˆ¬éƒ½ä¼šåˆ†å¼€å‘é€ã€‚<br>Qï¼šä¸ºä»€ä¹ˆTIME_WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)æ‰èƒ½è¿”å›åˆ°CLOSEçŠ¶æ€ï¼Ÿ<br>Aï¼šè™½ç„¶æŒ‰é“ç†ï¼Œå››ä¸ªæŠ¥æ–‡éƒ½å‘é€å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿›å…¥CLOSEçŠ¶æ€äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»å‡è±¡ç½‘ç»œæ˜¯ä¸å¯é çš„ï¼Œæœ‰å¯ä»¥æœ€åä¸€ä¸ªACKä¸¢å¤±ã€‚æ‰€ä»¥TIME_WAITçŠ¶æ€å°±æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ACKæŠ¥æ–‡ã€‚åœ¨Clientå‘é€å‡ºæœ€åçš„ACKå›å¤ï¼Œä½†è¯¥ACKå¯èƒ½ä¸¢å¤±ã€‚Serverå¦‚æœæ²¡æœ‰æ”¶åˆ°ACKï¼Œå°†ä¸æ–­é‡å¤å‘é€FINç‰‡æ®µã€‚æ‰€ä»¥Clientä¸èƒ½ç«‹å³å…³é—­ï¼Œå®ƒå¿…é¡»ç¡®è®¤Serveræ¥æ”¶åˆ°äº†è¯¥ACKã€‚Clientä¼šåœ¨å‘é€å‡ºACKä¹‹åè¿›å…¥åˆ°TIME_WAITçŠ¶æ€ã€‚Clientä¼šè®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œç­‰å¾…2MSLçš„æ—¶é—´ã€‚å¦‚æœåœ¨è¯¥æ—¶é—´å†…å†æ¬¡æ”¶åˆ°FINï¼Œé‚£ä¹ˆClientä¼šé‡å‘ACKå¹¶å†æ¬¡ç­‰å¾…2MSLã€‚æ‰€è°“çš„2MSLæ˜¯ä¸¤å€çš„MSL(Maximum Segment Lifetime)ã€‚MSLæŒ‡ä¸€ä¸ªç‰‡æ®µåœ¨ç½‘ç»œä¸­æœ€å¤§çš„å­˜æ´»æ—¶é—´ï¼Œ2MSLå°±æ˜¯ä¸€ä¸ªå‘é€å’Œä¸€ä¸ªå›å¤æ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚å¦‚æœç›´åˆ°2MSLï¼ŒClientéƒ½æ²¡æœ‰å†æ¬¡æ”¶åˆ°FINï¼Œé‚£ä¹ˆClientæ¨æ–­ACKå·²ç»è¢«æˆåŠŸæ¥æ”¶ï¼Œåˆ™ç»“æŸTCPè¿æ¥ã€‚<br>Qï¼šå¦‚æœå·²ç»å»ºç«‹äº†è¿æ¥ï¼Œä½†æ˜¯å®¢æˆ·ç«¯çªç„¶å‡ºç°æ•…éšœäº†æ€ä¹ˆåŠï¼Ÿ<br>Aï¼šTCPè¿˜è®¾æœ‰ä¸€ä¸ªä¿æ´»è®¡æ—¶å™¨ï¼Œæ˜¾ç„¶ï¼Œå®¢æˆ·ç«¯å¦‚æœå‡ºç°æ•…éšœï¼ŒæœåŠ¡å™¨ä¸èƒ½ä¸€ç›´ç­‰ä¸‹å»ï¼Œç™½ç™½æµªè´¹èµ„æºã€‚æœåŠ¡å™¨æ¯æ”¶åˆ°ä¸€æ¬¡å®¢æˆ·ç«¯çš„è¯·æ±‚åéƒ½ä¼šé‡æ–°å¤ä½è¿™ä¸ªè®¡æ—¶å™¨ï¼Œæ—¶é—´é€šå¸¸æ˜¯è®¾ç½®ä¸º2å°æ—¶ï¼Œè‹¥ä¸¤å°æ—¶è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„ä»»ä½•æ•°æ®ï¼ŒæœåŠ¡å™¨å°±ä¼šå‘é€ä¸€ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µï¼Œä»¥åæ¯éš”75ç§’é’Ÿå‘é€ä¸€æ¬¡ã€‚è‹¥ä¸€è¿å‘é€10ä¸ªæ¢æµ‹æŠ¥æ–‡ä»ç„¶æ²¡ååº”ï¼ŒæœåŠ¡å™¨å°±è®¤ä¸ºå®¢æˆ·ç«¯å‡ºäº†æ•…éšœï¼Œæ¥ç€å°±å…³é—­è¿æ¥ã€‚</p>
<h4 id="tcp-ipçš„å¹¶å‘é™åˆ¶"><a href="#tcp-ipçš„å¹¶å‘é™åˆ¶" class="headerlink" title="tcp/ipçš„å¹¶å‘é™åˆ¶"></a>tcp/ipçš„å¹¶å‘é™åˆ¶</h4><p>æµè§ˆå™¨é’ˆå¯¹åŒä¸€ä¸ªåŸŸåä¸‹çš„tcpè¿æ¥æ˜¯æœ‰é™åˆ¶çš„ï¼ˆä¸€èˆ¬æ˜¯5-20ä¸ªï¼‰ã€‚è€Œä¸”åœ¨http1.0ä¸­ï¼Œä¸€ä¸ªèµ„æºä¸‹è½½å°±å¯¹åº”ç€ä¸€ä¸ªtcp/ipè¿æ¥ã€‚</p>
<h4 id="getå’Œpostçš„åŒºåˆ«"><a href="#getå’Œpostçš„åŒºåˆ«" class="headerlink" title="getå’Œpostçš„åŒºåˆ«"></a>getå’Œpostçš„åŒºåˆ«</h4><p>getå’Œpostæœ¬è´¨ä¸Šéƒ½æ˜¯tcp/ipï¼Œä½†æ˜¯ä¸¤è€…é™¤äº†åœ¨httpå±‚é¢ä¸Šçš„ä¸åŒï¼Œåœ¨tcp/ipå±‚é¢ä¹Ÿæœ‰åŒºåˆ«ã€‚<br>getä¼šäº§ç”Ÿä¸€ä¸ªtcpåŒ…ï¼Œè€Œpostä¼šäº§ç”Ÿä¸¤ä¸ªï¼š</p>
<ul>
<li>getè¯·æ±‚æ—¶ä¼šæŠŠheaderså’Œdataä¸€èµ·å‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨å“åº”200ã€‚</li>
<li>postè¯·æ±‚ä¼šå…ˆæŠŠheaderså‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œç„¶åæµè§ˆå™¨åœ¨å‘é€dataï¼ŒæœåŠ¡å™¨å“åº”200ã€‚</li>
</ul>
<p>å…¶ä»–åŒºåˆ«ï¼š</p>
<table>
<thead>
<tr>
<th>åˆ†ç±»</th>
<th>GET</th>
<th>POST</th>
</tr>
</thead>
<tbody><tr>
<td>å¯å¦è¢«ç¼“å­˜</td>
<td>å¯ä»¥è¢«ç¼“å­˜</td>
<td>ä¸å¯ä»¥è¢«ç¼“å­˜</td>
</tr>
<tr>
<td>åé€€æˆ–åˆ·æ–°</td>
<td>æ— å®³</td>
<td>é‡æ–°æäº¤è¯·æ±‚</td>
</tr>
<tr>
<td>ç¼–ç ç±»å‹</td>
<td>application/x-www-form-urlencoded</td>
<td>application/x-www-form-urlencoded æˆ– multipart/form-dataã€‚ä¸ºäºŒè¿›åˆ¶æ•°æ®ä½¿ç”¨å¤šé‡ç¼–ç ã€‚</td>
</tr>
<tr>
<td>å†å²</td>
<td>ä¼šè¢«ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­</td>
<td>ä¸ä¼šè¢«ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­</td>
</tr>
<tr>
<td>å¯¹æ•°æ®ç±»å‹çš„é™åˆ¶</td>
<td>åªå…è®¸ASCIIå­—ç¬¦</td>
<td>æ— é™åˆ¶</td>
</tr>
<tr>
<td>å®‰å…¨æ€§</td>
<td>ä¸POSTæ¯”ï¼Œå®‰å…¨æ€§è¾ƒå·®ï¼Œå› ä¸ºå‘é€çš„æ•°æ®ä¼šæš´éœ²åœ¨åœ°å€æ ä¸­</td>
<td>POSTæ¯”GETè¾ƒå®‰å…¨</td>
</tr>
<tr>
<td>å¯è§æ€§</td>
<td>å¯è§</td>
<td>ä¸å¯è§</td>
</tr>
</tbody></table>
<h3 id="äº”å±‚å› ç‰¹ç½‘åè®®"><a href="#äº”å±‚å› ç‰¹ç½‘åè®®" class="headerlink" title="äº”å±‚å› ç‰¹ç½‘åè®®"></a>äº”å±‚å› ç‰¹ç½‘åè®®</h3><p>ä»å®¢æˆ·ç«¯å‘å‡ºhttpè¯·æ±‚åˆ°æœåŠ¡å™¨æ¥æ”¶ï¼Œè¿™ä¸­é—´ä¼šç»è¿‡ä¸€ç³»åˆ—çš„è¿‡ç¨‹ï¼š<br><strong>ä»åº”ç”¨å±‚å‘å‡ºhttpè¯·æ±‚ï¼Œåˆ°ä¼ è¾“å±‚ç»è¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹tcpè¿æ¥ï¼Œå†åˆ°ç½‘ç»œå±‚çš„IPå¯»å€ï¼Œå†åˆ°æ•°æ®é“¾è·¯å±‚å°è£…æˆå¸§ï¼Œæœ€åç»ç”±ç‰©ç†å±‚ä¼ è¾“ã€‚</strong><br>äº”å±‚å› ç‰¹ç½‘åè®®æ ˆå…¶å®å°±æ˜¯ï¼š</p>
<ol>
<li>åº”ç”¨å±‚ï¼ˆdns httpï¼‰DNSè§£æIPå¹¶å‘é€httpè¯·æ±‚ã€‚</li>
<li>ä¼ è¾“å±‚ï¼ˆtcp udpï¼‰ç»è¿‡ä¸‰æ¬¡æ¡æ‰‹ï¼Œå»ºç«‹tcpè¿æ¥ã€‚</li>
<li>ç½‘ç»œå±‚ï¼ˆIP ARPï¼‰IPå¯»å€ã€‚</li>
<li>æ•°æ®é“¾è·¯å±‚ï¼ˆPPPï¼‰å°è£…æˆå¸§ã€‚</li>
<li>ç‰©ç†å±‚ï¼ˆåˆ©ç”¨æ— åŠ›ä»‹è´¨ä¼ è¾“æ¯”ç‰¹æµï¼‰ç‰©ç†ä¼ è¾“ï¼ˆç„¶åä¼ è¾“çš„æ—¶å€™é€šè¿‡åŒç»çº¿ï¼Œç”µç£æ³¢ç­‰ä»‹è´¨ï¼‰ã€‚</li>
</ol>
<p>ç›¸æ¯”äºå®Œæ•´çš„IOS/OSIä¸ƒå±‚æ¡†æ¶ï¼Œå°‘äº†è¡¨ç¤ºå±‚å’Œä¼šè¯å±‚ã€‚<br>OSIä¸ƒå±‚æ¡†æ¶ï¼š<code>ç‰©ç†å±‚</code>ã€<code>æ•°æ®é“¾è·¯å±‚</code>ã€<code>ç½‘ç»œå±‚</code>ã€<code>ä¼ è¾“å±‚</code>ã€<code>ä¼šè¯å±‚</code>ã€<code>è¡¨ç¤ºå±‚</code>ã€<code>åº”ç”¨å±‚</code></p>
<ol>
<li>è¡¨ç¤ºå±‚ï¼šä¸»è¦å¤„ç†ä¸¤ä¸ªé€šè®¯ç³»ç»Ÿä¹‹é—´çš„ä¿¡æ¯äº¤æ¢çš„è¡¨ç¤ºæ–¹å¼ï¼ŒåŒ…æ‹¬æ•°æ®æ ¼å¼äº¤æ¢ã€æ•°æ®åŠ å¯†è§£å¯†ç­‰ã€‚</li>
<li>ä¼šè¯å±‚ï¼šå®ƒç®¡ç†ä¸åŒç”¨æˆ·çš„è¿›ç¨‹ä¹‹é—´çš„å¯¹è¯ï¼Œå¦‚ç™»å½•ã€æ³¨é”€ç­‰ã€‚</li>
</ol>
<h2 id="ä»æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åˆ°åå°æ¥æ”¶åˆ°è¯·æ±‚"><a href="#ä»æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åˆ°åå°æ¥æ”¶åˆ°è¯·æ±‚" class="headerlink" title="ä»æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åˆ°åå°æ¥æ”¶åˆ°è¯·æ±‚"></a>ä»æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åˆ°åå°æ¥æ”¶åˆ°è¯·æ±‚</h2><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><p>å¯¹äºä¸€ä¸ªå¤§å‹é¡¹ç›®æ¥è¯´ï¼Œå®ƒçš„å¹¶å‘è®¿é—®é‡å¯èƒ½ä¼šå¾ˆå¤§ï¼Œæ‰€ä»¥å¦‚æœåªæœ‰ä¸€å°æœåŠ¡å™¨å¯èƒ½æ˜¯åƒä¸æ¶ˆçš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šæœ‰è‹¥å¹²ä¸ªæœåŠ¡å™¨ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼Œç„¶åé…åˆåå‘ä»£ç†æœåŠ¡å™¨å®ç°è´Ÿè½½å‡è¡¡ã€‚<br>ç®€å•æ¥è¯´ï¼š<strong>å°±æ˜¯ç”¨æˆ·çš„è¯·æ±‚éƒ½ä¼šæŒ‡å‘ä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå¦‚nginxï¼Œç„¶åä»£ç†æœåŠ¡å™¨æŒ‰ç…§æŒ‡å®šçš„ç®—æ³•ï¼Œåˆ†é…ä¸åŒçš„è¯·æ±‚ç»™å¯¹åº”é›†ç¾¤ä¸­çš„æœåŠ¡å™¨æ‰§è¡Œï¼Œç„¶ååå“ä»£ç†æœåŠ¡å™¨ç­‰å¾…æœåŠ¡å™¨çš„httpå“åº”ï¼Œå¹¶å°†å…¶ååº”ç»™ç”¨æˆ·ã€‚</strong><br>**</p>
<h3 id="åå°å¤„ç†"><a href="#åå°å¤„ç†" class="headerlink" title="åå°å¤„ç†"></a>åå°å¤„ç†</h3><p>ä¸€èˆ¬åå°éƒ½æ˜¯éƒ¨ç½²åˆ°ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œæ‰€ä»¥ï¼š</p>
<ul>
<li>å…ˆæ˜¯å®¹å™¨æ¥æ”¶åˆ°è¯·æ±‚ï¼ˆå¦‚tomcatï¼‰ï¼Œ</li>
<li>ç„¶åå¯¹åº”å®¹å™¨ä¸­çš„ç¨‹åºæ¥æ”¶åˆ°è¯·æ±‚ï¼ˆå¦‚javaã€phpç­‰ï¼‰ï¼Œ</li>
<li>ç„¶åå°±æ˜¯åå°ç¨‹åºä¸­çš„å†…éƒ¨å¤„ç†ï¼Œå¤„ç†å®Œæˆä¹‹åå“åº”ç»“æœã€‚</li>
</ul>
<p>ä¸€èˆ¬åå°éƒ½ä¼šæœ‰ç»Ÿä¸€çš„éªŒè¯ï¼šå®‰å…¨æ‹¦æˆªã€è·¨åŸŸå¤„ç†ç­‰ï¼Œå¦‚æœéªŒè¯ä¸é€šè¿‡ï¼Œåˆ™ç›´æ¥æ‹’ç»è¯·æ±‚ã€‚å¦‚æœéªŒè¯é€šè¿‡ï¼Œæ‰ä¼šè¿›å…¥åå°ç¨‹åºï¼Œåå°ç¨‹åºè¿›è¡Œå¯¹åº”çš„æ“ä½œï¼Œå¦‚æ•°æ®æŸ¥è¯¢ç­‰ã€‚ç­‰ç¨‹åºæ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œä¼šè¿”å›ä¸€ä¸ªhttpåŒ…ï¼Œç„¶åå°†è¿™ä¸ªåŒ…å‘é€ç»™å‰ç«¯ï¼Œå®Œæˆäº¤äº’ã€‚</p>
<h3 id="åå°å’Œå‰å°çš„äº¤äº’"><a href="#åå°å’Œå‰å°çš„äº¤äº’" class="headerlink" title="åå°å’Œå‰å°çš„äº¤äº’"></a>åå°å’Œå‰å°çš„äº¤äº’</h3><p>å‰åç«¯äº¤äº’çš„æ—¶å€™ï¼ŒhttpæŠ¥æ–‡ä½œä¸ºæœ€é‡è¦çš„ä¿¡æ¯è½½ä½“ã€‚</p>
<h4 id="httpæŠ¥æ–‡ç»“æ„"><a href="#httpæŠ¥æ–‡ç»“æ„" class="headerlink" title="httpæŠ¥æ–‡ç»“æ„"></a>httpæŠ¥æ–‡ç»“æ„</h4><p>æŠ¥æ–‡ä¸€èˆ¬åŒ…æ‹¬äº†é€šç”¨å¤´éƒ¨ã€è¯·æ±‚/å“åº”å¤´éƒ¨ã€è¯·æ±‚/å“åº”ä½“</p>
<h5 id="é€šç”¨å¤´éƒ¨"><a href="#é€šç”¨å¤´éƒ¨" class="headerlink" title="é€šç”¨å¤´éƒ¨"></a>é€šç”¨å¤´éƒ¨</h5><ul>
<li>Request Urlï¼šè¯·æ±‚çš„webæœåŠ¡å™¨åœ°å€ã€‚</li>
<li>Request Methodï¼šè¯·æ±‚æ–¹å¼ï¼ˆGETã€POSTã€PUTã€DELETEã€HEADã€CONNECTã€TRACEï¼‰ã€‚</li>
<li>Status Codeï¼šè¯·æ±‚è¿”å›çš„çŠ¶æ€ç ã€‚</li>
<li>Remote Addressï¼šè¯·æ±‚çš„è¿œç¨‹æœåŠ¡å™¨åœ°å€ï¼ˆä¼šè¢«è½¬ä¸ºIPï¼‰ã€‚</li>
</ul>
<p>å…¶ä¸­methodsä¸€èˆ¬å¯ä»¥åˆ†ä¸ºä¸¤æ‰¹æ¬¡ï¼š</p>
<ul>
<li>HTTP1.0å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼šGETã€POSTå’ŒHEADæ–¹æ³•ä»¥åŠå‡ ç§é¢å¤–çš„è¯·æ±‚æ–¹å¼ï¼ˆPUTã€DELETEã€LINKå’ŒUNLINKï¼‰ã€‚HTTP1.0å…·ä½“å®šä¹‰è¯·å‚è€ƒï¼š<a href="https://tools.ietf.org/html/rfc1945" target="_blank" rel="noopener">https://tools.ietf.org/html/rfc1945</a>ã€‚</li>
<li>HTTP1.1å®šä¹‰äº†å…«ç§è¯·æ±‚æ–¹å¼ï¼šGETã€POSTã€PUTã€DELETEã€HEADã€CONNECTã€TRACEã€‚HTTP1.1å…·ä½“å®šä¹‰è¯·å‚è€ƒï¼š<a href="https://tools.ietf.org/html/rfc2616" target="_blank" rel="noopener">https://tools.ietf.org/html/rfc2616</a>ã€‚</li>
</ul>
<h5 id="å¸¸ç”¨çŠ¶æ€ç "><a href="#å¸¸ç”¨çŠ¶æ€ç " class="headerlink" title="å¸¸ç”¨çŠ¶æ€ç "></a>å¸¸ç”¨çŠ¶æ€ç </h5><pre><code>200-è¯·æ±‚æˆåŠŸã€‚è¯·æ±‚çš„èµ„æºå·²è¿”å›å®¢æˆ·ç«¯ã€‚
301-æ°¸ä¹…é‡å®šå‘ã€‚
302-ä¸´æ—¶é‡å®šå‘ã€‚
304-è¡¨æ˜è‡ªä¸Šæ¬¡è¯·æ±‚ä¹‹åï¼Œèµ„æºæœªåšå˜æ›´ï¼Œè¯·ä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„èµ„æºã€‚
400-å®¢æˆ·ç«¯è¯·æ±‚å‡ºé”™ã€‚
401-è¯·æ±‚æœªç»æˆæƒã€‚
403-ç¦æ­¢è®¿é—®ã€‚
404-è¯·æ±‚èµ„æºä¸å­˜åœ¨ã€‚
500-æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚
503-æœåŠ¡å™¨ä¸å¯ç”¨ã€‚
......</code></pre><p>æœ€ååˆ—ä¸¾ä¸‹å¤§è‡´ä¸åŒèŒƒå›´çš„çŠ¶æ€ç ï¼š</p>
<pre><code>1xxï¼šæŒ‡ç¤ºä¿¡æ¯ï¼Œè¡¨ç¤ºè¯·æ±‚å·²æ¥å—ï¼Œæ­£åœ¨å¤„ç†ã€‚
2xxï¼šè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ã€‚
3xxï¼šé‡å®šå‘ï¼Œè¦å®Œæˆè¯·æ±‚éœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œã€‚
4xxï¼šå®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚è¯­æ³•é”™è¯¯æˆ–è€…è¯·æ±‚æ— æ³•å®ç°ã€‚
5xxï¼šæœåŠ¡ç«¯é”™è¯¯ï¼ŒæœåŠ¡å™¨å®ç°åˆæ³•çš„è¯·æ±‚ã€‚</code></pre><h4 id="è¯·æ±‚-å“åº”å¤´éƒ¨"><a href="#è¯·æ±‚-å“åº”å¤´éƒ¨" class="headerlink" title="è¯·æ±‚/å“åº”å¤´éƒ¨"></a>è¯·æ±‚/å“åº”å¤´éƒ¨</h4><p>å¸¸ç”¨çš„è¯·æ±‚å¤´éƒ¨ï¼š</p>
<pre><code>Acceptï¼šæ¥æ”¶ç±»å‹ã€‚è¡¨ç¤ºæµè§ˆå™¨å¯ä»¥æ”¯æŒçš„MIMEç±»å‹ï¼ˆå¯¹æ ‡æœåŠ¡å™¨è¿”å›çš„Content-Typeï¼‰ã€‚
Accept-Encodeingï¼šæµè§ˆå™¨æ”¯æŒçš„å‹ç¼©ç±»å‹ï¼Œå¦‚GZipï¼Œè¶…å‡ºç±»å‹ä¸èƒ½æ¥æ”¶ã€‚
ConContent-Typeï¼šå®¢æˆ·ç«¯å‘å‡ºå»çš„å®ä½“å†…å®¹çš„ç±»å‹ã€‚
Cache-Controlï¼šæŒ‡å®šè¯·æ±‚å’Œå“åº”åº”éµå¾ªçš„ç¼“å­˜æœºåˆ¶ï¼Œå¦‚no-cacheç­‰ã€‚
If-Modifiy-Sinceï¼šå¯¹åº”æœåŠ¡ç«¯çš„Last-Modifiedï¼Œç”¨äºæ¯”è¾ƒæœåŠ¡å™¨èµ„æºæ–‡ä»¶æ˜¯å¦å‘ç”Ÿå˜åŠ¨ï¼Œç²¾ç¡®åˆ°1sï¼Œhttp1.0ã€‚
Expiresï¼šç¼“å­˜æ§åˆ¶ã€‚è®¾ç½®èµ„æºçš„æœ‰æ•ˆæœŸï¼Œæœ‰æ•ˆæ—¶é—´å†…å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚ä½¿ç”¨çš„æ˜¯æœåŠ¡ç«¯æ—¶é—´ï¼Œhttp1.0ã€‚
Max-ageï¼šä»£è¡¨èµ„æºåœ¨æœ¬åœ°çš„æœ‰æ•ˆæ—¶é—´ï¼Œæœ‰æ•ˆæ—¶é—´å†…ä¸ä¼šè¯·æ±‚ï¼Œhttp1.1ã€‚
If-None-Matchï¼šå¯¹åº”æœåŠ¡ç«¯çš„ETagï¼Œç”¨äºåŒ¹é…æ–‡ä»¶å†…å®¹æ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼Œæ¯”è¾ƒç²¾ç¡®ï¼Œhttp1.1ã€‚
Cookieï¼šæœ‰cookieä¸”åŒåŸŸåè®¿é—®æ—¶ä¼šå¸¦ä¸Šã€‚
Connectionï¼šå½“æµè§ˆå™¨ä¸æœåŠ¡å™¨é€šä¿¡æ—¶å¯¹äºé•¿è¿æ¥å¦‚ä½•è¿›è¡Œå¤„ç†ï¼Œå¦‚keep-aliveã€‚
Hostï¼šè¯·æ±‚çš„æœåŠ¡å™¨åœ°å€ã€‚
Originï¼šè¯·æ±‚æœ€åˆä»å“ªé‡Œå‘èµ·çš„ã€‚Originæ¯”Refereræ›´å°Šé‡éšç§ã€‚
Refererï¼šè¯¥é¡µé¢çš„æ¥æºURLï¼ˆCSRFæ‹¦æˆªå¸¸ç”¨è¯¥å­—æ®µï¼‰ã€‚
User-Agentï¼šç”¨æˆ·å®¢æˆ·ç«¯çš„ä¿¡æ¯ã€‚</code></pre><p>å¸¸ç”¨çš„å“åº”å¤´éƒ¨ï¼š</p>
<pre><code>Access-Control-Allow-Headersï¼šæœåŠ¡å™¨å…è®¸çš„è¯·æ±‚headersã€‚
Access-Control-Allow-Methodsï¼šæœåŠ¡å™¨å…è®¸çš„è¯·æ±‚æ–¹å¼ã€‚
Access-Control-Allow-Methodsï¼šæœåŠ¡å™¨å…è®¸çš„è¯·æ±‚Originå¤´éƒ¨ï¼ˆå¦‚*ï¼‰ã€‚
Content-Typeï¼šæœåŠ¡å™¨è¿”å›çš„å“åº”å†…å®¹å®ä½“çš„ç±»å‹ã€‚
Dateï¼šæ•°æ®ä»æœåŠ¡å™¨è¿”å›çš„æ—¶é—´ã€‚
Cache-Controlï¼šå‘Šè¯‰æµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ï¼Œä»€ä¹ˆç¯å¢ƒå¯ä»¥å®‰å…¨çš„ç¼“å­˜æ–‡æ¡£ã€‚
Last-Modifiedï¼šè¯·æ±‚èµ„æºæœ€åçš„ä¿®æ”¹æ—¶é—´ã€‚
Expiresï¼šå‘Šè¯‰æµè§ˆå™¨åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™æ”¾å¼ƒä½¿ç”¨èµ„æºï¼Œä»è€Œä¸åœ¨ç¼“å­˜å®ƒã€‚
Max-ageï¼šå‘Šè¯‰æµè§ˆå™¨åº”è¯¥ç¼“å­˜å¤šé•¿æ—¶é—´ï¼Œå¼€å¯Cache-Controlæœ‰æ•ˆã€‚
ETagï¼šè¯·æ±‚èµ„æºçš„æ–‡ä»¶æŒ‡çº¹ã€‚
Set-cookieï¼šè®¾ç½®è¯¥é¡µé¢çš„cookieï¼ŒæœåŠ¡å™¨é€šè¿‡è¿™ä¸ªè®¾ç½®æµè§ˆå™¨é¡µé¢çš„cookieã€‚
Keep-Aliveï¼šå¦‚æœæµè§ˆå™¨æœ‰keep-aliveï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¹Ÿæœ‰å¯¹åº”çš„keep-aliveã€‚
Serverï¼šæœåŠ¡å™¨çš„ä¸€äº›ä¿¡æ¯ã€‚</code></pre><p>ä¸€èˆ¬æ¥è¯´ï¼Œè¯·æ±‚å¤´éƒ¨å’Œå“åº”å¤´éƒ¨éƒ½æ˜¯åŒ¹é…åˆ†æçš„<br>å¦‚ï¼šè¯·æ±‚å¤´éƒ¨çš„Acceptè¦å’Œå“åº”å¤´éƒ¨çš„Content-Typeæ˜¯è¦åŒ¹é…çš„ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚<br>å¦‚ï¼šè·¨åŸŸè¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´éƒ¨çš„Originè¦å’Œå“åº”å¤´éƒ¨çš„Access-Control-Allow-OriginåŒ¹é…ï¼Œå¦åˆ™å›æŠ¥è·¨åŸŸé”™è¯¯ã€‚<br>å†æ¯”å¦‚ï¼šç¼“å­˜æ—¶ï¼Œè¯·æ±‚å¤´éƒ¨çš„If-Modified-Sinceå’ŒETagï¼Œè¦ä¸å“åº”å¤´éƒ¨çš„Last-Modifiedå’ŒIf-None-Matchç›¸åŒ¹é…ã€‚</p>
<h4 id="è¯·æ±‚å’Œå“åº”å®ä½“"><a href="#è¯·æ±‚å’Œå“åº”å®ä½“" class="headerlink" title="è¯·æ±‚å’Œå“åº”å®ä½“"></a>è¯·æ±‚å’Œå“åº”å®ä½“</h4><p>httpè¯·æ±‚æ—¶ï¼Œé™¤äº†å¤´éƒ¨ï¼Œè¿˜æœ‰æ¶ˆæ¯å®ä½“ï¼Œä¸€èˆ¬æ¥è¯´<br>è¯·æ±‚å®ä½“ä¸­ä¼šå°†ä¸€äº›éœ€è¦çš„å‚æ•°éƒ½æ”¾å…¥è¿›å…¥ï¼ˆç”¨äºpostè¯·æ±‚ï¼‰ã€‚<br>è­¬å¦‚å®ä½“ä¸­å¯ä»¥æ”¾å‚æ•°çš„åºåˆ—åŒ–å½¢å¼ï¼ˆ<code>a=1&amp;b=2</code>è¿™ç§ï¼‰ï¼Œæˆ–è€…ç›´æ¥æ”¾è¡¨å•å¯¹è±¡ï¼ˆ<code>Form Data</code>å¯¹è±¡ï¼Œä¸Šä¼ æ—¶å¯ä»¥å¤¹æ‚å‚æ•°ä»¥åŠæ–‡ä»¶ï¼‰ï¼Œç­‰ç­‰<br>è€Œä¸€èˆ¬å“åº”å®ä½“ä¸­ï¼Œå°±æ˜¯æ”¾æœåŠ¡ç«¯éœ€è¦ä¼ ç»™å®¢æˆ·ç«¯çš„å†…å®¹<br>ä¸€èˆ¬ç°åœ¨çš„æ¥å£è¯·æ±‚æ—¶ï¼Œå®ä½“ä¸­å°±æ˜¯å¯¹äºçš„ä¿¡æ¯çš„jsonæ ¼å¼ï¼Œè€Œåƒé¡µé¢è¯·æ±‚è¿™ç§ï¼Œé‡Œé¢å°±æ˜¯ç›´æ¥æ”¾äº†ä¸€ä¸ªhtmlå­—ç¬¦ä¸²ï¼Œç„¶åæµè§ˆå™¨è‡ªå·±è§£æå¹¶æ¸²æŸ“ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582102205845-08bbd0a9-cfb7-4e35-951c-3ede3cb2e7bd.png#align=left&display=inline&height=933&name=image.png&originHeight=800&originWidth=596&size=402292&status=done&style=none&width=695" alt="image.png"></p>
<h4 id="cookieåŠç›¸å…³ä¼˜åŒ–"><a href="#cookieåŠç›¸å…³ä¼˜åŒ–" class="headerlink" title="cookieåŠç›¸å…³ä¼˜åŒ–"></a>cookieåŠç›¸å…³ä¼˜åŒ–</h4><p>cookie æ˜¯ä¸€ç§æœ¬åœ°å­˜å‚¨æ–¹å¼ï¼Œä¸»è¦ç”¨äºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šä¿¡ï¼Œå¸¸ç”¨äºéªŒè¯èº«ä»½ï¼Œå’ŒæœåŠ¡ç«¯çš„sessionæ­é…ä½¿ç”¨ã€‚<br>åœºæ™¯å¦‚ä¸‹ï¼ˆç®€è¿°ï¼‰ï¼š</p>
<pre><code>åœ¨ç™»é™†é¡µé¢ï¼Œç”¨æˆ·ç™»é™†äº†
æ­¤æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šç”Ÿæˆä¸€ä¸ªsessionï¼Œsessionä¸­æœ‰å¯¹äºç”¨æˆ·çš„ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·åã€å¯†ç ç­‰ï¼‰
ç„¶åä¼šæœ‰ä¸€ä¸ªsessionidï¼ˆç›¸å½“äºæ˜¯æœåŠ¡ç«¯çš„è¿™ä¸ªsessionå¯¹åº”çš„keyï¼‰
ç„¶åæœåŠ¡ç«¯åœ¨ç™»å½•é¡µé¢ä¸­å†™å…¥cookieï¼Œå€¼å°±æ˜¯:jsessionid=xxx
ç„¶åæµè§ˆå™¨æœ¬åœ°å°±æœ‰è¿™ä¸ªcookieäº†ï¼Œä»¥åè®¿é—®åŒåŸŸåä¸‹çš„é¡µé¢æ—¶ï¼Œè‡ªåŠ¨å¸¦ä¸Šcookieï¼Œè‡ªåŠ¨æ£€éªŒï¼Œåœ¨æœ‰æ•ˆæ—¶é—´å†…æ— éœ€äºŒæ¬¡ç™»é™†</code></pre><p>ä¸Šè¿°å°±æ˜¯cookieçš„å¸¸ç”¨åœºæ™¯ç®€è¿°ï¼ˆå½“ç„¶äº†ï¼Œå®é™…æƒ…å†µä¸‹å¾—è€ƒè™‘æ›´å¤šå› ç´ ï¼‰ã€‚<br>ä¸€èˆ¬æ¥è¯´ï¼Œcookieä¸­æ˜¯ä¸å…è®¸å­˜æ”¾æ•æ„Ÿä¿¡æ¯çš„ï¼Œå¦‚å¸å·ï¼Œå¯†ç ç­‰ã€‚å¦‚æœéè¦å­˜å‚¨ï¼Œä¸€å®šè¦åœ¨cookie ä¸­è¿™åªhttpOnlyï¼Œè¿™æ ·å°±æ— æ³•é€šè¿‡jsæ“ä½œè·å–cookieäº†ã€‚<br>å¦å¤–ï¼Œåœ¨åŒåŸŸåæ“ä½œæ—¶ï¼Œæ€»ä¼šé»˜è®¤å¸¦ä¸Šè¯¥åŸŸåä¸‹æ‰€æœ‰çš„cookieã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œåœ¨æŸäº›åœºæ™¯ä¸­æ˜¯éœ€è¦ä¼˜åŒ–çš„ï¼š</p>
<p>æ¯”å¦‚ä»¥ä¸‹åœºæ™¯ï¼š</p>
<pre><code>å®¢æˆ·ç«¯åœ¨åŸŸåAä¸‹æœ‰cookieï¼ˆè¿™ä¸ªå¯ä»¥æ˜¯ç™»é™†æ—¶ç”±æœåŠ¡ç«¯å†™å…¥çš„ï¼‰
ç„¶ååœ¨åŸŸåAä¸‹æœ‰ä¸€ä¸ªé¡µé¢ï¼Œé¡µé¢ä¸­æœ‰å¾ˆå¤šä¾èµ–çš„é™æ€èµ„æºï¼ˆéƒ½æ˜¯åŸŸåAçš„ï¼Œè­¬å¦‚æœ‰20ä¸ªé™æ€èµ„æºï¼‰
æ­¤æ—¶å°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé¡µé¢åŠ è½½ï¼Œè¯·æ±‚è¿™äº›é™æ€èµ„æºæ—¶ï¼Œæµè§ˆå™¨ä¼šé»˜è®¤å¸¦ä¸Šcookie
ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™20ä¸ªé™æ€èµ„æºçš„httpè¯·æ±‚ï¼Œæ¯ä¸€ä¸ªéƒ½å¾—å¸¦ä¸Šcookieï¼Œè€Œå®é™…ä¸Šé™æ€èµ„æºå¹¶ä¸éœ€è¦cookieéªŒè¯
æ­¤æ—¶å°±é€ æˆäº†è¾ƒä¸ºä¸¥é‡çš„æµªè´¹ï¼Œè€Œä¸”ä¹Ÿé™ä½äº†è®¿é—®é€Ÿåº¦ï¼ˆå› ä¸ºå†…å®¹æ›´å¤šäº†ï¼‰</code></pre><p>é’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸŸåæ‹†åˆ†çš„æ–¹æ¡ˆï¼šå°†é™æ€èµ„æºåˆ†ç»„ï¼Œåˆ†åˆ«å­˜æ”¾åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸­ã€‚<br>è€Œåœ¨ç§»åŠ¨ç«¯ï¼Œå¦‚æœè¯·æ±‚çš„åŸŸåè¿‡å¤šæ—¶ï¼Œä¼šé™ä½è¯·æ±‚é€Ÿåº¦ï¼ˆå› ä¸ºåŸŸåè§£ææ˜¯å¾ˆè€—æ—¶çš„ï¼Œè€Œä¸”ç§»åŠ¨ç«¯çš„å¸¦å®½å¤§éƒ½ä¸å¦‚pcï¼‰ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨dns-prefetchï¼Œè®©æµè§ˆå™¨ç©ºé—²æ—¶æå‰è§£æåŸŸåã€‚<br>å…³äºcookie çš„æ“ä½œå¤§è‡´å¯ä»¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582103208942-51d8603a-aef1-436c-968a-804cff71baa1.png#align=left&display=inline&height=350&name=image.png&originHeight=527&originWidth=800&size=96045&status=done&style=none&width=531" alt="image.png"></p>
<h4 id="gzipå‹ç¼©"><a href="#gzipå‹ç¼©" class="headerlink" title="gzipå‹ç¼©"></a>gzipå‹ç¼©</h4><p>é¦–å…ˆï¼Œæ˜ç¡®<code>gzip</code>æ˜¯ä¸€ç§å‹ç¼©æ ¼å¼ï¼Œéœ€è¦æµè§ˆå™¨æ”¯æŒæ‰æœ‰æ•ˆï¼ˆä¸è¿‡ä¸€èˆ¬ç°åœ¨æµè§ˆå™¨éƒ½æ”¯æŒï¼‰ï¼Œ<br>è€Œä¸”gzipå‹ç¼©æ•ˆç‡å¾ˆå¥½ï¼ˆé«˜è¾¾70%å·¦å³ï¼‰<br>ç„¶ågzipä¸€èˆ¬æ˜¯ç”±<code>apache</code>ã€<code>tomcat</code>ç­‰webæœåŠ¡å™¨å¼€å¯<br>å½“ç„¶æœåŠ¡å™¨é™¤äº†gzipå¤–ï¼Œä¹Ÿè¿˜ä¼šæœ‰å…¶å®ƒå‹ç¼©æ ¼å¼ï¼ˆå¦‚deflateï¼Œæ²¡æœ‰gzipé«˜æ•ˆï¼Œä¸”ä¸æµè¡Œï¼‰<br>æ‰€ä»¥ä¸€èˆ¬åªéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå¼€å¯äº†gzipå‹ç¼©ï¼Œç„¶åä¹‹åçš„è¯·æ±‚å°±éƒ½æ˜¯åŸºäºgzipå‹ç¼©æ ¼å¼çš„ï¼Œ<br>éå¸¸æ–¹ä¾¿ã€‚</p>
<h4 id="é•¿è¿æ¥ä¸çŸ­è¿æ¥"><a href="#é•¿è¿æ¥ä¸çŸ­è¿æ¥" class="headerlink" title="é•¿è¿æ¥ä¸çŸ­è¿æ¥"></a>é•¿è¿æ¥ä¸çŸ­è¿æ¥</h4><p>é¦–å…ˆçœ‹<code>tcp/ip</code>å±‚é¢çš„å®šä¹‰ï¼š</p>
<ul>
<li>é•¿è¿æ¥ï¼šä¸€ä¸ªtcp/ipè¿æ¥ä¸Šå¯ä»¥è¿ç»­å‘é€å¤šä¸ªæ•°æ®åŒ…ï¼Œåœ¨tcpè¿æ¥ä¿æŒæœŸé—´ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®åŒ…å‘é€ï¼Œéœ€è¦åŒæ–¹å‘æ£€æµ‹åŒ…ä»¥ç»´æŒæ­¤è¿æ¥ï¼Œä¸€èˆ¬éœ€è¦è‡ªå·±åšåœ¨çº¿ç»´æŒï¼ˆç±»ä¼¼äºå¿ƒè·³åŒ…ï¼‰</li>
<li>çŸ­è¿æ¥ï¼šé€šä¿¡åŒæ–¹æœ‰æ•°æ®äº¤äº’æ—¶ï¼Œå°±å»ºç«‹ä¸€ä¸ªtcpè¿æ¥ï¼Œæ•°æ®å‘é€å®Œæˆåï¼Œåˆ™æ–­å¼€æ­¤tcpè¿æ¥</li>
</ul>
<p>ç„¶ååœ¨httpå±‚é¢ï¼š</p>
<ul>
<li><code>http1.0</code>ä¸­ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯çŸ­è¿æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæµè§ˆå™¨æ²¡è¿›è¡Œä¸€æ¬¡httpæ“ä½œï¼Œå°±å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œä»»åŠ¡ç»“æŸå°±ä¸­æ–­è¿æ¥ï¼Œè­¬å¦‚æ¯ä¸€ä¸ªé™æ€èµ„æºè¯·æ±‚æ—¶éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¿æ¥</li>
<li>http1.1èµ·ï¼Œé»˜è®¤ä½¿ç”¨é•¿è¿æ¥ï¼Œä½¿ç”¨é•¿è¿æ¥ä¼šæœ‰è¿™ä¸€è¡Œ<code>Connection: keep-alive</code>ï¼Œåœ¨é•¿è¿æ¥çš„æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç½‘é¡µæ‰“å¼€å®Œæˆåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´ç”¨äºä¼ è¾“httpçš„tcpè¿æ¥ä¸ä¼šå…³é—­ï¼Œå¦‚æœå®¢æˆ·ç«¯å†æ¬¡è®¿é—®è¿™ä¸ªæœåŠ¡å™¨çš„é¡µé¢ï¼Œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸€æ¡å·²ç»å»ºç«‹çš„è¿æ¥ã€‚</li>
</ul>
<p>æ³¨æ„ï¼š <strong>keep-aliveä¸ä¼šæ°¸è¿œä¿æŒï¼Œå®ƒæœ‰ä¸€ä¸ªæŒç»­æ—¶é—´ï¼Œä¸€èˆ¬åœ¨æœåŠ¡å™¨ä¸­é…ç½®ï¼ˆå¦‚apacheï¼‰ï¼Œå¦å¤–é•¿è¿æ¥éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æ”¯æŒæ—¶æ‰æœ‰æ•ˆã€‚</strong></p>
<h4 id="http2-0"><a href="#http2-0" class="headerlink" title="http2.0"></a>http2.0</h4><p>http2.0ä¸æ˜¯httpsï¼Œå®ƒæ˜¯httpçš„ä¸‹ä¸€ä»£è§„èŒƒã€‚<br>ç®€è¿°ä¸€ä¸‹http2.0å’Œhttp1.1çš„åŒºåˆ«ï¼š</p>
<ul>
<li>http1.1ä¸­ï¼Œæ¯è¯·æ±‚ä¸€ä¸ªèµ„æºï¼Œéƒ½éœ€è¦æ–°å¼€ä¸€ä¸ªtcp/ipè¿æ¥ï¼Œæ‰€ä»¥å¯¹åº”çš„ç»“æœå°±æ˜¯æ¯ä¸€ä¸ªèµ„æºéƒ½å ç”¨ä¸€ä¸ªtcp/ipè¯·æ±‚ï¼Œè€Œtcp/ipè¯·æ±‚å¹¶å‘æ•°é‡æ˜¯æœ‰é™åˆ¶çš„ï¼Œå½“è¯·æ±‚èµ„æºæ•°é‡ä¸€å¤šï¼Œè¯·æ±‚é€Ÿåº¦å°±ä¼šæ…¢ä¸‹æ¥ã€‚</li>
<li>http2.0ä¸­ï¼Œä¸€ä¸ªtcp/ipè¯·æ±‚å¯ä»¥è¯·æ±‚å¤šä¸ªèµ„æºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ä¸€æ¬¡tcp/ipè¯·æ±‚ï¼Œå°±å¯ä»¥è¯·æ±‚è¯ºå¹²ä¸ªèµ„æºï¼Œåˆ†å‰²æˆæ›´å°çš„å¸§è¯·æ±‚ï¼Œé€Ÿåº¦ä¼šæœ‰æ˜¾è‘—æå‡ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œå¦‚æœhttp2.0å¾—åˆ°å…¨é¢çš„ä½¿ç”¨ï¼Œé‚£ä¹ˆhttp1.1ä¸­çš„å¾ˆå¤šä¼˜åŒ–æ‰‹æ®µå°±ä¸å¿…åœ¨ä½¿ç”¨äº†ï¼Œæ¯”å¦‚ï¼šä½¿ç”¨é›ªç¢§å›¾ï¼Œé™æ€èµ„æºå¤šåŸŸåæ‹†åˆ†ç­‰ã€‚<br>http2.0çš„ç‰¹æ€§ï¼š</p>
<ol>
<li>å¤šè·¯å¤ç”¨ï¼ˆå³ä¸€ä¸ªtcp/ipè¯·æ±‚å¯ä»¥è¯·æ±‚å¤šä¸ªèµ„æºï¼‰ã€‚</li>
<li>é¦–éƒ¨å‹ç¼©ï¼ˆhttpå¤´éƒ¨å‹ç¼©ï¼Œå‡å°‘ä½“ç§¯ï¼‰ã€‚</li>
<li>äºŒè¿›åˆ¶åˆ†å¸§ï¼ˆåœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚ä½¿ç”¨äºŒè¿›åˆ¶åˆ†å¸§ï¼Œæ”¹å–„ä¼ è¾“æ€§èƒ½ï¼Œå®ç°ä½å»¶è¿Ÿå’Œé«˜ååé‡ï¼‰ã€‚</li>
<li>æœåŠ¡å™¨æ¨é€ï¼ˆæœåŠ¡ç«¯å¯ä»¥å¯¹å®¢æˆ·ç«¯çš„ä¸€ä¸ªè¯·æ±‚å‘å‡ºå¤šä¸ªå“åº”ï¼Œå¯ä»¥ä¸»åŠ¨é€šçŸ¥å®¢æˆ·ç«¯ï¼‰ã€‚</li>
<li>è¯·æ±‚ä¼˜å…ˆçº§ï¼ˆå¦‚æœæµè¢«èµ‹äºˆäº†ä¼˜å…ˆçº§ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šåŸºäºè¿™ä¸ªä¼˜å…ˆçº§è¢«å¤„ç†ï¼Œä¸”ç”±æœåŠ¡å™¨å†³å®šä½¿ç”¨å¤šå°‘èµ„æºæ¥å¤„ç†è¿™ä¸ªæµï¼‰ã€‚</li>
</ol>
<h4 id="https"><a href="#https" class="headerlink" title="https"></a>https</h4><p>httpsæ˜¯å®‰å…¨ç‰ˆæœ¬çš„httpã€‚è­¬å¦‚ä¸€äº›æ”¯ä»˜ç­‰æ“ä½œéƒ½æ˜¯åŸºäºhttpsçš„ï¼Œhttpçš„å®‰å…¨æ€§å¤ªä½ã€‚<br>ç®€å•æ¥è¯´ï¼Œhttpså’Œhttpçš„åŒºåˆ«å°±æ˜¯åœ¨è¯·æ±‚å»ºç«‹è¿æ¥ä¹‹å‰ï¼Œå…ˆå»ºç«‹sslè¿æ¥ï¼Œç¡®ä¿ä¹‹åçš„é€šä¿¡éƒ½æ˜¯åŠ å¯†çš„ï¼Œæ— æ³•è¢«è½»æ˜“æˆªå–åˆ†æã€‚<br>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœè¦å°†ç½‘ç«™å‡çº§æˆhttpsï¼Œéœ€è¦åç«¯æ”¯æŒï¼ˆåç«¯éœ€è¦ç”³è¯·è¯ä¹¦ç­‰ï¼‰ï¼Œç„¶åhttpsçš„å¼€é”€ä¹Ÿæ¯”httpè¦å¤§ï¼ˆå› ä¸ºéœ€è¦é¢å¤–å»ºç«‹å®‰å…¨é“¾æ¥ä»¥åŠåŠ å¯†ç­‰ï¼‰ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥è¯´http2.0é…åˆhttpsçš„ä½“éªŒæ›´ä½³ï¼ˆå› ä¸ºhttp2.0æ›´å¿«äº†ï¼‰ã€‚</p>
<pre><code>1ã€æµè§ˆå™¨è¯·æ±‚å»ºç«‹SSLé“¾æ¥ï¼Œå¹¶å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ªéšæœºæ•°â€“Client randomå’Œå®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†æ–¹æ³•ï¼Œæ¯”å¦‚RSAåŠ å¯†ï¼Œæ­¤æ—¶æ˜¯æ˜æ–‡ä¼ è¾“ã€‚ 

2. æœåŠ¡ç«¯ä»ä¸­é€‰å‡ºä¸€ç»„åŠ å¯†ç®—æ³•ä¸Hashç®—æ³•ï¼Œå›å¤ä¸€ä¸ªéšæœºæ•°â€“Server randomï¼Œå¹¶å°†è‡ªå·±çš„èº«ä»½ä¿¡æ¯ä»¥è¯ä¹¦çš„å½¢å¼å‘å›ç»™æµè§ˆå™¨
ï¼ˆè¯ä¹¦é‡ŒåŒ…å«äº†ç½‘ç«™åœ°å€ï¼Œéå¯¹ç§°åŠ å¯†çš„å…¬é’¥ï¼Œä»¥åŠè¯ä¹¦é¢å‘æœºæ„ç­‰ä¿¡æ¯ï¼‰

3. æµè§ˆå™¨æ”¶åˆ°æœåŠ¡ç«¯çš„è¯ä¹¦å

    - éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§ï¼ˆé¢å‘æœºæ„æ˜¯å¦åˆæ³•ï¼Œè¯ä¹¦ä¸­åŒ…å«çš„ç½‘å€æ˜¯å¦å’Œæ­£åœ¨è®¿é—®çš„ä¸€æ ·ï¼‰ï¼Œå¦‚æœè¯ä¹¦ä¿¡ä»»ï¼Œåˆ™æµè§ˆå™¨ä¼šæ˜¾ç¤ºä¸€ä¸ªå°é”å¤´ï¼Œå¦åˆ™ä¼šæœ‰æç¤º

    - ç”¨æˆ·æ¥æ”¶è¯ä¹¦åï¼ˆä¸ç®¡ä¿¡ä¸ä¿¡ä»»ï¼‰ï¼Œæµè§ˆä¼šç”Ÿäº§æ–°çš„éšæœºæ•°â€“Premaster secretï¼Œç„¶åè¯ä¹¦ä¸­çš„å…¬é’¥ä»¥åŠæŒ‡å®šçš„åŠ å¯†æ–¹æ³•åŠ å¯†`Premaster secret`ï¼Œå‘é€ç»™æœåŠ¡å™¨ã€‚

    - åˆ©ç”¨Client randomã€Server randomå’ŒPremaster secreté€šè¿‡ä¸€å®šçš„ç®—æ³•ç”ŸæˆHTTPé“¾æ¥æ•°æ®ä¼ è¾“çš„å¯¹ç§°åŠ å¯†key-`session key`

    - ä½¿ç”¨çº¦å®šå¥½çš„HASHç®—æ³•è®¡ç®—æ¡æ‰‹æ¶ˆæ¯ï¼Œå¹¶ä½¿ç”¨ç”Ÿæˆçš„`session key`å¯¹æ¶ˆæ¯è¿›è¡ŒåŠ å¯†ï¼Œæœ€åå°†ä¹‹å‰ç”Ÿæˆçš„æ‰€æœ‰ä¿¡æ¯å‘é€ç»™æœåŠ¡ç«¯ã€‚ 

4. æœåŠ¡ç«¯æ”¶åˆ°æµè§ˆå™¨çš„å›å¤

    - åˆ©ç”¨å·²çŸ¥çš„åŠ è§£å¯†æ–¹å¼ä¸è‡ªå·±çš„ç§é’¥è¿›è¡Œè§£å¯†ï¼Œè·å–`Premaster secret`

    - å’Œæµè§ˆå™¨ç›¸åŒè§„åˆ™ç”Ÿæˆ`session key`

    - ä½¿ç”¨`session key`è§£å¯†æµè§ˆå™¨å‘æ¥çš„æ¡æ‰‹æ¶ˆæ¯ï¼Œå¹¶éªŒè¯Hashæ˜¯å¦ä¸æµè§ˆå™¨å‘æ¥çš„ä¸€è‡´

    - ä½¿ç”¨`session key`åŠ å¯†ä¸€æ®µæ¡æ‰‹æ¶ˆæ¯ï¼Œå‘é€ç»™æµè§ˆå™¨

5. æµè§ˆå™¨è§£å¯†å¹¶è®¡ç®—æ¡æ‰‹æ¶ˆæ¯çš„HASHï¼Œå¦‚æœä¸æœåŠ¡ç«¯å‘æ¥çš„HASHä¸€è‡´ï¼Œæ­¤æ—¶æ¡æ‰‹è¿‡ç¨‹ç»“æŸã€‚</code></pre><p><strong>ä¹‹åæ‰€æœ‰çš„httpsé€šä¿¡æ•°æ®å°†ç”±ä¹‹å‰æµè§ˆå™¨ç”Ÿæˆçš„<code>session key</code>å¹¶åˆ©ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†ã€‚</strong><br><strong><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582123727413-3e3bbc49-a819-4229-8174-4bdcc8ced04b.png#align=left&display=inline&height=712&name=image.png&originHeight=773&originWidth=760&size=172844&status=done&style=none&width=700" alt="image.png"></strong></p>
<p><strong>å›¾ç‰‡æ¥æºäºé˜®ä¸€å³°çš„<a href="http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html" target="_blank" rel="noopener">å›¾è§£SSL/TSLåè®®</a></strong></p>
<h3 id="httpç¼“å­˜"><a href="#httpç¼“å­˜" class="headerlink" title="httpç¼“å­˜"></a>httpç¼“å­˜</h3><p>ç¼“å­˜å¯ä»¥è¢«ç®€å•çš„åˆ’åˆ†ä¸ºä¸¤ç±»ï¼šå¼ºç¼“å­˜ï¼ˆ200 from cacheï¼‰å’Œåå•†ç¼“å­˜ï¼ˆ304ï¼‰ã€‚<br>åŒºåˆ«ï¼š</p>
<ul>
<li>å¼ºç¼“å­˜ï¼šå¦‚æœæµè§ˆå™¨åˆ¤æ–­æœ¬åœ°ç¼“å­˜æœªè¿‡æœŸçš„æ—¶å€™ï¼Œå°†ä¼šç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œä¸ä¼šå‘èµ·è¯·æ±‚ã€‚</li>
<li>åå•†ç¼“å­˜ï¼šæµè§ˆå™¨ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œåœ¨è¯·æ±‚å¤´éƒ¨æºå¸¦èµ„æºæ–‡ä»¶çš„ç¼“å­˜ä¿¡æ¯ï¼Œå¦‚If-Modified-Sinceã€ETagç­‰ï¼Œç”±æœåŠ¡å™¨ç«¯åˆ¤æ–­ï¼Œèµ„æºè‡ªä»ä¸Šæ¬¡è®¿é—®æ˜¯å¦å‘ç”Ÿè¿‡å˜æ›´ï¼Œå¦‚æœå‘ç”Ÿè¿‡å˜æ›´ï¼Œåˆ™è¿”å›çŠ¶æ€ç 200ï¼Œå¹¶å°†æ–°çš„èµ„æºæ–‡ä»¶å’Œç¼“å­˜è§„åˆ™è¿”å›ï¼›å¦‚æœæœªå˜æ›´ï¼Œè¿”å›304çŠ¶æ€ç ï¼Œå‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚</li>
</ul>
<h4 id="ç¼“å­˜å¤´éƒ¨æ¦‚è¿°"><a href="#ç¼“å­˜å¤´éƒ¨æ¦‚è¿°" class="headerlink" title="ç¼“å­˜å¤´éƒ¨æ¦‚è¿°"></a>ç¼“å­˜å¤´éƒ¨æ¦‚è¿°</h4><p>ä¸Šé¢æåˆ°çš„å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯å¦‚ä½•è¿›è¡ŒåŒºåˆ†çš„å‘¢ï¼Ÿ<br>ç­”æ¡ˆæ˜¯é€šè¿‡ä¸åŒçš„httpå¤´éƒ¨æ§åˆ¶ã€‚<br>è¿™é‡Œåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„ç¼“å­˜å¤´éƒ¨ï¼š<br>ç”¨äºå¼ºç¼“å­˜æ§åˆ¶çš„ï¼š</p>
<ul>
<li>http1.0: Pragma/Expires</li>
<li>http1.1: Cache-Control/Max-Age</li>
</ul>
<p>æ³¨æ„ï¼š<strong><code>Max-Age</code>ä¸æ˜¯ä¸€ä¸ªå¤´éƒ¨ï¼Œå®ƒæ˜¯<code>Cache-Control</code>å¤´éƒ¨çš„å€¼ã€‚</strong></p>
<p>ç”¨äºåå•†ç¼“å­˜æ§åˆ¶çš„ï¼š</p>
<ul>
<li>http1.0: Last-Modified/If-Modified-Since</li>
<li>http1.1ï¼šE-tag/If-None-Match</li>
</ul>
<p>å†æä¸€ç‚¹ï¼Œå…¶å®HTMLé¡µé¢ä¸­ä¹Ÿæœ‰ä¸€ä¸ªmetaæ ‡ç­¾å¯ä»¥æ§åˆ¶ç¼“å­˜æ–¹æ¡ˆ-<code>Pragma</code></p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>META</span> <span class="token attr-name">HTTP-EQUIV</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Pragma<span class="token punctuation">"</span></span> <span class="token attr-name">CONTENT</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>no-cache<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
<p>ä¸è¿‡ï¼Œè¿™ç§æ–¹æ¡ˆè¿˜æ˜¯æ¯”è¾ƒå°‘ç”¨åˆ°ï¼Œå› ä¸ºæ”¯æŒæƒ…å†µä¸ä½³ï¼Œè­¬å¦‚ç¼“å­˜ä»£ç†æœåŠ¡å™¨è‚¯å®šä¸æ”¯æŒï¼Œæ‰€ä»¥ä¸æ¨èã€‚</p>
<h4 id="å¤´éƒ¨çš„åŒºåˆ«"><a href="#å¤´éƒ¨çš„åŒºåˆ«" class="headerlink" title="å¤´éƒ¨çš„åŒºåˆ«"></a>å¤´éƒ¨çš„åŒºåˆ«</h4><h5 id="http1-0çš„ç¼“å­˜æ§åˆ¶"><a href="#http1-0çš„ç¼“å­˜æ§åˆ¶" class="headerlink" title="http1.0çš„ç¼“å­˜æ§åˆ¶"></a>http1.0çš„ç¼“å­˜æ§åˆ¶</h5><ul>
<li>Pragmaï¼šä¸¥æ ¼æ¥è¯´ï¼Œå®ƒä¸å±äºä¸“é—¨çš„ç¼“å­˜æ§åˆ¶å¤´éƒ¨ï¼Œä½†æ˜¯å®ƒè®¾ç½®<code>no-cache</code>æ—¶å¯ä»¥è®©æœ¬åœ°å¼ºç¼“å­˜å¤±æ•ˆï¼ˆå±äºç¼–è¯‘æ§åˆ¶ï¼Œæ¥å®ç°ç‰¹å®šçš„æŒ‡ä»¤ï¼Œä¸»è¦æ˜¯å› ä¸ºå…¼å®¹http1.0ï¼Œæ‰€ä»¥ä»¥å‰åˆè¢«å¤§é‡åº”ç”¨ï¼‰ã€‚</li>
<li>Expiresï¼šæœåŠ¡ç«¯é…ç½®çš„ï¼Œå±äºå¼ºç¼“å­˜ï¼Œåœ¨è§„å®šçš„æ—¶é—´ä¹‹å‰ï¼Œæµè§ˆå™¨ç«¯ä¸ä¼šå‘èµ·è¯·æ±‚ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚æ³¨æ„ï¼ŒExpiresä¸€èˆ¬å¯¹åº”æœåŠ¡å™¨ç«¯æ—¶é—´ï¼Œå¦‚<code>Expiresï¼šFri, 30 Oct 1998 14:19:41</code>ã€‚</li>
<li>If-Modified-Since/Last-Modifiedï¼šè¿™ä¸¤ä¸ªæ˜¯æˆå †å‡ºç°çš„ï¼Œå±äºåå•†ç¼“å­˜çš„å†…å®¹ã€‚å…¶ä¸­å±äºæµè§ˆå™¨çš„å¤´éƒ¨å†…å®¹æ˜¯<code>If-Modified-Since</code>ï¼Œè€Œå±äºæœåŠ¡ç«¯çš„æ˜¯<code>Last-Modified</code>ã€‚å®ƒçš„ä½œç”¨æ˜¯ï¼Œå½“æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œå¦‚æœäºŒè€…åŒ¹é…ï¼Œåˆ™è¯´æ˜æœåŠ¡ç«¯èµ„æºæœªæ”¹å˜ï¼Œå¯ä»¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œåªè¿”å›å¤´éƒ¨ï¼ŒçŠ¶æ€ç 304ã€‚</li>
</ul>
<h5 id="http1-1çš„ç¼“å­˜æ§åˆ¶"><a href="#http1-1çš„ç¼“å­˜æ§åˆ¶" class="headerlink" title="http1.1çš„ç¼“å­˜æ§åˆ¶"></a>http1.1çš„ç¼“å­˜æ§åˆ¶</h5><ul>
<li>Cache-Controlï¼šç¼“å­˜æ§åˆ¶å¤´éƒ¨ï¼Œå±äºå¼ºç¼“å­˜ï¼Œæœ‰no-cacheã€max-ageç­‰å¤šä¸ªå€¼ã€‚</li>
<li>Max-Ageï¼šæœåŠ¡ç«¯é…ç½®çš„ï¼Œç”¨æ¥æ§åˆ¶å¼ºç¼“å­˜ï¼Œåœ¨è§„å®šçš„æ—¶é—´ä¹‹å†…ï¼Œæµè§ˆå™¨æ— éœ€å‘å‡ºè¯·æ±‚ï¼Œç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œæ³¨æ„ï¼ŒMax-Ageæ˜¯Cache-Controlå¤´éƒ¨çš„å€¼ï¼Œä¸æ˜¯ç‹¬ç«‹çš„å¤´éƒ¨ï¼Œè­¬å¦‚<code>Cache-Control: max-age=3600</code>ï¼Œè€Œä¸”å®ƒå€¼å¾—æ˜¯ç»å¯¹æ—¶é—´ï¼Œç”±æµè§ˆå™¨è‡ªå·±è®¡ç®—ã€‚</li>
<li>If-None-Match/E-tagï¼šè¿™ä¸¤ä¸ªæ˜¯æˆå¯¹å‡ºç°çš„ï¼Œå±äºåå•†ç¼“å­˜çš„å†…å®¹ï¼Œå…¶ä¸­æµè§ˆå™¨çš„å¤´éƒ¨æ˜¯<code>If-None-Match</code>ï¼Œè€ŒæœåŠ¡ç«¯çš„æ˜¯<code>E-tag</code>ï¼ŒåŒæ ·ï¼Œå‘å‡ºè¯·æ±‚åï¼Œå¦‚æœ<code>If-None-Match</code>å’Œ<code>E-tag</code>åŒ¹é…ï¼Œåˆ™ä»£è¡¨å†…å®¹æœªå˜ï¼Œé€šçŸ¥æµè§ˆå™¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œå’ŒLast-Modifiedä¸åŒï¼ŒE-tagæ›´ç²¾ç¡®ï¼Œå®ƒæ˜¯ç±»ä¼¼äºæŒ‡çº¹ä¸€æ ·çš„ä¸œè¥¿ï¼ŒåŸºäºFileEtag INode Mtime Sizeç”Ÿæˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ–‡ä»¶å˜ï¼ŒæŒ‡çº¹å°±ä¼šå˜ï¼Œè€Œä¸”æ²¡æœ‰1sç²¾ç¡®åº¦çš„é™åˆ¶ã€‚</li>
</ul>
<h4 id="Max-Ageå’ŒExpires"><a href="#Max-Ageå’ŒExpires" class="headerlink" title="Max-Ageå’ŒExpires"></a>Max-Ageå’ŒExpires</h4><p>Expiresä½¿ç”¨çš„æ˜¯æœåŠ¡å™¨ç«¯çš„æ—¶é—´<br>ä½†æ˜¯æœ‰æ—¶å€™ä¼šæœ‰è¿™æ ·ä¸€ç§æƒ…å†µ-å®¢æˆ·ç«¯æ—¶é—´å’ŒæœåŠ¡ç«¯ä¸åŒæ­¥<br>é‚£è¿™æ ·ï¼Œå¯èƒ½å°±ä¼šå‡ºé—®é¢˜äº†ï¼Œé€ æˆäº†æµè§ˆå™¨æœ¬åœ°çš„ç¼“å­˜æ— ç”¨æˆ–è€…ä¸€ç›´æ— æ³•è¿‡æœŸ<br>æ‰€ä»¥ä¸€èˆ¬http1.1åä¸æ¨èä½¿ç”¨<code>Expires</code><br>è€Œ<code>Max-Age</code>ä½¿ç”¨çš„æ˜¯å®¢æˆ·ç«¯æœ¬åœ°æ—¶é—´çš„è®¡ç®—ï¼Œå› æ­¤ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜<br>å› æ­¤æ¨èä½¿ç”¨<code>Max-Age</code>ã€‚<br>æ³¨æ„ï¼Œå¦‚æœåŒæ—¶å¯ç”¨äº†<code>Cache-Control</code>ä¸<code>Expires</code>ï¼Œ<code>Cache-Control</code>ä¼˜å…ˆçº§é«˜ã€‚</p>
<h4 id="E-tagå’ŒLast-Modified"><a href="#E-tagå’ŒLast-Modified" class="headerlink" title="E-tagå’ŒLast-Modified"></a>E-tagå’ŒLast-Modified</h4><p><code>Last-Modified</code>ï¼š</p>
<ul>
<li>è¡¨æ˜æœåŠ¡ç«¯çš„æ–‡ä»¶æœ€åä½•æ—¶æ”¹å˜çš„</li>
<li>å®ƒæœ‰ä¸€ä¸ªç¼ºé™·å°±æ˜¯åªèƒ½ç²¾ç¡®åˆ°1sï¼Œ</li>
<li>ç„¶åè¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯æœ‰çš„æœåŠ¡ç«¯çš„æ–‡ä»¶ä¼šå‘¨æœŸæ€§çš„æ”¹å˜ï¼Œå¯¼è‡´ç¼“å­˜å¤±æ•ˆ</li>
</ul>
<p>è€Œ<code>E-tag</code>ï¼š</p>
<ul>
<li>æ˜¯ä¸€ç§æŒ‡çº¹æœºåˆ¶ï¼Œä»£è¡¨æ–‡ä»¶ç›¸å…³æŒ‡çº¹</li>
<li>åªæœ‰æ–‡ä»¶å˜æ‰ä¼šå˜ï¼Œä¹Ÿåªè¦æ–‡ä»¶å˜å°±ä¼šå˜ï¼Œ</li>
<li>ä¹Ÿæ²¡æœ‰ç²¾ç¡®æ—¶é—´çš„é™åˆ¶ï¼Œåªè¦æ–‡ä»¶ä¸€éï¼Œç«‹é©¬E-tagå°±ä¸ä¸€æ ·äº†</li>
</ul>
<p>å¦‚æœåŒæ—¶å¸¦æœ‰<code>E-tag</code>å’Œ<code>Last-Modified</code>ï¼ŒæœåŠ¡ç«¯ä¼šä¼˜å…ˆæ£€æŸ¥<code>E-tag</code>ã€‚<br>å„å¤§ç¼“å­˜å¤´éƒ¨çš„æ•´ä½“å…³ç³»å¦‚ä¸‹å›¾ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582125780799-6c37f8c2-f017-437c-b0a1-5883bc52f640.png#align=left&display=inline&height=361&name=image.png&originHeight=487&originWidth=800&size=56724&status=done&style=none&width=593" alt="image.png"></p>
<h2 id="è§£æé¡µé¢"><a href="#è§£æé¡µé¢" class="headerlink" title="è§£æé¡µé¢"></a>è§£æé¡µé¢</h2><p>å‰é¢æœ‰æåˆ°httpäº¤äº’ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯æµè§ˆå™¨è·å–åˆ°htmlï¼Œç„¶åè§£æï¼Œæ¸²æŸ“ã€‚</p>
<h3 id="æµç¨‹ç®€è¿°"><a href="#æµç¨‹ç®€è¿°" class="headerlink" title="æµç¨‹ç®€è¿°"></a>æµç¨‹ç®€è¿°</h3><p>æµè§ˆå™¨å†…æ ¸æ‹¿åˆ°å†…å®¹åï¼Œæ¸²æŸ“æ­¥éª¤å¤§è‡´åˆ†ä¸ºä¸€ä¸‹å‡ æ­¥ï¼š</p>
<pre><code>1ã€è§£æHTMLï¼Œæ„å»ºDOM Tree
2ã€è§£æCSSï¼Œæ„å»ºCSS Rules Tree
3ã€åˆå¹¶DOM Tree å’Œ CSS Rules Treeï¼ˆå…¶å®æ˜¯å°†CSS Rules Treeé™„åœ¨DOM Treeä¹‹ä¸Šï¼‰ï¼Œç”Ÿæˆrender Treeã€‚
4ã€å¸ƒå±€äººçš„äºº Treeï¼ˆLayout/reflowï¼‰ï¼Œè´Ÿè´£è®¡ç®—å„å…ƒç´ çš„å°ºå¯¸å’Œä½ç½®çš„è®¡ç®—ã€‚
5ã€ç»˜åˆ¶render Treeï¼ˆpaintï¼‰ï¼Œç»˜åˆ¶é¡µé¢åƒç´ ä¿¡æ¯ã€‚
6ã€æµè§ˆå™¨å°†å„å±‚çš„ä¿¡æ¯å‘é€ç»™GPUï¼Œç”±GPUå°†å„å±‚åˆå±‚ï¼ˆcompositeï¼‰ï¼Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</code></pre><p>å¦‚ä¸‹å›¾ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582126229278-a9a28d86-1240-46bc-b731-9159edea5de0.png#align=left&display=inline&height=290&name=image.png&originHeight=313&originWidth=800&size=59355&status=done&style=none&width=741" alt="image.png"></p>
<h3 id="HTMLè§£æ-æ„å»ºDOM"><a href="#HTMLè§£æ-æ„å»ºDOM" class="headerlink" title="HTMLè§£æ æ„å»ºDOM"></a>HTMLè§£æ æ„å»ºDOM</h3><p>æ•´ä¸ªæ¸²æŸ“æ­¥éª¤ä¸­ï¼ŒHTMLè§£ææ˜¯ç¬¬ä¸€æ­¥ã€‚<br>ç®€å•çš„ç†è§£ï¼Œè¿™ä¸€æ­¥çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š<strong>æµè§ˆå™¨è§£æHTMLï¼Œæ„å»ºDOMæ ‘ã€‚</strong><br>ä½†å®é™…ä¸Šï¼Œåœ¨åˆ†ææ•´ä½“æ„å»ºæ—¶ï¼Œå´ä¸èƒ½ä¸€ç¬”å¸¦è¿‡ï¼Œå¾—ç¨å¾®å±•å¼€ã€‚<br>è§£æHTMLåˆ°æ„å»ºå‡ºDOMå½“ç„¶è¿‡ç¨‹å¯ä»¥ç®€è¿°å¦‚ä¸‹ï¼š<br><code>Bytes â†’ characters â†’ tokens â†’ nodes â†’ DOM</code><br>è­¬å¦‚å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªHTMLé¡µé¢ï¼šï¼ˆä»¥ä¸‹éƒ¨åˆ†çš„å†…å®¹å‡ºè‡ªå‚è€ƒæ¥æºï¼Œä¿®æ”¹äº†ä¸‹æ ¼å¼ï¼‰</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width,initial-scale<span class="token punctuation">=</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>style.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Critical Path<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Hello <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>web performance<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> students!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>awesome-photo.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<p>æµè§ˆå™¨çš„å¤„ç†å¦‚ä¸‹ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582126699954-e7997952-47cc-42bd-a124-17b5228a4008.png#align=left&display=inline&height=393&name=image.png&originHeight=443&originWidth=800&size=156787&status=done&style=none&width=709" alt="image.png"><br>åˆ—ä¸¾å…¶ä¸­çš„ä¸€äº›é‡ç‚¹è¿‡ç¨‹ï¼š</p>
<ol>
<li>Conversionè½¬æ¢ï¼šæµè§ˆå™¨å°†è·å¾—çš„HTMLå†…å®¹ï¼ˆBytesï¼‰åŸºäºå®ƒçš„ç¼–ç æ ¼å¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</li>
<li>Tokeizingåˆ†è¯ï¼šæµè§ˆå™¨æŒ‰ç…§HTMLè§„èŒƒå°†è¿™äº›å­—ç¬¦ä¸²è½¬æ¢æœªä¸åŒçš„æ ‡è®°tokenï¼Œæ¯ä¸€ä¸ªtokenéƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„å«ä¹‰å’Œè§„åˆ™ã€‚</li>
<li>Lexingè¯æ³•åˆ†æï¼šåˆ†è¯çš„ç»“æœå°±æ˜¯è·å¾—ä¸€å †tokenï¼Œæ­¤æ—¶å°†ä»–ä»¬è½¬æ¢ä¸ºå¯¹è±¡ï¼Œä¸ºä»–ä»¬å®šä¹‰å®ƒä»¬çš„å±æ€§å’Œè§„åˆ™ã€‚</li>
<li>DOMæ„å»ºï¼šå› ä¸ºHTMLæ ‡è®°çš„å°±æ˜¯ä¸åŒæ ‡ç­¾ä¹‹é—´çš„å…³ç³»ï¼Œè¿™ä¸ªå…³ç³»å°±åƒæ ‘å½¢ç»“æ„ä¸€æ ·ã€‚</li>
</ol>
<p>æœ€ç»ˆçš„DOMæ ‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582127390688-259012c7-ea28-4f28-979c-3038be4bbeae.png#align=left&display=inline&height=302&name=image.png&originHeight=284&originWidth=665&size=80041&status=done&style=none&width=707" alt="image.png"></p>
<h3 id="ç”ŸæˆCSSè§„åˆ™"><a href="#ç”ŸæˆCSSè§„åˆ™" class="headerlink" title="ç”ŸæˆCSSè§„åˆ™"></a>ç”ŸæˆCSSè§„åˆ™</h3><p>åŒç†ï¼ŒCSSè§„åˆ™æ ‘çš„ç”Ÿæˆä¹Ÿæ˜¯ç±»ä¼¼ã€‚ç®€è¿°ä¸ºï¼š<br><code>Bytes â†’ characters â†’ tokens â†’ nodes â†’ CSSOM</code>ã€‚</p>
<pre><code>body { font-size: 16px }
p { font-weight: bold }
span { color: red }
p span { display: none }
img { float: right }</code></pre><p>æœ€ç»ˆç”Ÿæˆçš„CSS Rules Treeï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582127478001-17abbd25-fe2f-4132-bdf9-512c64f7edd7.png#align=left&display=inline&height=345&name=image.png&originHeight=299&originWidth=582&size=78490&status=done&style=none&width=671" alt="image.png"></p>
<h3 id="æ„å»ºæ¸²æŸ“æ ‘"><a href="#æ„å»ºæ¸²æŸ“æ ‘" class="headerlink" title="æ„å»ºæ¸²æŸ“æ ‘"></a>æ„å»ºæ¸²æŸ“æ ‘</h3><p>å½“DOMæ ‘å’ŒCSSOMéƒ½æœ‰äº†åï¼Œå°±è¦å¼€å§‹æ„å»ºæ¸²æŸ“æ ‘äº†<br>ä¸€èˆ¬æ¥è¯´ï¼Œæ¸²æŸ“æ ‘å’ŒDOMæ ‘ç›¸å¯¹åº”çš„ï¼Œä½†ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„ä¸€ä¸€å¯¹åº”<br>å› ä¸ºæœ‰ä¸€äº›ä¸å¯è§çš„DOMå…ƒç´ ä¸ä¼šæ’å…¥åˆ°æ¸²æŸ“æ ‘ä¸­ï¼Œå¦‚headè¿™ç§ä¸å¯è§çš„æ ‡ç­¾æˆ–è€…<code>display: none</code>ç­‰<br>æ•´ä½“æ¥è¯´å¯ä»¥çœ‹å›¾ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582127519945-fb1dc7a5-a137-4ce5-8051-37574d82a1eb.png#align=left&display=inline&height=326&name=image.png&originHeight=373&originWidth=800&size=163504&status=done&style=none&width=699" alt="image.png"></p>
<h3 id="æ¸²æŸ“"><a href="#æ¸²æŸ“" class="headerlink" title="æ¸²æŸ“"></a>æ¸²æŸ“</h3><p>æœ‰äº†renderæ ‘ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¼€å§‹æ¸²æŸ“ï¼ŒåŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582127560548-6cd4e861-a923-4f9f-928e-8688ee6244e5.png#align=left&display=inline&height=194&name=image.png&originHeight=220&originWidth=800&size=171754&status=done&style=none&width=707" alt="image.png"></p>
<p>å›¾ä¸­é‡è¦çš„å››ä¸ªæ­¥éª¤å°±æ˜¯ï¼š</p>
<pre><code>1. è®¡ç®—CSSæ ·å¼
2. æ„å»ºæ¸²æŸ“æ ‘
3. å¸ƒå±€ï¼Œä¸»è¦å®šä½åæ ‡å’Œå¤§å°ï¼Œæ˜¯å¦æ¢è¡Œï¼Œå„ç§position overflow z-indexå±æ€§
4. ç»˜åˆ¶ï¼Œå°†å›¾åƒç»˜åˆ¶å‡ºæ¥</code></pre><p>ç„¶åï¼Œå›¾ä¸­çš„çº¿ä¸ç®­å¤´ä»£è¡¨é€šè¿‡jsåŠ¨æ€ä¿®æ”¹äº†DOMæˆ–CSSï¼Œå¯¼è‡´äº†é‡æ–°å¸ƒå±€ï¼ˆLayoutï¼‰æˆ–æ¸²æŸ“ï¼ˆRepaintï¼‰ã€‚<br>è¿™é‡ŒLayoutå’ŒRepaintçš„æ¦‚å¿µæ˜¯æœ‰åŒºåˆ«çš„ï¼š</p>
<ul>
<li>Layoutï¼Œä¹Ÿç§°ä¸ºReflowï¼Œå³å›æµã€‚ä¸€èˆ¬æ„å‘³ç€å…ƒç´ çš„å†…å®¹ã€ç»“æ„ã€ä½ç½®æˆ–å°ºå¯¸å‘ç”Ÿäº†å˜åŒ–ï¼Œéœ€è¦é‡æ–°è®¡ç®—æ ·å¼å’Œæ¸²æŸ“æ ‘</li>
<li>Repaintï¼Œå³é‡ç»˜ã€‚æ„å‘³ç€å…ƒç´ å‘ç”Ÿçš„æ”¹å˜åªæ˜¯å½±å“äº†å…ƒç´ çš„ä¸€äº›å¤–è§‚ä¹‹ç±»çš„æ—¶å€™ï¼ˆä¾‹å¦‚ï¼ŒèƒŒæ™¯è‰²ï¼Œè¾¹æ¡†é¢œè‰²ï¼Œæ–‡å­—é¢œè‰²ç­‰ï¼‰ï¼Œæ­¤æ—¶åªéœ€è¦åº”ç”¨æ–°æ ·å¼ç»˜åˆ¶è¿™ä¸ªå…ƒç´ å°±å¯ä»¥äº†</li>
</ul>
<p>æ³¨æ„ï¼šå›æµçš„æˆæœ¬è¦è¿œé«˜äºé‡ç»˜ï¼Œå› ä¸ºå›æµä¼šé€ æˆåŒçº§å…ƒç´ å’Œå­èŠ‚ç‚¹çš„å›æµã€‚æ‰€ä»¥ï¼Œä¸€å®šè¦å°½å¯èƒ½çš„é¿å…å›æµã€‚</p>
<h3 id="ä»€ä¹ˆä¼šé€ æˆå›æµ"><a href="#ä»€ä¹ˆä¼šé€ æˆå›æµ" class="headerlink" title="ä»€ä¹ˆä¼šé€ æˆå›æµ"></a>ä»€ä¹ˆä¼šé€ æˆå›æµ</h3><ul>
<li>é¡µé¢æ¸²æŸ“åˆå§‹åŒ–</li>
<li>DOMç»“æ„æ”¹å˜ï¼Œå¦‚åˆ é™¤æŸä¸ªèŠ‚ç‚¹</li>
<li>render Treeå‘ç”Ÿå˜åŒ–ï¼Œå¦‚paddingæ”¹å˜</li>
<li>çª—å£resize</li>
<li>æœ€å¤æ‚çš„ä¸€ç§ï¼šè·å–å…ƒç´ çš„æŸä¸ªå±æ€§ï¼š<ul>
<li>offsetTop/Left/Width/Height</li>
<li>scrollTop/Left/Width/Height</li>
<li>clientTop/Left/Width/Height</li>
<li>width/height</li>
<li>è°ƒç”¨äº†getComputedStyle()æˆ–è€…IEçš„currentStyle</li>
</ul>
</li>
</ul>
<p>å›æµä¸€å®šä¼šä¼´éšç€é‡ç»˜ï¼Œé‡ç»˜å´ä¸ä¸€å®šé€ æˆå›æµï¼Œè¿™æ˜¯ä¸€ä¸ªå……åˆ†å¿…è¦æ¡ä»¶ã€‚</p>
<h5 id="ä¼˜åŒ–æ–¹æ¡ˆ"><a href="#ä¼˜åŒ–æ–¹æ¡ˆ" class="headerlink" title="ä¼˜åŒ–æ–¹æ¡ˆ"></a>ä¼˜åŒ–æ–¹æ¡ˆ</h5><ol>
<li>å‡å°‘é€é¡¹æ›´æ”¹æ ·å¼ï¼Œæœ€å¥½ä¸€æ¬¡æ€§æ›´æ”¹ï¼Œæˆ–è€…ä½¿ç”¨å®šä¹‰æ ·å¼classä¸€æ¬¡æ€§æ›´æ”¹ã€‚</li>
<li>é¿å…å¾ªç¯æ“ä½œdomï¼Œåˆ›å»ºä¸€ä¸ªdocumentFragmentæˆ–divï¼Œåœ¨å®ƒä¸Šé¢åº”ç”¨æ‰€æœ‰DOMæ“ä½œï¼Œæœ€åå†æŠŠå®ƒæ·»åŠ åˆ°window.documentã€‚</li>
<li>é¿å…å¤šæ¬¡è°ƒç”¨è¯»å–offsetç­‰å±æ€§ï¼Œå¿…è¦çš„æ—¶å€™å¯ä»¥ç¼“å­˜åˆ°å˜é‡ä¸­ã€‚</li>
<li>å°†å¤æ‚çš„å…ƒç´ å†³å®šå®šä½æˆ–è€…å›ºå®šå®šä½ï¼Œä½¿å…¶è„±ç¦»æ–‡æ¡£æµï¼Œå¦åˆ™é€ æˆçš„å›æµä»£ä»·å¤ªå¤§ã€‚</li>
</ol>
<p><strong>æ³¨æ„ï¼šæ”¹å˜å­—ä½“å¤§å°ä¼šå¼•å‘å›æµ</strong></p>
<h3 id="å¤åˆå±‚ä¸ç®€å•å±‚"><a href="#å¤åˆå±‚ä¸ç®€å•å±‚" class="headerlink" title="å¤åˆå±‚ä¸ç®€å•å±‚"></a>å¤åˆå±‚ä¸ç®€å•å±‚</h3><p>æµè§ˆå™¨æ¸²æŸ“çš„å›¾å±‚ä¸€èˆ¬åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæ™®é€šå›¾å±‚å’Œå¤åˆå›¾å±‚ã€‚</p>
<ul>
<li>DOMä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¯¹åº”ä¸€ä¸ªæ™®é€šå›¾å±‚ã€‚</li>
<li>å¤åˆå›¾å±‚å°±æ˜¯æ™®é€šå›¾å±‚çš„åˆå¹¶ã€‚ä¸€ä¸ªé¡µé¢ä¸€èˆ¬æ¥è¯´åªè¦ä¸€ä¸ªå¤åˆå›¾å±‚ã€‚</li>
</ul>
<h4 id="æµè§ˆå™¨ä»€ä¹ˆæ—¶å€™ä¼šåˆ›å»ºå¤åˆå›¾å±‚"><a href="#æµè§ˆå™¨ä»€ä¹ˆæ—¶å€™ä¼šåˆ›å»ºå¤åˆå›¾å±‚" class="headerlink" title="æµè§ˆå™¨ä»€ä¹ˆæ—¶å€™ä¼šåˆ›å»ºå¤åˆå›¾å±‚"></a>æµè§ˆå™¨ä»€ä¹ˆæ—¶å€™ä¼šåˆ›å»ºå¤åˆå›¾å±‚</h4><ul>
<li><p>3D æˆ–è€… CSS transform</p>
</li>
<li><p><video> å’Œ <canvas> æ ‡ç­¾</p>
</li>
<li><p>CSS filters</p>
</li>
<li><p>å…ƒç´ è¦†ç›–æ—¶ï¼Œæ¯”å¦‚ä½¿ç”¨äº† z-index å±æ€§</p>
</li>
</ul>
<h4 id="å¦‚ä½•å˜æˆå¤åˆå›¾å±‚"><a href="#å¦‚ä½•å˜æˆå¤åˆå›¾å±‚" class="headerlink" title="å¦‚ä½•å˜æˆå¤åˆå›¾å±‚"></a>å¦‚ä½•å˜æˆå¤åˆå›¾å±‚</h4><p>å°†ä¸€ä¸ªå…ƒç´ å˜ä¸ºå¤åˆå›¾å±‚ï¼Œå°±æ˜¯ä½¿ç”¨ä¼ è¯´ä¸­çš„ç¡¬ä»¶åŠ é€Ÿã€‚</p>
<ul>
<li>transform:translate3d(0,0,0)ï¼Œæˆ–è€…translateZ(0)ã€‚</li>
<li>opacityå±æ€§/è¿‡åº¦åŠ¨ç”»ï¼ˆéœ€è¦åŠ¨ç”»æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æ‰ä¼šåˆ›å»ºåˆæˆå±‚ï¼ŒåŠ¨ç”»æ²¡æœ‰å¼€å§‹æˆ–ç»“æŸåå…ƒç´ è¿˜ä¼šå›åˆ°ä¹‹å‰çš„çŠ¶æ€ï¼‰</li>
<li>will-changå±æ€§ï¼ˆè¿™ä¸ªæ¯”è¾ƒååƒ»ï¼‰ï¼Œä¸€èˆ¬é…åˆopacityä¸translateä½¿ç”¨ï¼ˆè€Œä¸”ç»æµ‹è¯•ï¼Œé™¤äº†ä¸Šè¿°å¯ä»¥å¼•å‘ç¡¬ä»¶åŠ é€Ÿçš„å±æ€§å¤–ï¼Œå…¶å®ƒå±æ€§å¹¶ä¸ä¼šå˜æˆå¤åˆå±‚ï¼‰ï¼Œwill-changeçš„ä½œç”¨å°±æ˜¯å‘Šè¯‰æµè§ˆå™¨è¯¥å…ƒç´ ä¼šæœ‰é‚£äº›å‘ç”Ÿå˜åŒ–çš„æ–¹æ³•ï¼Œè®©æµè§ˆå™¨ä¸ºè¯¥å…ƒç´ çš„å˜åŒ–åšå¥½ä¼˜åŒ–å‡†å¤‡ï¼Œå…·ä½“è¯·<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/will-change" target="_blank" rel="noopener">ç§»æ­¥</a>ã€‚</li>
</ul>
<h4 id="å¤åˆå›¾å±‚çš„ä½œç”¨"><a href="#å¤åˆå›¾å±‚çš„ä½œç”¨" class="headerlink" title="å¤åˆå›¾å±‚çš„ä½œç”¨"></a>å¤åˆå›¾å±‚çš„ä½œç”¨</h4><p>ä¸€èˆ¬ä¸€ä¸ªå…ƒç´ å¼€å¯ç¡¬ä»¶åŠ é€Ÿåä¼šå˜æˆå¤åˆå›¾å±‚ï¼Œå¯ä»¥ç‹¬ç«‹äºæ™®é€šæ–‡æ¡£æµä¸­ï¼Œæ”¹åŠ¨åå¯ä»¥é¿å…æ•´ä¸ªé¡µé¢é‡ç»˜ï¼Œæå‡æ€§èƒ½<br>ä½†æ˜¯å°½é‡ä¸è¦å¤§é‡ä½¿ç”¨å¤åˆå›¾å±‚ï¼Œå¦åˆ™ç”±äºèµ„æºæ¶ˆè€—è¿‡åº¦ï¼Œé¡µé¢åè€Œä¼šå˜çš„æ›´å¡ã€‚</p>
<h4 id="ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿçš„é—®é¢˜"><a href="#ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿçš„é—®é¢˜" class="headerlink" title="ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿçš„é—®é¢˜"></a>ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿçš„é—®é¢˜</h4><ol>
<li>å†…å­˜ã€‚å¦‚æœGPUåŠ è½½äº†å¤§é‡çš„çº¹ç†ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“å°±ä¼šå‘ç”Ÿå†…å®¹é—®é¢˜ï¼Œè¿™ä¸€ç‚¹åœ¨ç§»åŠ¨ç«¯æµè§ˆå™¨ä¸Šå°¤ä¸ºæ˜æ˜¾ï¼Œæ‰€ä»¥ï¼Œä¸€å®šè¦ç‰¢è®°ä¸è¦è®©é¡µé¢çš„æ¯ä¸ªå…ƒç´ éƒ½ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿã€‚</li>
<li>ä½¿ç”¨GPUæ¸²æŸ“ä¼šå½±å“å­—ä½“çš„æŠ—é”¯é½¿æ•ˆæœã€‚è¿™æ˜¯å› ä¸ºGPUå’ŒCPUå…·æœ‰ä¸åŒçš„æ¸²æŸ“æœºåˆ¶ã€‚å³ä½¿æœ€ç»ˆç¡¬ä»¶åŠ é€Ÿåœæ­¢äº†ï¼Œæ–‡æœ¬è¿˜æ˜¯ä¼šåœ¨åŠ¨ç”»æœŸé—´æ˜¾ç¤ºå¾—å¾ˆæ¨¡ç³Šã€‚</li>
</ol>
<p>æ³¨æ„ï¼šä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿæ—¶ï¼Œå°½å¯èƒ½çš„ä½¿ç”¨indexï¼Œé˜²æ­¢æµè§ˆå™¨é»˜è®¤ç»™åç»­çš„å…ƒç´ åˆ›å»ºå¤åˆå±‚æ¸²æŸ“ã€‚<br>å…·ä½“çš„åŸç†æ—¶è¿™æ ·çš„ï¼š<br><strong>webkit CSS3ä¸­ï¼Œå¦‚æœè¿™ä¸ªå…ƒç´ æ·»åŠ äº†ç¡¬ä»¶åŠ é€Ÿï¼Œå¹¶ä¸”indexå±‚çº§æ¯”è¾ƒä½ï¼Œ<br>é‚£ä¹ˆåœ¨è¿™ä¸ªå…ƒç´ çš„åé¢å…¶å®ƒå…ƒç´ ï¼ˆå±‚çº§æ¯”è¿™ä¸ªå…ƒç´ é«˜çš„ï¼Œæˆ–è€…ç›¸åŒçš„ï¼Œå¹¶ä¸”releativeæˆ–absoluteå±æ€§ç›¸åŒçš„ï¼‰ï¼Œ<br>ä¼šé»˜è®¤å˜ä¸ºå¤åˆå±‚æ¸²æŸ“ï¼Œå¦‚æœå¤„ç†ä¸å½“ä¼šæå¤§çš„å½±å“æ€§èƒ½</strong><br>ç®€å•ç‚¹ç†è§£ï¼Œå…¶å®å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªéšå¼åˆæˆçš„æ¦‚å¿µï¼š<strong>å¦‚æœaæ˜¯ä¸€ä¸ªå¤åˆå›¾å±‚ï¼Œè€Œä¸”båœ¨aä¸Šé¢ï¼Œé‚£ä¹ˆbä¹Ÿä¼šè¢«éšå¼è½¬ä¸ºä¸€ä¸ªå¤åˆå›¾å±‚</strong>ï¼Œè¿™ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„</p>
<h4 id="QA-2"><a href="#QA-2" class="headerlink" title="QA"></a>QA</h4><p>Qï¼šä¸ºä»€ä¹ˆå¼€å¯transformçš„å…ƒç´ ä¸ä¼šå¼•èµ·å›æµå’Œé‡ç»˜ï¼Ÿ<br>Aï¼šå› ä¸ºtransformå±æ€§æ”¯æŒçš„ä½ç§»å‡½æ•°translate()ã€ç¼©æ”¾æ¯”ä¾‹å‡½æ•°scale()ã€æ–œåˆ‡å‡½æ•°skew()ã€æ—‹è½¬å‡½æ•°rotate()éƒ½æ”¯æŒçº¿æ€§æ˜ å°„çš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯<code>matrix( )</code>è¡¨ç¤ºçš„æ–¹å¼ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ‰€æœ‰<code>transform</code>å®ç°çš„æ•ˆæœéƒ½å¯ä»¥å¯¹åŸåæ ‡ç³»ä¸­çš„ç‚¹<code>[x,y]</code>æŒ‰ç…§å¦‚ä¸‹çš„é½æ¬¡çŸ©é˜µè¿›è¡Œè®¡ç®—å¾—åˆ°å˜æ¢åçš„ç‚¹åæ ‡<code>[x&#39;,y&#39;]</code>ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582211853941-542e6ef7-9ecf-4ff9-85b8-95d867517878.png#align=left&display=inline&height=79&name=image.png&originHeight=104&originWidth=241&size=9375&status=done&style=none&width=184" alt="image.png"><br>é½æ¬¡çŸ©é˜µçš„ç³»æ•°æ˜¯è®¾å®š<code>transform</code>å˜æ¢æ—¶ä¼ å…¥çš„ï¼Œæ˜¯ä¸€ä¸ªå·²çŸ¥é¡¹ï¼Œè€Œä½¿ç”¨ä¸‰ç»´çš„é½æ¬¡çŸ©é˜µæ˜¯å› ä¸ºäºŒç»´åæ ‡çš„ç‚¹åœ¨å˜æ¢æ—¶ä¼šäº§ç”Ÿå¸¸æ•°é¡¹ï¼ˆä¸»è¦æ˜¯å¹³ç§»å˜æ¢ï¼‰ï¼Œè€Œå¦‚æœä»¥äºŒç»´çŸ©é˜µä½œä¸ºå‚æ•°æ¥è®¡ç®—æ—¶ï¼Œä»¥<code>x</code>åæ ‡å˜æ¢ä¸ºä¾‹ï¼Œç»“æœçš„å½¢å¼å°±æ˜¯<code>x&#39;=ax+by</code>ï¼Œå…¶ä¸­æ˜¯æ²¡æœ‰å¸¸é‡çš„ï¼Œæ‰€ä»¥åªèƒ½é‡‡ç”¨ä¸€ä¸ªä¸‰ç»´é½æ¬¡çŸ©é˜µæ¥è¡¨ç¤ºï¼Œä½†è®¡ç®—ä¸­çš„ç¬¬ä¸‰ä¸ªåæ ‡å®é™…ä¸Šå¹¶ä¸éœ€è¦ä½¿ç”¨ã€‚æ›´å¤šçš„å…³äºå˜æ¢çš„æ•°å­¦åŸç†ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡ŒæŸ¥é˜…èµ„æ–™ã€‚<br>æ‰€ä»¥translformåœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­ä¸æ˜¯ä½¿ç”¨ç¼“å­˜ï¼Œè€Œæ˜¯åœ¨å›¾å±‚åˆæˆæ—¶éå†å½“å‰å±‚çš„ç‚¹ï¼Œç„¶ååˆ©ç”¨ä¸Šè¿°æ–¹æ³•è®¡ç®—å‡ºæ–°çš„åæ ‡ç‚¹å³å¯ã€‚å®ƒå¯ä»¥è§†ä¸ºä¸€ç§ä¸å›¾å±‚å†…å®¹æ— å…³çš„å˜æ¢ï¼Œå›¾å±‚ä¸­çš„å…ƒç´ é¦–æ¬¡ç”Ÿæˆçš„ä½å›¾ä¿¡æ¯ç¼“å­˜å¯ä»¥è¢«åå¤ä½¿ç”¨ã€‚æ¯”å¦‚ä¸€æ®µå¹³ç§»åŠ¨ç”»ï¼Œå¦‚æœä½¿ç”¨<code>ç»å¯¹å®šä½+æ”¹å˜leftå€¼</code>çš„æ–¹å¼æ¥å®ç°ï¼Œå°±éœ€è¦ä¸æ–­è®¡ç®—åŠ¨ç”»å…ƒç´ çš„å¸ƒå±€å¹¶æ›´æ–°å®ƒçš„åƒç´ ä¿¡æ¯ï¼Œä½†å¦‚æœä½¿ç”¨<code>translate</code>æ¥å®ç°ï¼ŒåŠ¨ç”»å…ƒç´ åœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®å¹¶ä¸éœ€è¦æ”¹å˜ï¼Œæ— è®ºåç»­å¹³ç§»åˆ°å¤šè¿œï¼Œéƒ½å¯ä»¥ä½¿ç”¨ä½å›¾ç¼“å­˜ä¸­ä¿å­˜çš„åˆå§‹ä½ç½®ä¿¡æ¯ï¼Œå†åŠ ä¸Šå˜æ¢çŸ©é˜µçš„å½±å“åœ¨å±‚åˆå¹¶æ—¶è®¡ç®—å‡ºæ¥ï¼ŒåŒæ ·<strong>æ—¢ä¸å½±å“å¸ƒå±€ï¼Œä¹Ÿä¸éœ€è¦é‡ç»˜</strong>ï¼Œè¿™å°±æ˜¯å®ƒé«˜æ€§èƒ½çš„åŸå› ã€‚<br>Qï¼šä¸ºä»€ä¹ˆä½¿ç”¨opacityçš„å…ƒç´ ä¸ä¼šå¼•èµ·å›æµå’Œé‡ç»˜ï¼Ÿ<br>Aï¼š<code>opacity</code>å•è¯æ„æ€ä¸ºé€æ˜åº¦ï¼Œç›´è§‚è§†è§‰æ•ˆæœå°±æ˜¯é¢œè‰²å˜æ·¡äº†ï¼Œä½†æœ€ç»ˆæ˜¾ç¤ºçš„é¢œè‰²å…¶å®ä»ç„¶å¯ä»¥ç”¨<strong>RGB</strong>ä¸‰ä¸ªé€šé“æ¥è¡¨ç¤ºï¼Œä»æ•°å€¼è¿ç®—çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒå®é™…ä¸Šè¡¨ç¤ºäº†<strong>å®ƒé‡‡ç”¨ä¸€èˆ¬æ··åˆç­–ç•¥å’Œå…¶ä»–é¢œè‰²è¿›è¡Œæ··åˆæ—¶çš„æ¯”ä¾‹</strong>ï¼Œä¹Ÿå°±æ˜¯ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582212158471-ce8e20ce-10bc-464d-adc1-a221180fb791.png#align=left&display=inline&height=50&originHeight=50&originWidth=544&size=0&status=done&style=none&width=544" alt=""><br>ä¾‹å¦‚åœ¨ç½‘é¡µé»˜è®¤çš„ç™½åº•è‰²ä¸Š<code>rgba(255,255,255)</code>æ˜¾ç¤ºä¸€ä¸ªåŒ…å«é€æ˜åº¦çš„<code>rgba(218,89,97,0.8)</code>é¢œè‰²ï¼Œ é‚£ä¹ˆé¢œè‰²çš„<strong>RGB</strong>åˆ†é‡éƒ½æŒ‰ç…§ä¸Šè¿°å…¬å¼è¿›è¡Œè®¡ç®—å°±å¾—åˆ°<code>rgb(225,122,128)</code>,ç”¨å–è‰²å™¨æ‹¾å–ä¸€ä¸‹æ¸²æŸ“å‡ºæ¥çš„ç‚¹ï¼Œç»“æœå’Œä¸Šè¿°ç†è®ºæ˜¯ä¸€è‡´çš„ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582212170227-051b23df-08a3-4c3e-8d39-78730254c405.png#align=left&display=inline&height=648&name=image.png&originHeight=666&originWidth=525&size=220613&status=done&style=none&width=511" alt="image.png"><br>æ‰€ä»¥<code>opacity</code>è¿™ä¸ªå±æ€§æœ¬èº«å°±æ˜¯ç”¨åœ¨é‡å éƒ¨åˆ†é¢œè‰²å¤„ç†çš„è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ï¼Œå¯¹äºåˆ†å±‚çš„å›¾åŸæ¥è¯´å°±å¯ä»¥çœ‹ä½œæ˜¯ä¸å›¾å±‚å†…å®¹æ— å…³çš„ç³»æ•°ï¼Œå› ä¸ºåˆæˆè¿‡ç¨‹ä¸­å½“å‰å±‚ä¸­æ‰€æœ‰åƒç´ éƒ½éœ€è¦ç»å†ä¸Šé¢çš„é¢œè‰²æ··åˆå…¬å¼ï¼Œæ‰€ä»¥<code>opacity</code>çš„åŠ¨ç”»è¿‡ç¨‹<strong>æ—¢ä¸ä¼šå½±å“å¸ƒå±€ï¼Œä¹Ÿä¸éœ€è¦é‡ç»˜ã€‚</strong>è¿™æ ·å›¾å±‚ä¸­ä¿å­˜çš„<strong>RGB</strong>åƒç´ æ•°æ®çš„ç¼“å­˜åœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­ä¹Ÿå°±ä¸éœ€è¦æ›´æ–°äº†ï¼Œå¦‚æœä¸ä½¿ç”¨<code>opacity</code>å±æ€§çš„è¯ï¼Œæ¯ä¸€å¸§å¯¹äºå˜åŒ–éƒ¨åˆ†éƒ½éœ€è¦æ‰‹åŠ¨é‡è®¡ç®—<strong>RGB</strong>é¢œè‰²å€¼ï¼ˆè¿™ä¹Ÿå°±ç›¸å½“äºæ˜¯é‡ç»˜äº†ï¼‰ï¼Œå› ä¸ºè¿™äº›åŒºåŸŸçš„åƒç´ é¢œè‰²ä¸€ç›´éƒ½åœ¨å˜åŒ–ï¼Œç¼“å­˜ä¹Ÿå°±æ²¡æœ‰æ„ä¹‰ã€‚ç°åœ¨å†æ¥çœ‹çœ‹<code>opacity</code>çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œå°±ç›¸å¯¹å®¹æ˜“ç†è§£äº†ã€‚</p>
<h5 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h5><h5 id="opacityå’ŒtransformåŠ¨ç”»çš„é«˜æ€§èƒ½æ˜¯ç”±äºå…¶æ•°å­¦åŸç†å†³å®šäº†å¯ä»¥ä½¿ç”¨ç¼“å­˜ä¿¡æ¯ï¼Œè€Œå¹¶ä¸æ˜¯å› ä¸ºå®ƒè¢«ç¡¬ä»¶åŠ é€Ÿäº†ã€‚"><a href="#opacityå’ŒtransformåŠ¨ç”»çš„é«˜æ€§èƒ½æ˜¯ç”±äºå…¶æ•°å­¦åŸç†å†³å®šäº†å¯ä»¥ä½¿ç”¨ç¼“å­˜ä¿¡æ¯ï¼Œè€Œå¹¶ä¸æ˜¯å› ä¸ºå®ƒè¢«ç¡¬ä»¶åŠ é€Ÿäº†ã€‚" class="headerlink" title="opacityå’ŒtransformåŠ¨ç”»çš„é«˜æ€§èƒ½æ˜¯ç”±äºå…¶æ•°å­¦åŸç†å†³å®šäº†å¯ä»¥ä½¿ç”¨ç¼“å­˜ä¿¡æ¯ï¼Œè€Œå¹¶ä¸æ˜¯å› ä¸ºå®ƒè¢«ç¡¬ä»¶åŠ é€Ÿäº†ã€‚"></a><code>opacity</code>å’Œ<code>transform</code>åŠ¨ç”»çš„é«˜æ€§èƒ½æ˜¯ç”±äºå…¶æ•°å­¦åŸç†å†³å®šäº†å¯ä»¥ä½¿ç”¨ç¼“å­˜ä¿¡æ¯ï¼Œè€Œå¹¶ä¸æ˜¯å› ä¸ºå®ƒè¢«<strong>ç¡¬ä»¶åŠ é€Ÿ</strong>äº†ã€‚</h5><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/huaweicloud/p/11867409.html" target="_blank" rel="noopener">é«˜æ€§èƒ½çš„WebåŠ¨ç”»å’Œæ¸²æŸ“åŸç†</a><br>        <a href="https://www.cnblogs.com/ranyonsue/p/8296983.html" target="_blank" rel="noopener">ä½¿ç”¨CSSå¼€å¯ç¡¬ä»¶åŠ é€Ÿæé«˜æ€§èƒ½</a><br>        <a href="https://segmentfault.com/a/1190000012925872#item-6-11" target="_blank" rel="noopener">å¤åˆå›¾å±‚å’Œç®€å•å›¾å±‚</a></p>
<h3 id="Chromeä¸­çš„è°ƒè¯•"><a href="#Chromeä¸­çš„è°ƒè¯•" class="headerlink" title="Chromeä¸­çš„è°ƒè¯•"></a>Chromeä¸­çš„è°ƒè¯•</h3><p>Chromeçš„å¼€å‘è€…å·¥å…·ä¸­ï¼ŒPerformanceä¸­å¯ä»¥çœ‹åˆ°è¯¦ç»†çš„æ¸²æŸ“è¿‡ç¨‹ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582212896980-635456b9-ed30-431c-993d-5b3e41864b67.png#align=left&display=inline&height=322&name=image.png&originHeight=384&originWidth=800&size=245579&status=done&style=none&width=670" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582213833661-5eaebd59-e5ec-4a25-aff7-2fa87e5dae04.png#align=left&display=inline&height=327&name=image.png&originHeight=388&originWidth=800&size=281621&status=done&style=none&width=675" alt="image.png"></p>
<h3 id="èµ„æºå¤–é“¾çš„ä¸‹è½½"><a href="#èµ„æºå¤–é“¾çš„ä¸‹è½½" class="headerlink" title="èµ„æºå¤–é“¾çš„ä¸‹è½½"></a>èµ„æºå¤–é“¾çš„ä¸‹è½½</h3><p>ä¸Šé¢ä»‹ç»äº†htmlè§£æï¼Œæ¸²æŸ“æµç¨‹ã€‚ä½†å®é™…ä¸Šï¼Œåœ¨è§£æhtmlæ—¶ï¼Œä¼šé‡åˆ°ä¸€äº›èµ„æºè¿æ¥ï¼Œæ­¤æ—¶å°±éœ€è¦è¿›è¡Œå•ç‹¬å¤„ç†äº†<br>ç®€å•èµ·è§ï¼Œè¿™é‡Œå°†é‡åˆ°çš„é™æ€èµ„æºåˆ†ä¸ºä¸€ä¸‹å‡ å¤§ç±»ï¼ˆæœªåˆ—ä¸¾æ‰€æœ‰ï¼‰ï¼š</p>
<ul>
<li>CSSæ ·å¼èµ„æº</li>
<li>JSè„šæœ¬èµ„æº</li>
<li>imgå›¾ç‰‡ç±»èµ„æº</li>
</ul>
<h4 id="å½“é‡åˆ°å¤–é“¾æ—¶çš„å¤„ç†"><a href="#å½“é‡åˆ°å¤–é“¾æ—¶çš„å¤„ç†" class="headerlink" title="å½“é‡åˆ°å¤–é“¾æ—¶çš„å¤„ç†"></a>å½“é‡åˆ°å¤–é“¾æ—¶çš„å¤„ç†</h4><p>å½“é‡åˆ°ä¸Šè¿°çš„å¤–é“¾æ—¶ï¼Œä¼šå•ç‹¬å¼€å¯ä¸€ä¸ªçº¿ç¨‹å»ä¸‹è½½èµ„æºï¼ˆhttp1.1ä¸­æ¯ä¸€ä¸ªèµ„æºçš„ä¸‹è½½éƒ½å¯¹åº”ä¸€ä¸ªtcp/ipè¿æ¥ï¼‰ã€‚</p>
<h4 id="é‡åˆ°CSSèµ„æºå¤–é“¾"><a href="#é‡åˆ°CSSèµ„æºå¤–é“¾" class="headerlink" title="é‡åˆ°CSSèµ„æºå¤–é“¾"></a>é‡åˆ°CSSèµ„æºå¤–é“¾</h4><p>CSSèµ„æºçš„å¤„ç†æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>CSSä¸‹è½½æ—¶å¼‚æ­¥ï¼Œä¸ä¼šé˜»å¡æµè§ˆå™¨æ„å»ºDOMæ ‘</li>
<li>ä½†æ˜¯ä¼šé˜»å¡æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯åœ¨æ„å»ºrenderæ—¶ï¼Œä¼šç­‰åˆ°cssä¸‹è½½è§£æå®Œæ¯•åæ‰è¿›è¡Œï¼ˆè¿™ç‚¹ä¸æµè§ˆå™¨ä¼˜åŒ–æœ‰å…³ï¼Œé˜²æ­¢cssè§„åˆ™ä¸æ–­æ”¹å˜ï¼Œé¿å…äº†é‡å¤çš„æ„å»ºï¼‰</li>
<li>æœ‰ä¾‹å¤–ï¼Œ<code>media query</code>å£°æ˜çš„CSSæ˜¯ä¸ä¼šé˜»å¡æ¸²æŸ“çš„</li>
</ul>
<h4 id="é‡åˆ°è„šæœ¬èµ„æº"><a href="#é‡åˆ°è„šæœ¬èµ„æº" class="headerlink" title="é‡åˆ°è„šæœ¬èµ„æº"></a>é‡åˆ°è„šæœ¬èµ„æº</h4><p>JSè„šæœ¬èµ„æºçš„å¤„ç†æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>é˜»å¡æµè§ˆå™¨çš„è§£æï¼Œä¹Ÿå°±æ˜¯è¯´å‘ç°ä¸€ä¸ªå¤–é“¾è„šæœ¬æ—¶ï¼Œéœ€ç­‰å¾…è„šæœ¬ä¸‹è½½å®Œæˆå¹¶æ‰§è¡Œåæ‰ä¼šç»§ç»­è§£æHTML</li>
<li>æµè§ˆå™¨çš„ä¼˜åŒ–ï¼Œä¸€èˆ¬ç°ä»£æµè§ˆå™¨æœ‰ä¼˜åŒ–ï¼Œåœ¨è„šæœ¬é˜»å¡æ—¶ï¼Œä¹Ÿä¼šç»§ç»­ä¸‹è½½å…¶å®ƒèµ„æºï¼ˆå½“ç„¶æœ‰å¹¶å‘ä¸Šé™ï¼‰ï¼Œä½†æ˜¯è™½ç„¶è„šæœ¬å¯ä»¥å¹¶è¡Œä¸‹è½½ï¼Œè§£æè¿‡ç¨‹ä»ç„¶æ˜¯é˜»å¡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»è¿™ä¸ªè„šæœ¬æ‰§è¡Œå®Œæ¯•åæ‰ä¼šæ¥ä¸‹æ¥çš„è§£æï¼Œå¹¶è¡Œä¸‹è½½åªæ˜¯ä¸€ç§ä¼˜åŒ–è€Œå·²</li>
<li>deferä¸asyncï¼Œæ™®é€šçš„è„šæœ¬æ˜¯ä¼šé˜»å¡æµè§ˆå™¨è§£æçš„ï¼Œä½†æ˜¯å¯ä»¥åŠ ä¸Šdeferæˆ–asyncå±æ€§ï¼Œè¿™æ ·è„šæœ¬å°±å˜æˆå¼‚æ­¥äº†ï¼Œå¯ä»¥ç­‰åˆ°è§£æå®Œæ¯•åå†æ‰§è¡Œ</li>
</ul>
<p>æ³¨æ„ï¼Œdeferå’Œasyncæ˜¯æœ‰åŒºåˆ«çš„ï¼š <strong>deferæ˜¯å»¶è¿Ÿæ‰§è¡Œï¼Œè€Œasyncæ˜¯å¼‚æ­¥æ‰§è¡Œã€‚</strong><br>ç®€å•çš„è¯´ï¼ˆä¸å±•å¼€ï¼‰ï¼š</p>
<ul>
<li><code>async</code>æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œå¼‚æ­¥ä¸‹è½½å®Œæ¯•åå°±ä¼šæ‰§è¡Œï¼Œä¸ç¡®ä¿æ‰§è¡Œé¡ºåºï¼Œä¸€å®šåœ¨<code>onload</code>å‰ï¼Œä½†ä¸ç¡®å®šåœ¨<code>DOMContentLoaded</code>äº‹ä»¶çš„å‰æˆ–å</li>
<li><code>defer</code>æ˜¯å»¶è¿Ÿæ‰§è¡Œï¼Œåœ¨æµè§ˆå™¨çœ‹èµ·æ¥çš„æ•ˆæœåƒæ˜¯å°†è„šæœ¬æ”¾åœ¨äº†<code>body</code>åé¢ä¸€æ ·ï¼ˆè™½ç„¶æŒ‰è§„èŒƒåº”è¯¥æ˜¯åœ¨<code>DOMContentLoaded</code>äº‹ä»¶å‰ï¼Œä½†å®é™…ä¸Šä¸åŒæµè§ˆå™¨çš„ä¼˜åŒ–æ•ˆæœä¸ä¸€æ ·ï¼Œä¹Ÿæœ‰å¯èƒ½åœ¨å®ƒåé¢ï¼‰</li>
</ul>
<h4 id="é‡åˆ°å›¾ç‰‡èµ„æº"><a href="#é‡åˆ°å›¾ç‰‡èµ„æº" class="headerlink" title="é‡åˆ°å›¾ç‰‡èµ„æº"></a>é‡åˆ°å›¾ç‰‡èµ„æº</h4><p>é‡åˆ°å›¾ç‰‡ç­‰èµ„æºæ—¶ï¼Œç›´æ¥å°±æ˜¯å¼‚æ­¥ä¸‹è½½ï¼Œä¸ä¼šé˜»å¡è§£æï¼Œä¸‹è½½å®Œæ¯•åç›´æ¥ç”¨å›¾ç‰‡æ›¿æ¢åŸæœ‰srcçš„åœ°æ–¹</p>
<h4 id="loadedå’Œdomcontentloaded"><a href="#loadedå’Œdomcontentloaded" class="headerlink" title="loadedå’Œdomcontentloaded"></a>loadedå’Œdomcontentloaded</h4><p>ç®€å•çš„å¯¹æ¯”ï¼š</p>
<ul>
<li>DOMContentLoaded äº‹ä»¶è§¦å‘æ—¶ï¼Œä»…å½“DOMåŠ è½½å®Œæˆï¼Œä¸åŒ…æ‹¬æ ·å¼è¡¨ï¼Œå›¾ç‰‡(è­¬å¦‚å¦‚æœæœ‰asyncåŠ è½½çš„è„šæœ¬å°±ä¸ä¸€å®šå®Œæˆ)ã€‚ç­‰åŒäº$(document).ready()</li>
<li>load äº‹ä»¶è§¦å‘æ—¶ï¼Œé¡µé¢ä¸Šæ‰€æœ‰çš„DOMï¼Œæ ·å¼è¡¨ï¼Œè„šæœ¬ï¼Œå›¾ç‰‡éƒ½å·²ç»åŠ è½½å®Œæˆäº†</li>
</ul>
<h3 id="CSSçš„å¯è§†åŒ–æ¨¡å‹"><a href="#CSSçš„å¯è§†åŒ–æ¨¡å‹" class="headerlink" title="CSSçš„å¯è§†åŒ–æ¨¡å‹"></a>CSSçš„å¯è§†åŒ–æ¨¡å‹</h3><p><strong>è¿™ä¸€éƒ¨åˆ†å†…å®¹å¾ˆå¤šå‚è€ƒã€Šç²¾é€šCSS-é«˜çº§Webæ ‡å‡†è§£å†³æ–¹æ¡ˆã€‹ä»¥åŠå‚è€ƒæ¥æº</strong><br>å‰é¢æåˆ°äº†æ•´ä½“çš„æ¸²æŸ“æ¦‚å¿µï¼Œä½†å®é™…ä¸Šæ–‡æ¡£æ ‘ä¸­çš„å…ƒç´ æ˜¯æŒ‰ä»€ä¹ˆæ¸²æŸ“è§„åˆ™æ¸²æŸ“çš„ï¼Œæ˜¯å¯ä»¥è¿›ä¸€æ­¥å±•å¼€çš„ï¼Œæ­¤éƒ¨åˆ†å†…å®¹å³ï¼š <strong>CSSçš„å¯è§†åŒ–æ ¼å¼æ¨¡å‹</strong><br>å…ˆäº†è§£ï¼š</p>
<ul>
<li>CSSä¸­è§„å®šæ¯ä¸€ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„ç›’å­æ¨¡å‹ï¼ˆç›¸å½“äºè§„å®šäº†è¿™ä¸ªå…ƒç´ å¦‚ä½•æ˜¾ç¤ºï¼‰</li>
<li>ç„¶åå¯è§†åŒ–æ ¼å¼æ¨¡å‹åˆ™æ˜¯æŠŠè¿™äº›ç›’å­æŒ‰ç…§è§„åˆ™æ‘†æ”¾åˆ°é¡µé¢ä¸Šï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•å¸ƒå±€</li>
<li>æ¢å¥è¯è¯´ï¼Œç›’å­æ¨¡å‹è§„å®šäº†æ€ä¹ˆåœ¨é¡µé¢é‡Œæ‘†æ”¾ç›’å­ï¼Œç›’å­çš„ç›¸äº’ä½œç”¨ç­‰ç­‰</li>
</ul>
<p>è¯´åˆ°åº•ï¼š <strong>CSSçš„å¯è§†åŒ–æ ¼å¼æ¨¡å‹å°±æ˜¯è§„å®šäº†æµè§ˆå™¨åœ¨é¡µé¢ä¸­å¦‚ä½•å¤„ç†æ–‡æ¡£æ ‘</strong><br><strong>å…³é”®å­—ï¼š</strong></p>
<pre><code>åŒ…å«å—ï¼ˆContaining Blockï¼‰
æ§åˆ¶æ¡†ï¼ˆControlling Boxï¼‰
BFCï¼ˆBlock Formatting Contextï¼‰
IFCï¼ˆInline Formatting Contextï¼‰
å®šä½ä½“ç³»
æµ®åŠ¨
...</code></pre><p>å¦å¤–ï¼ŒCSSæœ‰ä¸‰ç§å®šä½æœºåˆ¶ï¼š<code>æ™®é€šæµ</code>ï¼Œ<code>æµ®åŠ¨</code>ï¼Œ<code>ç»å¯¹å®šä½</code>ï¼Œå¦‚æ— ç‰¹åˆ«æåŠï¼Œä¸‹æ–‡ä¸­éƒ½æ˜¯é’ˆå¯¹æ™®é€šæµä¸­çš„ã€‚</p>
<h4 id="åŒ…å«å—-Containing-Block"><a href="#åŒ…å«å—-Containing-Block" class="headerlink" title="åŒ…å«å—(Containing Block)"></a>åŒ…å«å—(Containing Block)</h4><p>ä¸€ä¸ªå…ƒç´ çš„boxçš„å®šä½å’Œå°ºå¯¸ï¼Œä¼šä¸æŸä¸€çŸ©å½¢æ¡†æœ‰å…³ï¼Œè¿™ä¸ªæ¡†å°±ç§°ä¹‹ä¸ºåŒ…å«å—ã€‚<br>å…ƒç´ ä¼šä¸ºå®ƒçš„å­å­™å…ƒç´ åˆ›å»ºåŒ…å«å—ï¼Œä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯è¯´å…ƒç´ çš„åŒ…å«å—å°±æ˜¯å®ƒçš„çˆ¶å…ƒç´ ï¼Œå…ƒç´ çš„åŒ…å«å—ä¸å®ƒçš„ç¥–å…ˆå…ƒç´ çš„æ ·å¼ç­‰æœ‰å…³ç³»<br>è­¬å¦‚ï¼š</p>
<ul>
<li>æ ¹å…ƒç´ æ˜¯æœ€é¡¶ç«¯çš„å…ƒç´ ï¼Œå®ƒæ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œå®ƒçš„åŒ…å«å—å°±æ˜¯åˆå§‹åŒ…å«å—</li>
<li>staticå’Œrelativeçš„åŒ…å«å—ç”±å®ƒæœ€è¿‘çš„å—çº§ã€å•å…ƒæ ¼æˆ–è€…è¡Œå†…å—ç¥–å…ˆå…ƒç´ çš„å†…å®¹æ¡†ï¼ˆcontentï¼‰åˆ›å»º</li>
<li>fixedçš„åŒ…å«å—æ˜¯å½“å‰å¯è§†çª—å£</li>
<li>absoluteçš„åŒ…å«å—ç”±å®ƒæœ€è¿‘çš„position å±æ€§ä¸º<code>absolute</code>ã€<code>relative</code>æˆ–è€…<code>fixed</code>çš„ç¥–å…ˆå…ƒç´ åˆ›å»º<ul>
<li>å¦‚æœå…¶ç¥–å…ˆå…ƒç´ æ˜¯è¡Œå†…å…ƒç´ ï¼Œåˆ™åŒ…å«å—å–å†³äºå…¶ç¥–å…ˆå…ƒç´ çš„<code>direction</code>ç‰¹æ€§</li>
<li>å¦‚æœç¥–å…ˆå…ƒç´ ä¸æ˜¯è¡Œå†…å…ƒç´ ï¼Œé‚£ä¹ˆåŒ…å«å—çš„åŒºåŸŸåº”è¯¥æ˜¯ç¥–å…ˆå…ƒç´ çš„å†…è¾¹è·è¾¹ç•Œ</li>
</ul>
</li>
</ul>
<h4 id="æ§åˆ¶æ¡†-Controlling-Box"><a href="#æ§åˆ¶æ¡†-Controlling-Box" class="headerlink" title="æ§åˆ¶æ¡†(Controlling Box)"></a>æ§åˆ¶æ¡†(Controlling Box)</h4><p>å—çº§å…ƒç´ å’Œå—æ¡†ä»¥åŠè¡Œå†…å…ƒç´ å’Œè¡Œæ¡†çš„ç›¸å…³æ¦‚å¿µ<br><strong>å—æ¡†:</strong></p>
<ul>
<li>å—çº§å…ƒç´ ä¼šç”Ÿæˆä¸€ä¸ªå—æ¡†ï¼ˆ<code>Block Box</code>ï¼‰ï¼Œå—æ¡†ä¼šå æ®ä¸€æ•´è¡Œï¼Œç”¨æ¥åŒ…å«å­boxå’Œç”Ÿæˆçš„å†…å®¹</li>
<li>å—æ¡†åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå—åŒ…å«æ¡†ï¼ˆ<code>Containing Box</code>ï¼‰ï¼Œé‡Œé¢è¦ä¹ˆåªåŒ…å«å—æ¡†ï¼Œè¦ä¹ˆåªåŒ…å«è¡Œå†…æ¡†ï¼ˆä¸èƒ½æ··æ‚ï¼‰ï¼Œå¦‚æœå—æ¡†å†…éƒ¨æœ‰å—çº§å…ƒç´ ä¹Ÿæœ‰è¡Œå†…å…ƒç´ ï¼Œé‚£ä¹ˆè¡Œå†…å…ƒç´ ä¼šè¢«åŒ¿åå—æ¡†åŒ…å›´</li>
</ul>
<p>å…³äº<strong>åŒ¿åå—æ¡†</strong>çš„ç”Ÿæˆï¼Œç¤ºä¾‹ï¼š</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DIV</span><span class="token punctuation">></span></span>
Some text
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>P</span><span class="token punctuation">></span></span>More text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>P</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DIV</span><span class="token punctuation">></span></span></code></pre>
<p><code>div</code>ç”Ÿæˆäº†ä¸€ä¸ªå—æ¡†ï¼ŒåŒ…å«äº†å¦ä¸€ä¸ªå—æ¡†<code>p</code>ä»¥åŠæ–‡æœ¬å†…å®¹<code>Some text</code>ï¼Œæ­¤æ—¶<code>Some text</code>æ–‡æœ¬ä¼šè¢«å¼ºåˆ¶åŠ åˆ°ä¸€ä¸ªåŒ¿åçš„å—æ¡†é‡Œé¢ï¼Œè¢«<code>div</code>ç”Ÿæˆçš„å—æ¡†åŒ…å«ï¼ˆå…¶å®è¿™ä¸ªå°±æ˜¯<code>IFC</code>ä¸­æåˆ°çš„è¡Œæ¡†ï¼ŒåŒ…å«è¿™äº›è¡Œå†…æ¡†çš„è¿™ä¸€è¡ŒåŒ¿åå—å½¢æˆçš„æ¡†ï¼Œè¡Œæ¡†å’Œè¡Œå†…æ¡†ä¸åŒï¼‰<br>æ¢å¥è¯è¯´:<br><strong>å¦‚æœä¸€ä¸ªå—æ¡†åœ¨å…¶ä¸­åŒ…å«å¦å¤–ä¸€ä¸ªå—æ¡†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¼ºè¿«å®ƒåªèƒ½åŒ…å«å—æ¡†ï¼Œå› æ­¤å…¶å®ƒæ–‡æœ¬å†…å®¹ç”Ÿæˆå‡ºæ¥çš„éƒ½æ˜¯åŒ¿åå—æ¡†ï¼ˆè€Œä¸æ˜¯åŒ¿åè¡Œå†…æ¡†ï¼‰</strong><br><strong>**è¡Œå†…æ¡†ï¼š</strong></p>
<ul>
<li>ä¸€ä¸ªè¡Œå†…å…ƒç´ ç”Ÿæˆä¸€ä¸ªè¡Œå†…æ¡†</li>
<li>è¡Œå†…å…ƒç´ èƒ½æ’åœ¨ä¸€è¡Œï¼Œå…è®¸å·¦å³æœ‰å…¶å®ƒå…ƒç´ </li>
</ul>
<p>å…³äº<strong>åŒ¿åè¡Œå†…æ¡†</strong>çš„ç”Ÿæˆï¼Œç¤ºä¾‹ï¼š</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>P</span><span class="token punctuation">></span></span>Some <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EM</span><span class="token punctuation">></span></span>emphasized<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EM</span><span class="token punctuation">></span></span> text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>P</span><span class="token punctuation">></span></span></code></pre>
<p><code>P</code>å…ƒç´ ç”Ÿæˆä¸€ä¸ªå—æ¡†ï¼Œå…¶ä¸­æœ‰å‡ ä¸ªè¡Œå†…æ¡†ï¼ˆå¦‚<code>EM</code>ï¼‰ï¼Œä»¥åŠæ–‡æœ¬<code>Some</code>ï¼Œ<code>text</code>ï¼Œæ­¤æ—¶ä¼šä¸“é—¨ä¸ºè¿™äº›æ–‡æœ¬ç”ŸæˆåŒ¿åè¡Œå†…æ¡†ã€‚<br><strong>displayå±æ€§çš„å½±å“</strong><br><code>display</code>çš„å‡ ä¸ªå±æ€§ä¹Ÿå¯ä»¥å½±å“ä¸åŒæ¡†çš„ç”Ÿæˆï¼š</p>
<ul>
<li><code>block</code>ï¼Œå…ƒç´ ç”Ÿæˆä¸€ä¸ªå—æ¡†</li>
<li><code>inline</code>ï¼Œå…ƒç´ äº§ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ªçš„è¡Œå†…æ¡†</li>
<li><code>inline-block</code>ï¼Œå…ƒç´ äº§ç”Ÿä¸€ä¸ªè¡Œå†…çº§å—æ¡†ï¼Œè¡Œå†…å—æ¡†çš„å†…éƒ¨ä¼šè¢«å½“ä½œå—å—æ¥æ ¼å¼åŒ–ï¼Œè€Œæ­¤å…ƒç´ æœ¬èº«ä¼šè¢«å½“ä½œè¡Œå†…çº§æ¡†æ¥æ ¼å¼åŒ–ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿ<code>BFC</code>ï¼‰</li>
<li><code>none</code>ï¼Œä¸ç”Ÿæˆæ¡†ï¼Œä¸å†æ ¼å¼åŒ–ç»“æ„ä¸­ï¼Œå½“ç„¶äº†ï¼Œå¦ä¸€ä¸ª<code>visibility: hidden</code>åˆ™ä¼šäº§ç”Ÿä¸€ä¸ªä¸å¯è§çš„æ¡†</li>
</ul>
<p>æ€»ç»“ï¼š</p>
<ul>
<li>å¦‚æœä¸€ä¸ªæ¡†é‡Œï¼Œæœ‰ä¸€ä¸ªå—çº§å…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¡†é‡Œçš„å†…å®¹éƒ½ä¼šè¢«å½“ä½œå—æ¡†æ¥è¿›è¡Œæ ¼å¼åŒ–ï¼Œå› ä¸ºåªè¦å‡ºç°äº†å—çº§å…ƒç´ ï¼Œå°±ä¼šå°†é‡Œé¢çš„å†…å®¹åˆ†å—å‡ å—ï¼Œæ¯ä¸€å—ç‹¬å ä¸€è¡Œï¼ˆå‡ºç°è¡Œå†…å¯ä»¥ç”¨åŒ¿åå—æ¡†è§£å†³ï¼‰</li>
<li>å¦‚æœä¸€ä¸ªæ¡†é‡Œï¼Œæ²¡æœ‰ä»»ä½•å—çº§å…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¡†é‡Œçš„å†…å®¹ä¼šè¢«å½“æˆè¡Œå†…æ¡†æ¥æ ¼å¼åŒ–ï¼Œå› ä¸ºé‡Œé¢çš„å†…å®¹æ˜¯æŒ‰ç…§é¡ºåºæˆè¡Œçš„æ’åˆ—ã€‚</li>
</ul>
<h4 id="BFC-Block-Formatting-Context"><a href="#BFC-Block-Formatting-Context" class="headerlink" title="BFC(Block Formatting Context)"></a>BFC(Block Formatting Context)</h4><p>å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚<br>FCå³æ ¼å¼ä¸Šä¸‹æ–‡ï¼Œå®ƒå®šä¹‰æ¡†å†…éƒ¨çš„å…ƒç´ æ¸²æŸ“è§„åˆ™ï¼Œæ¯”è¾ƒæŠ½è±¡ï¼Œè­¬å¦‚ï¼š</p>
<pre><code>FCåƒæ˜¯ä¸€ä¸ªå¤§ç®±å­ï¼Œé‡Œé¢è£…æœ‰å¾ˆå¤šå…ƒç´ 
ç®±å­å¯ä»¥éš”å¼€é‡Œé¢çš„å…ƒç´ å’Œå¤–é¢çš„å…ƒç´ ï¼ˆæ‰€ä»¥å¤–éƒ¨å¹¶ä¸ä¼šå½±å“FCå†…éƒ¨çš„æ¸²æŸ“ï¼‰
å†…éƒ¨çš„è§„åˆ™å¯ä»¥æ˜¯ï¼šå¦‚ä½•å®šä½ï¼Œå®½é«˜è®¡ç®—ï¼ŒmarginæŠ˜å ç­‰ç­‰</code></pre><p>ä¸åŒç±»å‹çš„æ¡†å‚ä¸çš„FCç±»å‹ä¸åŒï¼Œè­¬å¦‚å—çº§æ¡†å¯¹åº”BFCï¼Œè¡Œå†…æ¡†å¯¹åº”IFC<br><strong>æ³¨æ„ï¼Œå¹¶ä¸æ˜¯è¯´æ‰€æœ‰çš„æ¡†éƒ½ä¼šäº§ç”ŸFCï¼Œè€Œæ˜¯ç¬¦åˆç‰¹å®šæ¡ä»¶æ‰ä¼šäº§ç”Ÿï¼Œåªæœ‰äº§ç”Ÿäº†å¯¹åº”çš„FCåæ‰ä¼šåº”ç”¨å¯¹åº”æ¸²æŸ“è§„åˆ™</strong><br><strong>BFCè§„åˆ™ï¼š</strong></p>
<pre><code>åœ¨å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­
æ¯ä¸€ä¸ªå…ƒç´ å·¦å¤–è¾¹ä¸åŒ…å«å—çš„å·¦è¾¹ç›¸æ¥è§¦ï¼ˆå¯¹äºä»å³åˆ°å·¦çš„æ ¼å¼åŒ–ï¼Œå³å¤–è¾¹æ¥è§¦å³è¾¹ï¼‰
å³ä½¿å­˜åœ¨æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼ˆæ‰€ä»¥æµ®åŠ¨å…ƒç´ æ­£å¸¸ä¼šç›´æ¥è´´è¿‘å®ƒçš„åŒ…å«å—çš„å·¦è¾¹ï¼Œä¸æ™®é€šå…ƒç´ é‡åˆï¼‰
é™¤éè¿™ä¸ªå…ƒç´ ä¹Ÿåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„BFC</code></pre><p>æ€»ç»“å‡ ç‚¹BFCç‰¹ç‚¹ï¼š</p>
<ol>
<li>å†…éƒ¨<code>box</code>åœ¨å‚ç›´æ–¹å‘ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ”¾ç½®</li>
<li>boxçš„å‚ç›´æ–¹å‘ç”±<code>margin</code>å†³å®šï¼Œå±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªboxé—´çš„marginä¼šé‡å </li>
<li>BFCåŒºåŸŸä¸ä¼šä¸<code>float box</code>é‡å ï¼ˆå¯ç”¨äºæ’ç‰ˆ)</li>
<li>BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚åä¹‹ä¹Ÿå¦‚æ­¤</li>
<li>è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ï¼ˆä¸ä¼šæµ®åŠ¨åå¡Œï¼‰</li>
</ol>
<p>å¦‚ä½•è§¦å‘BFCï¼Ÿ</p>
<ol>
<li>æ ¹å…ƒç´ </li>
<li><code>float</code>å±æ€§ä¸ä¸º<code>none</code></li>
<li><code>position</code>ä¸º<code>absolute</code>æˆ–<code>fixed</code></li>
<li><code>display</code>ä¸º<code>inline-block</code>, <code>flex</code>, <code>inline-flex</code>ï¼Œ<code>table</code>ï¼Œ<code>table-cell</code>ï¼Œ<code>table-caption</code></li>
<li><code>overflow</code>ä¸ä¸º<code>visible</code></li>
</ol>
<p>è¿™é‡Œæä¸‹ï¼Œ<code>display: table</code>ï¼Œå®ƒæœ¬èº«ä¸äº§ç”ŸBFCï¼Œä½†æ˜¯å®ƒä¼šäº§ç”ŸåŒ¿åæ¡†ï¼ˆåŒ…å«<code>display: table-cell</code>çš„æ¡†ï¼‰ï¼Œè€Œè¿™ä¸ªåŒ¿åæ¡†äº§ç”ŸBFCã€‚<br>æ›´å¤šè¯·è‡ªè¡Œåœ¨ç½‘ä¸Šæœç´¢ã€‚</p>
<h4 id="IFC-Inline-Formatting-Context"><a href="#IFC-Inline-Formatting-Context" class="headerlink" title="IFC(Inline Formatting Context)"></a>IFC(Inline Formatting Context)</h4><p>IFCå³è¡Œå†…æ¡†äº§ç”Ÿçš„æ ¼å¼ä¸Šä¸‹æ–‡<br><strong>IFCè§„åˆ™</strong></p>
<pre><code>åœ¨è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­
æ¡†ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ°´å¹³æ’åˆ—ï¼Œèµ·ç‚¹æ˜¯åŒ…å«å—çš„é¡¶éƒ¨ã€‚
æ°´å¹³æ–¹å‘ä¸Šçš„ marginï¼Œborder å’Œ padding åœ¨æ¡†ä¹‹é—´å¾—åˆ°ä¿ç•™
æ¡†åœ¨å‚ç›´æ–¹å‘ä¸Šå¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å¯¹é½ï¼šå®ƒä»¬çš„é¡¶éƒ¨æˆ–åº•éƒ¨å¯¹é½ï¼Œæˆ–æ ¹æ®å…¶ä¸­æ–‡å­—çš„åŸºçº¿å¯¹é½</code></pre><p><strong>è¡Œæ¡†</strong><br><strong>åŒ…å«é‚£äº›æ¡†çš„é•¿æ–¹å½¢åŒºåŸŸï¼Œä¼šå½¢æˆä¸€è¡Œï¼Œå«åšè¡Œæ¡†</strong><br>è¡Œæ¡†çš„å®½åº¦ç”±å®ƒçš„åŒ…å«å—å’Œå…¶ä¸­çš„æµ®åŠ¨å…ƒç´ å†³å®šï¼Œé«˜åº¦çš„ç¡®å®šç”±è¡Œé«˜åº¦è®¡ç®—è§„åˆ™å†³å®š<br>è¡Œæ¡†çš„è§„åˆ™ï¼š</p>
<pre><code>å¦‚æœå‡ ä¸ªè¡Œå†…æ¡†åœ¨æ°´å¹³æ–¹å‘æ— æ³•æ”¾å…¥ä¸€ä¸ªè¡Œæ¡†å†…ï¼Œå®ƒä»¬å¯ä»¥åˆ†é…åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªå‚ç›´å †å çš„è¡Œæ¡†ä¸­ï¼ˆå³è¡Œå†…æ¡†çš„åˆ†å‰²ï¼‰
è¡Œæ¡†åœ¨å †å æ—¶æ²¡æœ‰å‚ç›´æ–¹å‘ä¸Šçš„åˆ†å‰²ä¸”æ°¸ä¸é‡å 
è¡Œæ¡†çš„é«˜åº¦æ€»æ˜¯è¶³å¤Ÿå®¹çº³æ‰€åŒ…å«çš„æ‰€æœ‰æ¡†ã€‚ä¸è¿‡ï¼Œå®ƒå¯èƒ½é«˜äºå®ƒåŒ…å«çš„æœ€é«˜çš„æ¡†ï¼ˆä¾‹å¦‚ï¼Œæ¡†å¯¹é½ä¼šå¼•èµ·åŸºçº¿å¯¹é½ï¼‰
è¡Œæ¡†çš„å·¦è¾¹æ¥è§¦åˆ°å…¶åŒ…å«å—çš„å·¦è¾¹ï¼Œå³è¾¹æ¥è§¦åˆ°å…¶åŒ…å«å—çš„å³è¾¹ã€‚</code></pre><p><strong>ç»“åˆè¡¥å……ä¸‹IFCè§„åˆ™ï¼š</strong></p>
<pre><code>æµ®åŠ¨å…ƒç´ å¯èƒ½ä¼šå¤„äºåŒ…å«å—è¾¹ç¼˜å’Œè¡Œæ¡†è¾¹ç¼˜ä¹‹é—´
å°½ç®¡åœ¨ç›¸åŒçš„è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­çš„è¡Œæ¡†é€šå¸¸æ‹¥æœ‰ç›¸åŒçš„å®½åº¦ï¼ˆåŒ…å«å—çš„å®½åº¦ï¼‰ï¼Œå®ƒä»¬å¯èƒ½ä¼šå› æµ®åŠ¨å…ƒç´ ç¼©çŸ­äº†å¯ç”¨å®½åº¦ï¼Œè€Œåœ¨å®½åº¦ä¸Šå‘ç”Ÿå˜åŒ–
åŒä¸€è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­çš„è¡Œæ¡†é€šå¸¸é«˜åº¦ä¸ä¸€æ ·ï¼ˆå¦‚ï¼Œä¸€è¡ŒåŒ…å«äº†ä¸€ä¸ªé«˜çš„å›¾å½¢ï¼Œè€Œå…¶å®ƒè¡ŒåªåŒ…å«æ–‡æœ¬ï¼‰
å½“ä¸€è¡Œä¸­è¡Œå†…æ¡†å®½åº¦çš„æ€»å’Œå°äºåŒ…å«å®ƒä»¬çš„è¡Œæ¡†çš„å®½ï¼Œå®ƒä»¬åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„å¯¹é½ï¼Œå–å†³äº `text-align` ç‰¹æ€§
ç©ºçš„è¡Œå†…æ¡†åº”è¯¥è¢«å¿½ç•¥
å³ä¸åŒ…å«æ–‡æœ¬ï¼Œä¿ç•™ç©ºç™½ç¬¦ï¼Œmargin/padding/borderé0çš„è¡Œå†…å…ƒç´ ï¼Œ
ä»¥åŠå…¶ä»–å¸¸è§„æµä¸­çš„å†…å®¹(æ¯”å¦‚ï¼Œå›¾ç‰‡ï¼Œinline blocks å’Œ inline tables)ï¼Œ
å¹¶ä¸”ä¸æ˜¯ä»¥æ¢è¡Œç»“æŸçš„è¡Œæ¡†ï¼Œ
å¿…é¡»è¢«å½“ä½œé›¶é«˜åº¦è¡Œæ¡†å¯¹å¾…</code></pre><p>æ€»ç»“ï¼š</p>
<ul>
<li>è¡Œå†…å…ƒç´ æ€»æ˜¯ä¼šåº”ç”¨IFCæ¸²æŸ“è§„åˆ™</li>
<li>è¡Œå†…å…ƒç´ ä¼šåº”ç”¨IFCè§„åˆ™æ¸²æŸ“ï¼Œè­¬å¦‚<code>text-align</code>å¯ä»¥ç”¨æ¥å±…ä¸­ç­‰</li>
<li>å—æ¡†å†…éƒ¨ï¼Œå¯¹äºæ–‡æœ¬è¿™ç±»çš„åŒ¿åå…ƒç´ ï¼Œä¼šäº§ç”ŸåŒ¿åè¡Œæ¡†åŒ…å›´ï¼Œè€Œè¡Œæ¡†å†…éƒ¨å°±åº”ç”¨IFCæ¸²æŸ“è§„åˆ™</li>
<li>è¡Œå†…æ¡†å†…éƒ¨ï¼Œå¯¹äºé‚£äº›è¡Œå†…å…ƒç´ ï¼Œä¸€æ ·åº”ç”¨IFCæ¸²æŸ“è§„åˆ™</li>
<li>å¦å¤–ï¼Œ<code>inline-block</code>ï¼Œä¼šåœ¨å…ƒç´ å¤–å±‚äº§ç”ŸIFCï¼ˆæ‰€ä»¥è¿™ä¸ªå…ƒç´ æ˜¯å¯ä»¥é€šè¿‡<code>text-align</code>æ°´å¹³å±…ä¸­çš„ï¼‰ï¼Œå½“ç„¶ï¼Œå®ƒå†…éƒ¨åˆ™æŒ‰ç…§BFCè§„åˆ™æ¸²æŸ“</li>
</ul>
<p>ç›¸æ¯”BFCè§„åˆ™æ¥è¯´ï¼ŒIFCå¯èƒ½æ›´åŠ æŠ½è±¡ï¼ˆå› ä¸ºæ²¡æœ‰é‚£ä¹ˆæ¡ç†æ¸…æ™°çš„è§„åˆ™å’Œè§¦å‘æ¡ä»¶ï¼‰<br>ä½†æ€»çš„æ¥è¯´ï¼Œå®ƒå°±æ˜¯è¡Œå†…å…ƒç´ è‡ªèº«å¦‚ä½•æ˜¾ç¤ºä»¥åŠåœ¨æ¡†å†…å¦‚ä½•æ‘†æ”¾çš„æ¸²æŸ“è§„åˆ™ï¼Œè¿™æ ·æè¿°åº”è¯¥æ›´å®¹æ˜“ç†è§£ã€‚</p>
<h4 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h4><p>å½“ç„¶è¿˜æœ‰æœ‰ä¸€äº›å…¶å®ƒå†…å®¹ï¼š</p>
<ul>
<li>è­¬å¦‚å¸¸è§„æµï¼Œæµ®åŠ¨ï¼Œç»å¯¹å®šä½ç­‰åŒºåˆ«</li>
<li>è­¬å¦‚æµ®åŠ¨å…ƒç´ ä¸åŒ…å«åœ¨å¸¸è§„æµä¸­</li>
<li>è­¬å¦‚ç›¸å¯¹å®šä½ï¼Œç»å¯¹å®šä½ï¼Œ<code>Fixed</code>å®šä½ç­‰åŒºåˆ«</li>
<li>è­¬å¦‚<code>z-index</code>çš„åˆ†å±‚æ˜¾ç¤ºæœºåˆ¶ç­‰</li>
</ul>
<p>è¿™é‡Œä¸ä¸€ä¸€å±•å¼€ï¼Œæ›´å¤šè¯·å‚è€ƒï¼š<a href="https://bbs.csdn.net/topics/340204423" target="_blank" rel="noopener">https://bbs.csdn.net/topics/340204423</a></p>
<h3 id="JSå¼•æ“è§£æè¿‡ç¨‹"><a href="#JSå¼•æ“è§£æè¿‡ç¨‹" class="headerlink" title="JSå¼•æ“è§£æè¿‡ç¨‹"></a>JSå¼•æ“è§£æè¿‡ç¨‹</h3><p>å‰é¢æœ‰æåˆ°é‡åˆ°JSè„šæœ¬æ—¶ï¼Œä¼šç­‰åˆ°å®ƒçš„æ‰§è¡Œï¼Œå®é™…ä¸Šæ˜¯éœ€è¦å¼•æ“è§£æçš„ï¼Œè¿™é‡Œå±•å¼€æè¿°ï¼ˆä»‹ç»ä¸»å¹²æµç¨‹ï¼‰ã€‚</p>
<h4 id="JSçš„è§£é‡Šé˜¶æ®µ"><a href="#JSçš„è§£é‡Šé˜¶æ®µ" class="headerlink" title="JSçš„è§£é‡Šé˜¶æ®µ"></a>JSçš„è§£é‡Šé˜¶æ®µ</h4><p>é¦–å…ˆå¾—æ˜ç¡®ï¼š <strong>JSæ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œæ‰€ä»¥å®ƒæ— éœ€æå‰ç¼–è¯‘ï¼Œè€Œæ˜¯ç”±è§£é‡Šå™¨å®æ—¶è¿è¡Œ</strong><br>å¼•æ“å¯¹JSçš„å¤„ç†è¿‡ç¨‹å¯ä»¥ç®€è¿°å¦‚ä¸‹ï¼š</p>
<ol>
<li>è¯»å–ä»£ç ï¼Œè¿›è¡Œè¯æ³•åˆ†æ(Lexical analysis)ï¼Œç„¶åå°†ä»£ç åˆ†è§£ä¸ºè¯å…ƒtokenã€‚</li>
<li>å¯¹è¯å…ƒtokenè¿›è¡Œè¯­æ³•åˆ†æ(parsing)ï¼Œç„¶åå°†ä»£ç æ•´ç†å‡ºè¯­æ³•æ ‘(syntax tree)ã€‚</li>
<li>ä½¿ç”¨ç¿»è¯‘å™¨(translator)ï¼Œå°†ä»£ç è½¬æ¢ä¸ºå­—èŠ‚ç (bytecode)</li>
<li>ä½¿ç”¨å­—èŠ‚ç è§£é‡Šå™¨(bytecode interpreter)ï¼Œå°†å­—èŠ‚ç è½¬ä¸ºæœºå™¨ç ã€‚</li>
</ol>
<p>æœ€ç»ˆè®¡ç®—æœºæ‰§è¡Œçš„å°±æ˜¯æœºå™¨ç ã€‚<br>ä¸ºäº†æé«˜è¿è¡Œé€Ÿåº¦ï¼Œç°ä»£æµè§ˆå™¨ä¸€èˆ¬é‡‡ç”¨å³æ—¶ç¼–è¯‘ï¼ˆ<code>JIT-Just In Time compiler</code>ï¼‰ã€‚<br>å³å­—èŠ‚ç åªåœ¨è¿è¡Œæ—¶ç¼–è¯‘ï¼Œç”¨åˆ°å“ªä¸€è¡Œå°±ç¼–è¯‘å“ªä¸€è¡Œï¼Œå¹¶ä¸”æŠŠç¼–è¯‘ç»“æœç¼“å­˜ï¼ˆ<code>inline cache</code>ï¼‰ã€‚<br>è¿™æ ·æ•´ä¸ªç¨‹åºçš„è¿è¡Œé€Ÿåº¦èƒ½å¾—åˆ°æ˜¾è‘—æå‡ã€‚<br>è€Œä¸”ï¼Œä¸åŒæµè§ˆå™¨ç­–ç•¥å¯èƒ½è¿˜ä¸åŒï¼Œæœ‰çš„æµè§ˆå™¨å°±çœç•¥äº†å­—èŠ‚ç çš„ç¿»è¯‘æ­¥éª¤ï¼Œç›´æ¥è½¬ä¸ºæœºå™¨ç ï¼ˆå¦‚chromeçš„v8ï¼‰<br>æ€»ç»“èµ·æ¥å¯ä»¥è®¤ä¸ºæ˜¯ï¼š <strong>æ ¸å¿ƒçš„<code>JIT</code>ç¼–è¯‘å™¨å°†æºç ç¼–è¯‘æˆæœºå™¨ç è¿è¡Œã€‚</strong></p>
<h4 id="JSçš„é¢„å¤„ç†é˜¶æ®µ"><a href="#JSçš„é¢„å¤„ç†é˜¶æ®µ" class="headerlink" title="JSçš„é¢„å¤„ç†é˜¶æ®µ"></a>JSçš„é¢„å¤„ç†é˜¶æ®µ</h4><p>ä¸Šè¿°å°†çš„æ˜¯è§£é‡Šå™¨çš„æ•´ä½“è¿‡ç¨‹ï¼Œè¿™é‡Œå†æä¸‹åœ¨æ­£å¼æ‰§è¡ŒJSå‰ï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªé¢„å¤„ç†é˜¶æ®µ<br>ï¼ˆè­¬å¦‚å˜é‡æå‡ï¼Œåˆ†å·è¡¥å…¨ç­‰ï¼‰<br>é¢„å¤„ç†é˜¶æ®µä¼šåšä¸€äº›äº‹æƒ…ï¼Œç¡®ä¿JSå¯ä»¥æ­£ç¡®æ‰§è¡Œï¼Œè¿™é‡Œä»…æéƒ¨åˆ†ï¼š<br><strong>åˆ†å·è¡¥å…¨</strong><br>JSæ‰§è¡Œæ˜¯éœ€è¦åˆ†å·çš„ï¼Œä½†ä¸ºä»€ä¹ˆä»¥ä¸‹è¯­å¥å´å¯ä»¥æ­£å¸¸è¿è¡Œå‘¢ï¼Ÿ</p>
<pre class=" language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span></code></pre>
<p>åŸå› å°±æ˜¯JSè§£é‡Šå™¨æœ‰ä¸€ä¸ª<a href="http://inimino.org/~inimino/blog/javascript_semicolons" target="_blank" rel="noopener">Semicolon Insertion</a>è§„åˆ™ï¼Œå®ƒä¼šæŒ‰ç…§ä¸€å®šè§„åˆ™ï¼Œåœ¨é€‚å½“çš„ä½ç½®è¡¥å……åˆ†å·<br>è­¬å¦‚åˆ—ä¸¾å‡ æ¡è‡ªåŠ¨åŠ åˆ†å·çš„è§„åˆ™ï¼š</p>
<ul>
<li>å½“æœ‰æ¢è¡Œç¬¦ï¼ˆåŒ…æ‹¬å«æœ‰æ¢è¡Œç¬¦çš„å¤šè¡Œæ³¨é‡Šï¼‰ï¼Œå¹¶ä¸”ä¸‹ä¸€ä¸ª<code>token</code>æ²¡æ³•è·Ÿå‰é¢çš„è¯­æ³•åŒ¹é…æ—¶ï¼Œä¼šè‡ªåŠ¨è¡¥åˆ†å·ã€‚</li>
<li>å½“æœ‰<code>}</code>æ—¶ï¼Œå¦‚æœç¼ºå°‘åˆ†å·ï¼Œä¼šè¡¥åˆ†å·ã€‚</li>
<li>ç¨‹åºæºä»£ç ç»“æŸæ—¶ï¼Œå¦‚æœç¼ºå°‘åˆ†å·ï¼Œä¼šè¡¥åˆ†å·ã€‚</li>
</ul>
<p>äºæ˜¯ï¼Œä¸Šè¿°çš„ä»£ç å°±å˜æˆäº†</p>
<pre class=" language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>æ‰€ä»¥å¯ä»¥æ­£å¸¸è¿è¡Œ<br>å½“ç„¶äº†ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç»å…¸çš„ä¾‹å­ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
    <span class="token punctuation">{</span>
        a<span class="token punctuation">:</span> <span class="token string">'a'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>ç”±äºåˆ†å·è¡¥å…¨æœºåˆ¶ï¼Œæ‰€ä»¥å®ƒå˜æˆäº†ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">{</span>
        a<span class="token punctuation">:</span> <span class="token string">'a'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>æ‰€ä»¥è¿è¡Œåæ˜¯<code>undefined</code></p>
<h5 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h5><p>ä¸€èˆ¬åŒ…æ‹¬å‡½æ•°æå‡å’Œå˜é‡æå‡<br>è­¬å¦‚ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a<span class="token punctuation">;</span></code></pre>
<p>ç»è¿‡å˜é‡æå‡åï¼Œå°±å˜æˆï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a<span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>è¿™é‡Œæ²¡æœ‰å±•å¼€ï¼Œå…¶å®å±•å¼€ä¹Ÿå¯ä»¥ç‰µæ¶‰åˆ°å¾ˆå¤šå†…å®¹çš„<br>è­¬å¦‚å¯ä»¥æä¸‹å˜é‡å£°æ˜ï¼Œå‡½æ•°å£°æ˜ï¼Œå½¢å‚ï¼Œå®å‚çš„ä¼˜å…ˆçº§é¡ºåºï¼Œä»¥åŠes6ä¸­letæœ‰å…³çš„ä¸´æ—¶æ­»åŒºç­‰ã€‚</p>
<h4 id="JSçš„æ‰§è¡Œé˜¶æ®µ"><a href="#JSçš„æ‰§è¡Œé˜¶æ®µ" class="headerlink" title="JSçš„æ‰§è¡Œé˜¶æ®µ"></a>JSçš„æ‰§è¡Œé˜¶æ®µ</h4><p>æ­¤é˜¶æ®µçš„å†…å®¹ä¸­çš„å›¾ç‰‡æ¥æºï¼š<a href="http://www.cnblogs.com/TomXu/archive/2012/01/12/2308594.html" target="_blank" rel="noopener">æ·±å…¥ç†è§£JavaScriptç³»åˆ—ï¼ˆ10ï¼‰ï¼šJavaScriptæ ¸å¿ƒï¼ˆæ™‹çº§é«˜æ‰‹å¿…è¯»ç¯‡ï¼‰</a><br>è¿™é‡Œè¿˜æœ‰ä¸€ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©å¤§å®¶ç†è§£ï¼š<a href="https://www.yuque.com/walter-glskq/zf7grn/xhnw6t" target="_blank" rel="noopener">ä½œç”¨åŸŸä¸ä½œç”¨åŸŸé“¾</a><br>è§£é‡Šå™¨è§£é‡Šå®Œè¯­æ³•è§„åˆ™åï¼Œå°±å¼€å§‹æ‰§è¡Œï¼Œç„¶åæ•´ä¸ªæ‰§è¡Œæµç¨‹ä¸­å¤§è‡´åŒ…å«ä»¥ä¸‹æ¦‚å¿µï¼š</p>
<ul>
<li>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ‰§è¡Œå †æ ˆæ¦‚å¿µï¼ˆå¦‚å…¨å±€ä¸Šä¸‹æ–‡ï¼Œå½“å‰æ´»åŠ¨ä¸Šä¸‹æ–‡ï¼‰</li>
<li>VOï¼ˆå˜é‡å¯¹è±¡ï¼‰å’ŒAOï¼ˆæ´»åŠ¨å¯¹è±¡ï¼‰</li>
<li>ä½œç”¨åŸŸé“¾</li>
<li>thisæœºåˆ¶ç­‰</li>
</ul>
<p>è¿™äº›æ¦‚å¿µå¦‚æœæ·±å…¥è®²è§£çš„è¯å†…å®¹è¿‡å¤šï¼Œå› æ­¤è¿™é‡Œä»…æåŠéƒ¨åˆ†ç‰¹æ€§<br><strong>æ‰§è¡Œä¸Šä¸‹æ–‡ç®€å•è§£é‡Š</strong></p>
<ul>
<li>JSæœ‰<code>æ‰§è¡Œä¸Šä¸‹æ–‡</code>ï¼‰</li>
<li>æµè§ˆå™¨é¦–æ¬¡è½½å…¥è„šæœ¬ï¼Œå®ƒå°†åˆ›å»º<code>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</code>ï¼Œå¹¶å‹å…¥æ‰§è¡Œæ ˆæ ˆé¡¶ï¼ˆä¸å¯è¢«å¼¹å‡ºï¼‰</li>
<li>ç„¶åæ¯è¿›å…¥å…¶å®ƒä½œç”¨åŸŸå°±åˆ›å»ºå¯¹åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æŠŠå®ƒå‹å…¥æ‰§è¡Œæ ˆçš„é¡¶éƒ¨</li>
<li>ä¸€æ—¦å¯¹åº”çš„ä¸Šä¸‹æ–‡æ‰§è¡Œå®Œæ¯•ï¼Œå°±ä»æ ˆé¡¶å¼¹å‡ºï¼Œå¹¶å°†ä¸Šä¸‹æ–‡æ§åˆ¶æƒäº¤ç»™å½“å‰çš„æ ˆã€‚</li>
<li>è¿™æ ·ä¾æ¬¡æ‰§è¡Œï¼ˆæœ€ç»ˆéƒ½ä¼šå›åˆ°å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰</li>
</ul>
<p>è­¬å¦‚ï¼Œå¦‚æœç¨‹åºæ‰§è¡Œå®Œæ¯•ï¼Œè¢«å¼¹å‡ºæ‰§è¡Œæ ˆï¼Œç„¶åæœ‰æ²¡æœ‰è¢«å¼•ç”¨ï¼ˆæ²¡æœ‰å½¢æˆé—­åŒ…ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°ä¸­ç”¨åˆ°çš„å†…å­˜å°±ä¼šè¢«åƒåœ¾å¤„ç†å™¨è‡ªåŠ¨å›æ”¶ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582215760520-0c77076a-b9cb-4faf-bbd7-5ad55a280dab.png#align=left&display=inline&height=121&name=image.png&originHeight=87&originWidth=463&size=12701&status=done&style=none&width=645" alt="image.png"><br>ç„¶åæ‰§è¡Œä¸Šä¸‹æ–‡ä¸VOï¼Œä½œç”¨åŸŸé“¾ï¼Œthisçš„å…³ç³»æ˜¯ï¼š<br>æ¯ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéƒ½æœ‰ä¸‰ä¸ªé‡è¦å±æ€§ï¼š</p>
<ul>
<li>å˜é‡å¯¹è±¡(<code>Variable objectï¼ŒVO</code>)</li>
<li>ä½œç”¨åŸŸé“¾(<code>Scope chain</code>)</li>
<li><code>this</code></li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582215788358-fef25608-d3dd-4e04-b095-25a7a7a1506d.png#align=left&display=inline&height=124&name=image.png&originHeight=249&originWidth=340&size=19930&status=done&style=none&width=170" alt="image.png">)<img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582215790249-c0df6d34-c43b-46a3-95e4-6b833f98a441.png#align=left&display=inline&height=124&name=image.png&originHeight=249&originWidth=340&size=19930&status=done&style=none&width=170" alt="image.png">)<img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582215794216-77f5ef5b-0e64-45c1-9c9e-edcd661ef061.png#align=left&display=inline&height=124&name=image.png&originHeight=249&originWidth=340&size=19930&status=done&style=none&width=170" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582215805673-78c3d36c-89c4-44c8-952a-b89583bc24ca.png#align=left&display=inline&height=287&name=image.png&originHeight=249&originWidth=340&size=19930&status=done&style=none&width=392" alt="image.png"><br><strong>VOä¸AO</strong><br>VOæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„å±æ€§ï¼ˆæŠ½è±¡æ¦‚å¿µï¼‰ï¼Œä½†æ˜¯<strong>åªæœ‰å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡å…è®¸é€šè¿‡VOçš„å±æ€§åç§°æ¥é—´æ¥è®¿é—®ï¼ˆå› ä¸ºåœ¨å…¨å±€ä¸Šä¸‹æ–‡é‡Œï¼Œå…¨å±€å¯¹è±¡è‡ªèº«å°±æ˜¯å˜é‡å¯¹è±¡ï¼‰</strong><br>AOï¼ˆ<code>activation object</code>)ï¼Œå½“å‡½æ•°è¢«è°ƒç”¨è€…æ¿€æ´»ï¼ŒAOå°±è¢«åˆ›å»ºäº†<br>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<ul>
<li>åœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼š<code>VO === AO</code></li>
<li>åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼š<code>VO === this === global</code></li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼ŒVOä¸­ä¼šå­˜æ”¾ä¸€äº›å˜é‡ä¿¡æ¯ï¼ˆå¦‚å£°æ˜çš„å˜é‡ï¼Œå‡½æ•°ï¼Œ<code>arguments</code>å‚æ•°ç­‰ç­‰ï¼‰<br><strong>ä½œç”¨åŸŸé“¾</strong><br>å®ƒæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä¸€ä¸ªå±æ€§ï¼ŒåŸç†å’ŒåŸå‹é“¾å¾ˆç›¸ä¼¼ï¼Œä½œç”¨å¾ˆé‡è¦ã€‚<br>è­¬å¦‚æµç¨‹ç®€è¿°ï¼š</p>
<pre><code>åœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªå˜é‡foo
å¦‚æœå‡½æ•°çš„VOä¸­æ‰¾åˆ°äº†ï¼Œå°±ç›´æ¥ä½¿ç”¨
å¦åˆ™å»å®ƒçš„çˆ¶çº§ä½œç”¨åŸŸé“¾ä¸­ï¼ˆ__parent__ï¼‰æ‰¾
å¦‚æœçˆ¶çº§ä¸­æ²¡æ‰¾åˆ°ï¼Œç»§ç»­å¾€ä¸Šæ‰¾
ç›´åˆ°å…¨å±€ä¸Šä¸‹æ–‡ä¸­ä¹Ÿæ²¡æ‰¾åˆ°å°±æŠ¥é”™</code></pre><p><img src="https://cdn.nlark.com/yuque/0/2020/png/705088/1582215843494-1199245e-1308-4681-8caa-accf79b10687.png#align=left&display=inline&height=549&name=image.png&originHeight=426&originWidth=221&size=42937&status=done&style=none&width=285" alt="image.png"></p>
<p><strong>thisæŒ‡é’ˆ</strong><br>è¿™ä¹Ÿæ˜¯JSçš„æ ¸å¿ƒçŸ¥è¯†ä¹‹ä¸€ï¼Œç”±äºå†…å®¹è¿‡å¤šï¼Œè¿™é‡Œå°±ä¸å±•å¼€ï¼Œä»…æåŠéƒ¨åˆ†<br>æ³¨æ„ï¼š<strong>thisæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒçš„ä¸€ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯æŸä¸ªå˜é‡å¯¹è±¡çš„å±æ€§</strong><br>å› æ­¤:</p>
<ul>
<li>thisæ˜¯æ²¡æœ‰ä¸€ä¸ªç±»ä¼¼æœå¯»å˜é‡çš„è¿‡ç¨‹</li>
<li>å½“ä»£ç ä¸­ä½¿ç”¨äº†thisï¼Œè¿™ä¸ª thisçš„å€¼å°±ç›´æ¥ä»æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ä¸­è·å–äº†ï¼Œè€Œä¸ä¼šä»ä½œç”¨åŸŸé“¾ä¸­æœå¯»</li>
<li>thisçš„å€¼åªå–å†³ä¸­è¿›å…¥ä¸Šä¸‹æ–‡æ—¶çš„æƒ…å†µ</li>
</ul>
<p>æ‰€ä»¥ç»å…¸çš„ä¾‹å­ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> baz <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>
    baz<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    foo<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>baz<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> bar<span class="token punctuation">.</span>foo<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// è¿›å…¥ç¯å¢ƒï¼šglobal</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 200ï¼Œä¸¥æ ¼æ¨¡å¼ä¸­ä¼šæŠ¥é”™ï¼ŒCannot read property 'baz' of undefined</span>
<span class="token comment" spellcheck="true">// è¿›å…¥ç¯å¢ƒï¼šglobal bar</span>
bar<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 100</span></code></pre>
<p>å°±è¦æ˜ç™½äº†ä¸Šé¢thisçš„ä»‹ç»ï¼Œä¸Šè¿°ä¾‹å­å¾ˆå¥½ç†è§£<br>æ›´å¤šå‚è€ƒï¼š<br><a href="http://www.cnblogs.com/TomXu/archive/2012/01/17/2310479.html" target="_blank" rel="noopener">æ·±å…¥ç†è§£JavaScriptç³»åˆ—ï¼ˆ13ï¼‰ï¼šThis? Yes,this!</a></p>
<h4 id="å›æ”¶æœºåˆ¶"><a href="#å›æ”¶æœºåˆ¶" class="headerlink" title="å›æ”¶æœºåˆ¶"></a>å›æ”¶æœºåˆ¶</h4><p>JSæœ‰åƒåœ¾å¤„ç†å™¨ï¼Œæ‰€ä»¥æ— éœ€æ‰‹åŠ¨å›æ”¶å†…å­˜ï¼Œè€Œæ˜¯ç”±åƒåœ¾å¤„ç†å™¨è‡ªåŠ¨å¤„ç†ã€‚<br>ä¸€èˆ¬æ¥è¯´ï¼Œåƒåœ¾å¤„ç†å™¨æœ‰è‡ªå·±çš„å›æ”¶ç­–ç•¥ã€‚<br>è­¬å¦‚å¯¹äºé‚£äº›æ‰§è¡Œå®Œæ¯•çš„å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰å¤–éƒ¨å¼•ç”¨ï¼ˆè¢«å¼•ç”¨çš„è¯ä¼šå½¢æˆé—­åŒ…ï¼‰ï¼Œåˆ™ä¼šå›æ”¶ã€‚ï¼ˆå½“ç„¶ä¸€èˆ¬ä¼šæŠŠå›æ”¶åŠ¨ä½œåˆ‡å‰²åˆ°ä¸åŒçš„æ—¶é—´æ®µæ‰§è¡Œï¼Œé˜²æ­¢å½±å“æ€§èƒ½ï¼‰<br>å¸¸ç”¨çš„ä¸¤ç§åƒåœ¾å›æ”¶è§„åˆ™æ˜¯ï¼š</p>
<ul>
<li>æ ‡è®°æ¸…é™¤</li>
<li>å¼•ç”¨è®¡æ•°</li>
</ul>
<p>Javascriptå¼•æ“åŸºç¡€GCæ–¹æ¡ˆæ˜¯ï¼ˆ<code>simple GC</code>ï¼‰ï¼š<code>mark and sweep</code>ï¼ˆæ ‡è®°æ¸…é™¤ï¼‰ï¼Œç®€å•è§£é‡Šå¦‚ä¸‹ï¼š</p>
<ol>
<li>éå†æ‰€æœ‰å¯è®¿é—®çš„å¯¹è±¡ã€‚</li>
<li>å›æ”¶å·²ä¸å¯è®¿é—®çš„å¯¹è±¡ã€‚</li>
</ol>
<p>è­¬å¦‚ï¼šï¼ˆå‡ºè‡ªjavascripté«˜ç¨‹ï¼‰<br>å½“å˜é‡è¿›å…¥ç¯å¢ƒæ—¶ï¼Œä¾‹å¦‚ï¼Œåœ¨å‡½æ•°ä¸­å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå°±å°†è¿™ä¸ªå˜é‡æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ã€‚&gt; ä»é€»è¾‘ä¸Šè®²ï¼Œæ°¸è¿œä¸èƒ½é‡Šæ”¾è¿›å…¥ç¯å¢ƒçš„å˜é‡æ‰€å ç”¨çš„å†…å­˜ï¼Œå› ä¸ºåªè¦æ‰§è¡Œæµè¿›å…¥ç›¸åº”çš„ç¯å¢ƒï¼Œå°±å¯èƒ½ä¼šç”¨åˆ°å®ƒä»¬ã€‚</p>
<blockquote>
<p>è€Œå½“å˜é‡ç¦»å¼€ç¯å¢ƒæ—¶ï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ã€‚<br>åƒåœ¾å›æ”¶å™¨åœ¨è¿è¡Œçš„æ—¶å€™ä¼šç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡éƒ½åŠ ä¸Šæ ‡è®°ï¼ˆå½“ç„¶ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•æ ‡è®°æ–¹å¼ï¼‰ã€‚<br>ç„¶åï¼Œå®ƒä¼šå»æ‰ç¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«ç¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°ï¼ˆé—­åŒ…ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç¯å¢ƒä¸­çš„ä»¥åŠç›¸å…³å¼•ç”¨çš„å˜é‡ä¼šè¢«å»é™¤æ ‡è®°ï¼‰ã€‚<br>è€Œåœ¨æ­¤ä¹‹åå†è¢«åŠ ä¸Šæ ‡è®°çš„å˜é‡å°†è¢«è§†ä¸ºå‡†å¤‡åˆ é™¤çš„å˜é‡ï¼ŒåŸå› æ˜¯ç¯å¢ƒä¸­çš„å˜é‡å·²ç»æ— æ³•è®¿é—®åˆ°è¿™äº›å˜é‡äº†ã€‚<br>æœ€åï¼Œåƒåœ¾å›æ”¶å™¨å®Œæˆå†…å­˜æ¸…é™¤å·¥ä½œï¼Œé”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p>
</blockquote>
<p>å…³äºå¼•ç”¨è®¡æ•°ï¼Œç®€å•ç‚¹ç†è§£ï¼š<br><strong>è·Ÿè¸ªè®°å½•æ¯ä¸ªå€¼è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œå½“ä¸€ä¸ªå€¼è¢«å¼•ç”¨æ—¶ï¼Œæ¬¡æ•°<code>+1</code>ï¼Œå‡æŒæ—¶<code>-1</code>ï¼Œä¸‹æ¬¡åƒåœ¾å›æ”¶å™¨ä¼šå›æ”¶æ¬¡æ•°ä¸º<code>0</code>çš„å€¼çš„å†…å­˜ï¼ˆå½“ç„¶äº†ï¼Œå®¹æ˜“å‡ºå¾ªç¯å¼•ç”¨çš„bugï¼‰</strong><br><strong>GCçš„ç¼ºé™·</strong><br>å’Œå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œjavascriptçš„GCç­–ç•¥ä¹Ÿæ— æ³•é¿å…ä¸€ä¸ªé—®é¢˜ï¼š <strong>GCæ—¶ï¼Œåœæ­¢å“åº”å…¶ä»–æ“ä½œ</strong><br>è¿™æ˜¯ä¸ºäº†å®‰å…¨è€ƒè™‘ã€‚<br>è€ŒJavascriptçš„GCåœ¨<code>100ms</code>ç”šè‡³ä»¥ä¸Š<br>å¯¹ä¸€èˆ¬çš„åº”ç”¨è¿˜å¥½ï¼Œä½†å¯¹äºJSæ¸¸æˆï¼ŒåŠ¨ç”»å¯¹è¿è´¯æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åº”ç”¨ï¼Œå°±éº»çƒ¦äº†ã€‚<br>è¿™å°±æ˜¯å¼•æ“éœ€è¦ä¼˜åŒ–çš„ç‚¹ï¼š <strong>é¿å…GCé€ æˆçš„é•¿æ—¶é—´åœæ­¢å“åº”ã€‚</strong><br><strong>GCä¼˜åŒ–ç­–ç•¥</strong><br>è¿™é‡Œä»‹ç»å¸¸ç”¨åˆ°çš„ï¼š<strong>åˆ†ä»£å›æ”¶ï¼ˆGeneration GCï¼‰</strong><br>ç›®çš„æ˜¯é€šè¿‡åŒºåˆ†â€œä¸´æ—¶â€ä¸â€œæŒä¹…â€å¯¹è±¡:</p>
<ul>
<li>å¤šå›æ”¶â€œä¸´æ—¶å¯¹è±¡â€åŒºï¼ˆ<code>young generation</code>ï¼‰</li>
<li>å°‘å›æ”¶â€œæŒä¹…å¯¹è±¡â€åŒºï¼ˆ<code>tenured generation</code>ï¼‰</li>
<li>å‡å°‘æ¯æ¬¡éœ€éå†çš„å¯¹è±¡ï¼Œä»è€Œå‡å°‘æ¯æ¬¡GCçš„è€—æ—¶ã€‚</li>
</ul>
<p>åƒnode v8å¼•æ“å°±æ˜¯é‡‡ç”¨çš„åˆ†ä»£å›æ”¶ï¼ˆå’Œjavaä¸€æ ·ï¼Œä½œè€…æ˜¯javaè™šæ‹Ÿæœºä½œè€…ã€‚ï¼‰<br>æ›´å¤šå¯ä»¥å‚è€ƒï¼š<br><a href="https://zhuanlan.zhihu.com/p/33816534" target="_blank" rel="noopener">V8 å†…å­˜æµ…æ</a></p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="å¯ä»¥æåˆ°è·¨åŸŸ"><a href="#å¯ä»¥æåˆ°è·¨åŸŸ" class="headerlink" title="å¯ä»¥æåˆ°è·¨åŸŸ"></a>å¯ä»¥æåˆ°è·¨åŸŸ</h3><p>è­¬å¦‚å‘å‡ºç½‘ç»œè¯·æ±‚æ—¶ï¼Œä¼šç”¨AJAXï¼Œå¦‚æœæ¥å£è·¨åŸŸï¼Œå°±ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜<br>å¯ä»¥å‚è€ƒï¼š<br><a href="https://segmentfault.com/a/1190000012469713" target="_blank" rel="noopener">ajaxè·¨åŸŸï¼Œè¿™åº”è¯¥æ˜¯æœ€å…¨çš„è§£å†³æ–¹æ¡ˆäº†</a></p>
<h3 id="å¯ä»¥æåˆ°webå®‰å…¨"><a href="#å¯ä»¥æåˆ°webå®‰å…¨" class="headerlink" title="å¯ä»¥æåˆ°webå®‰å…¨"></a>å¯ä»¥æåˆ°webå®‰å…¨</h3><p>è­¬å¦‚æµè§ˆå™¨åœ¨è§£æHTMLæ—¶ï¼Œæœ‰<code>XSSAuditor</code>ï¼Œå¯ä»¥å»¶ä¼¸åˆ°webå®‰å…¨ç›¸å…³é¢†åŸŸ<br>å¯ä»¥å‚è€ƒï¼š<br><a href="https://segmentfault.com/a/1190000012693772" target="_blank" rel="noopener">AJAXè¯·æ±‚çœŸçš„ä¸å®‰å…¨ä¹ˆï¼Ÿè°ˆè°ˆWebå®‰å…¨ä¸AJAXçš„å…³ç³»ã€‚</a></p>
<h3 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h3><p>å¦‚å¯ä»¥æåˆ°<code>viewport</code>æ¦‚å¿µï¼Œè®²è®²ç‰©ç†åƒç´ ï¼Œé€»è¾‘åƒç´ ï¼ŒCSSåƒç´ ç­‰æ¦‚å¿µ<br>å¦‚ç†Ÿæ‚‰Hybridå¼€å‘çš„è¯å¯ä»¥æåŠä¸€ä¸‹Hybridç›¸å…³å†…å®¹ä»¥åŠä¼˜åŒ–</p>
<h2 id="æ„Ÿè°¢"><a href="#æ„Ÿè°¢" class="headerlink" title="æ„Ÿè°¢"></a>æ„Ÿè°¢</h2><p>æ„Ÿè°¢<a href="https://segmentfault.com/a/1190000013662126" target="_blank" rel="noopener">æ’’ç½‘è¦è§é±¼</a>çš„åˆ†äº«ã€‚</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Webpack/07" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/12/Webpack/07/"
    >å¤šé¡µé¢æ‰“åŒ…é…ç½®</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/12/Webpack/07/" class="article-date">
  <time datetime="2020-02-12T12:00:00.000Z" itemprop="datePublished">2020-02-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/webpack/">webpack</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="webpack4-0-ä¸ƒ-ï¼šå¤šé¡µé¢æ‰“åŒ…é…ç½®"><a href="#webpack4-0-ä¸ƒ-ï¼šå¤šé¡µé¢æ‰“åŒ…é…ç½®" class="headerlink" title="webpack4.0(ä¸ƒ)ï¼šå¤šé¡µé¢æ‰“åŒ…é…ç½®"></a>webpack4.0(ä¸ƒ)ï¼šå¤šé¡µé¢æ‰“åŒ…é…ç½®</h1><p>webpack.config.js</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> AddAssetHtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'add-asset-html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment" spellcheck="true">/**
 * @param { Object } 
 * @return { Object }
 */</span>
<span class="token keyword">const</span> makeHtml <span class="token operator">=</span> <span class="token punctuation">(</span>configs<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pluginsDll <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>configs<span class="token punctuation">.</span>entry<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>key <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
        pluginsDll<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                filename<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.html`</span></span><span class="token punctuation">,</span>
                template<span class="token punctuation">:</span><span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
                chunks<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'lodash'</span><span class="token punctuation">,</span><span class="token string">'react'</span><span class="token punctuation">,</span>key<span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'../dll'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>file <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex">/.*\.dll.js$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            pluginsDll<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">AddAssetHtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    filepath<span class="token punctuation">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'../dll'</span><span class="token punctuation">,</span>file<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex">/.*\.manifest.json$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                manifest<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'../dll'</span><span class="token punctuation">,</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> pluginsDll<span class="token punctuation">;</span>
<span class="token punctuation">}</span>



<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span><span class="token punctuation">{</span>
        index<span class="token punctuation">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
        list<span class="token punctuation">:</span><span class="token string">'./src/list.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span><span class="token punctuation">{</span>
        path<span class="token punctuation">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'../dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span><span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span><span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span>
                loader<span class="token punctuation">:</span><span class="token string">'babel-loader'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

config<span class="token punctuation">.</span>plugins <span class="token operator">=</span> <span class="token function">makeHtml</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span></code></pre>
<p>webpack.dll.js</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span><span class="token string">"production"</span><span class="token punctuation">,</span>
    entry<span class="token punctuation">:</span><span class="token punctuation">{</span>
        react<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span><span class="token string">'react-dom'</span><span class="token punctuation">,</span><span class="token string">'react-router-dom'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        lodash<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'lodash-es'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span><span class="token punctuation">{</span>
        filename<span class="token punctuation">:</span><span class="token string">'[name].dll.js'</span><span class="token punctuation">,</span>
        path <span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'../dll'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        library<span class="token punctuation">:</span><span class="token string">'_dll_[name]'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">"_dll_[name]"</span><span class="token punctuation">,</span>
            path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"../dll/[name].manifest.json"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/">ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/">ä¸‹ä¸€é¡µ</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2019-2020
        Walter
      </li>
      <li>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
      </li>
      
      <li>
        <a href="http://www.beian.miit.gov.cn/" target="_black">è±«ICPå¤‡17047806å·</a>
      </li>
      
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/logo.png" alt="Walter"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="æœç´¢">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i></p>
  <div class="reward-box">
    
    
  </div>
</div>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>





<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>
<script src="/dist/main.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>





<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>


    
  </div>
</body>

</html>